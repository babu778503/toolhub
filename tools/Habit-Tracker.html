<!DOCTYPE html>
<!-- Category: Personal Development & Wellness -->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Habit Tracker</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #3494e6, #ec6ead, #3494e6);
            color: #333;
            min-height: 100vh;
            padding: 20px;
        }

        /* Desktop Styles */
        .desktop-view {
            display: block;
            max-width: 1200px;
            margin: 0 auto;
        }

        .mobile-view {
            display: none;
        }

        header {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            text-align: center;
            position: relative;
        }

        h1 {
            color: #3494e6;
            margin-bottom: 10px;
            font-size: 2.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        h1 i {
            color: #ec6ead;
        }

        .subtitle {
            color: #ec6ead;
            font-size: 1.2rem;
            margin-bottom: 20px;
        }

        .container {
            display: flex;
            gap: 30px;
            margin-bottom: 30px;
        }

        .input-section {
            flex: 1;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
        }

        .habits-section {
            flex: 1;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            max-height: 600px;
            overflow-y: auto;
        }

        h2 {
            color: #3494e6;
            margin-bottom: 20px;
            border-bottom: 2px solid #ec6ead;
            padding-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #3494e6;
        }

        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        input:focus, select:focus, textarea:focus {
            border-color: #3494e6;
            outline: none;
            box-shadow: 0 0 0 3px rgba(52, 148, 230, 0.2);
        }

        button {
            background: linear-gradient(to right, #3494e6, #ec6ead);
            color: white;
            border: none;
            padding: 14px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 18px;
            font-weight: 600;
            width: 100%;
            transition: transform 0.2s, box-shadow 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .btn-secondary {
            background: linear-gradient(to right, #6c757d, #495057);
            margin-top: 10px;
        }

        .btn-warning {
            background: linear-gradient(to right, #ffc107, #e0a800);
        }

        .btn-danger {
            background: linear-gradient(to right, #dc3545, #bd2130);
        }

        .btn-success {
            background: linear-gradient(to right, #28a745, #218838);
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-top: 25px;
        }

        .stat-card {
            background: linear-gradient(135deg, #3494e6, #5a9fe4);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            margin: 10px 0;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .habit-item {
            background: #f8f9fa;
            border-left: 4px solid #3494e6;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 0 8px 8px 0;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s;
        }

        .habit-item:hover {
            transform: translateX(5px);
        }

        .habit-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .habit-time {
            color: #ec6ead;
            font-size: 0.9rem;
        }

        .delete-btn, .edit-btn {
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            width: auto;
            transition: background 0.3s;
            margin-left: 5px;
        }

        .delete-btn {
            background: #dc3545;
        }

        .delete-btn:hover {
            background: #bd2130;
        }

        .edit-btn {
            background: #17a2b8;
        }

        .edit-btn:hover {
            background: #138496;
        }

        .empty-habits {
            text-align: center;
            color: #666;
            font-style: italic;
            padding: 20px;
        }

        .daily-progress {
            height: 20px;
            background: #e0e0e0;
            border-radius: 10px;
            margin-top: 15px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(to right, #28a745, #218838);
            border-radius: 10px;
            transition: width 0.5s;
        }

        .progress-text {
            text-align: center;
            margin-top: 10px;
            font-weight: 600;
        }

        .progress-indicator {
            display: flex;
            justify-content: space-between;
            font-size: 0.8rem;
            color: #666;
            margin-top: 5px;
        }

        .habit-info {
            background: #e3f2fd;
            border-left: 4px solid #2196F3;
            padding: 15px;
            border-radius: 0 8px 8px 0;
            margin: 20px 0;
        }

        .info-title {
            font-weight: 600;
            margin-bottom: 10px;
            color: #3494e6;
        }

        .info-content {
            font-size: 0.9rem;
            line-height: 1.5;
        }

        .chart-container {
            height: 200px;
            margin-top: 20px;
            position: relative;
        }

        .chart-bar {
            position: absolute;
            bottom: 0;
            width: 30px;
            background: linear-gradient(to top, #3494e6, #5a9fe4);
            border-radius: 5px 5px 0 0;
            text-align: center;
            color: white;
            font-size: 0.7rem;
            display: flex;
            align-items: flex-end;
            justify-content: center;
            padding: 5px;
        }

        .chart-label {
            position: absolute;
            bottom: -25px;
            width: 30px;
            text-align: center;
            font-size: 0.7rem;
            color: #666;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            border-radius: 15px;
            padding: 30px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            position: relative;
        }

        .close-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.5rem;
            cursor: pointer;
            color: #666;
        }

        .modal h3 {
            color: #3494e6;
            margin-bottom: 20px;
            text-align: center;
        }

        .form-row {
            display: flex;
            gap: 15px;
        }

        .form-row .form-group {
            flex: 1;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            border-radius: 8px;
            color: white;
            font-weight: 600;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            z-index: 1001;
            transform: translateX(200%);
            transition: transform 0.3s;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
            background: linear-gradient(to right, #28a745, #218838);
        }

        .notification.warning {
            background: linear-gradient(to right, #ffc107, #e0a800);
        }

        .notification.error {
            background: linear-gradient(to right, #dc3545, #c82333);
        }

        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid #ddd;
        }

        .tab {
            padding: 10px 20px;
            cursor: pointer;
            background: #f0f0f0;
            border: none;
            border-radius: 5px 5px 0 0;
            margin-right: 5px;
        }

        .tab.active {
            background: #3494e6;
            color: white;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .export-section {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .export-btn {
            flex: 1;
            padding: 10px;
            font-size: 0.9rem;
        }

        .filter-section {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .filter-btn {
            flex: 1;
            padding: 8px;
            font-size: 0.8rem;
        }

        .active-filter {
            background: #3494e6;
            color: white;
        }

        .habit-description {
            margin: 8px 0;
            font-size: 0.9rem;
            color: #555;
        }

        .habit-category {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: 600;
            margin-top: 5px;
        }

        .category-health {
            background: #e8f5e9;
            color: #2e7d32;
        }

        .category-productivity {
            background: #e3f2fd;
            color: #1565c0;
        }

        .category-personal {
            background: #f3e5f5;
            color: #6a1b9a;
        }

        .category-learning {
            background: #fff3e0;
            color: #ef6c00;
        }

        .category-fitness {
            background: #ffebee;
            color: #c62828;
        }

        .frequency-badge {
            display: inline-block;
            padding: 2px 6px;
            border-radius: 8px;
            font-size: 0.7rem;
            font-weight: 600;
            margin-left: 8px;
            background: #3494e6;
            color: white;
        }

        .streak-badge {
            display: inline-block;
            padding: 2px 6px;
            border-radius: 8px;
            font-size: 0.7rem;
            font-weight: 600;
            margin-left: 8px;
            background: #ff9800;
            color: white;
        }

        .habit-calendar {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
            margin-top: 15px;
        }

        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            font-size: 0.7rem;
            background: #e0e0e0;
            cursor: pointer;
            transition: all 0.2s;
        }

        .calendar-day.completed {
            background: #28a745;
            color: white;
        }

        .calendar-day.missed {
            background: #dc3545;
            color: white;
        }

        .calendar-day.today {
            border: 2px solid #3494e6;
        }

        .calendar-header {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
            margin-bottom: 5px;
            font-weight: 600;
            font-size: 0.8rem;
            text-align: center;
            color: #3494e6;
        }

        .habit-actions {
            display: flex;
            gap: 5px;
            margin-top: 10px;
        }

        .action-btn {
            flex: 1;
            padding: 8px;
            font-size: 0.8rem;
        }

        .week-summary {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            font-size: 0.8rem;
            color: #666;
        }

        /* Mobile Styles */
        @media (max-width: 768px) {
            .desktop-view {
                display: none;
            }

            .mobile-view {
                display: block;
            }

            body {
                padding: 0;
                background: linear-gradient(135deg, #3494e6, #ec6ead);
            }

            header {
                height: 50px;
                border-radius: 0;
                padding: 10px;
                margin-bottom: 0;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            h1 {
                font-size: 1.3rem;
                margin: 0;
            }

            h1 i {
                font-size: 1rem;
            }

            .subtitle {
                display: none;
            }

            .container {
                display: block;
                padding: 15px;
                gap: 15px;
            }

            .input-section, .habits-section {
                border-radius: 10px;
                padding: 15px;
                margin-bottom: 15px;
            }

            .stats {
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
            }

            .stat-card {
                padding: 12px;
            }

            .stat-value {
                font-size: 1.3rem;
                margin: 5px 0;
            }

            .stat-label {
                font-size: 0.7rem;
            }

            h2 {
                font-size: 1.2rem;
                margin-bottom: 15px;
            }

            button {
                padding: 12px;
                font-size: 16px;
            }

            .habit-item {
                padding: 12px;
            }

            .habit-header {
                flex-direction: column;
                gap: 5px;
            }

            .form-group {
                margin-bottom: 15px;
            }

            input, select {
                padding: 10px;
                font-size: 14px;
            }

            .daily-progress {
                height: 15px;
            }

            .progress-text {
                font-size: 0.8rem;
            }

            .form-row {
                flex-direction: column;
                gap: 0;
            }

            .modal-content {
                padding: 20px;
                width: 95%;
            }

            .export-section {
                flex-direction: column;
                gap: 5px;
            }

            .filter-section {
                flex-direction: column;
                gap: 5px;
            }

            .habit-description {
                font-size: 0.8rem;
            }

            .habit-actions {
                flex-direction: column;
            }

            .action-btn {
                width: 100%;
            }

            .habit-calendar {
                gap: 3px;
            }

            .calendar-day {
                font-size: 0.6rem;
            }

            .calendar-header {
                font-size: 0.7rem;
            }
        }

        @media (max-width: 480px) {
            .stats {
                grid-template-columns: 1fr 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Desktop View -->
    <div class="desktop-view">
        <header>
            <h1><i class="fas fa-calendar-check"></i> Habit Tracker</h1>
            <div class="subtitle">Build positive habits and track your progress</div>
        </header>

        <div class="container">
            <section class="input-section">
                <div class="tabs">
                    <button class="tab active" data-tab="add">Add Habit</button>
                    <button class="tab" data-tab="categories">Categories</button>
                    <button class="tab" data-tab="stats">Statistics</button>
                    <button class="tab" data-tab="tips">Tips</button>
                </div>

                <div class="tab-content active" id="add-tab">
                    <h2><i class="fas fa-plus-circle"></i> Add New Habit</h2>
                    <form id="habit-form">
                        <div class="form-group">
                            <label for="habit-name">Habit Name</label>
                            <input type="text" id="habit-name" placeholder="Enter your habit" required>
                        </div>

                        <div class="form-group">
                            <label for="habit-description">Description (Optional)</label>
                            <textarea id="habit-description" rows="2" placeholder="Describe your habit in detail"></textarea>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="habit-category">Category</label>
                                <select id="habit-category" required>
                                    <option value="">Select a category</option>
                                    <option value="health">Health & Wellness</option>
                                    <option value="productivity">Productivity</option>
                                    <option value="personal">Personal Development</option>
                                    <option value="learning">Learning & Education</option>
                                    <option value="fitness">Fitness & Exercise</option>
                                    <option value="finance">Finance & Budgeting</option>
                                    <option value="relationships">Relationships</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="habit-frequency">Frequency</label>
                                <select id="habit-frequency" required>
                                    <option value="daily">Daily</option>
                                    <option value="weekly">Weekly</option>
                                    <option value="monthly">Monthly</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="habit-time">Best Time (Optional)</label>
                                <input type="time" id="habit-time">
                            </div>
                            <div class="form-group">
                                <label for="habit-reminder">Reminder (Optional)</label>
                                <input type="time" id="habit-reminder">
                            </div>
                        </div>

                        <button type="submit"><i class="fas fa-plus"></i> Add Habit</button>
                        <button type="button" class="btn-secondary" id="quick-add-btn"><i class="fas fa-bolt"></i> Quick Add Common Habits</button>
                    </form>
                </div>

                <div class="tab-content" id="categories-tab">
                    <h2><i class="fas fa-tags"></i> Habit Categories</h2>
                    <div class="habit-info">
                        <div class="info-title">Health & Wellness</div>
                        <div class="info-content">Habits related to physical and mental health, sleep, nutrition, and self-care.</div>
                    </div>
                    <div class="habit-info">
                        <div class="info-title">Productivity</div>
                        <div class="info-content">Habits that improve work efficiency, time management, and organizational skills.</div>
                    </div>
                    <div class="habit-info">
                        <div class="info-title">Personal Development</div>
                        <div class="info-content">Habits for self-improvement, hobbies, relationships, and personal growth.</div>
                    </div>
                    <div class="habit-info">
                        <div class="info-title">Learning & Education</div>
                        <div class="info-content">Habits related to skill development, reading, and knowledge acquisition.</div>
                    </div>
                    <div class="habit-info">
                        <div class="info-title">Fitness & Exercise</div>
                        <div class="info-content">Physical activity habits, workout routines, sports, and fitness milestones.</div>
                    </div>
                    <div class="habit-info">
                        <div class="info-title">Finance & Budgeting</div>
                        <div class="info-content">Financial habits, budgeting, saving, investing, and expense tracking.</div>
                    </div>
                    <div class="habit-info">
                        <div class="info-title">Relationships</div>
                        <div class="info-content">Habits related to family, friends, social connections, and networking.</div>
                    </div>
                </div>

                <div class="tab-content" id="stats-tab">
                    <h2><i class="fas fa-chart-bar"></i> Habit Statistics</h2>
                    <div class="stats">
                        <div class="stat-card">
                            <div class="stat-label">Total Habits</div>
                            <div class="stat-value" id="total-habits">0</div>
                            <div class="stat-label">Tracked</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Current Streaks</div>
                            <div class="stat-value" id="current-streaks">0</div>
                            <div class="stat-label">Active</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Best Streak</div>
                            <div class="stat-value" id="best-streak">0</div>
                            <div class="stat-label">Days</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Completion Rate</div>
                            <div class="stat-value" id="completion-rate">0%</div>
                            <div class="stat-label">This Week</div>
                        </div>
                    </div>

                    <div class="stats">
                        <div class="stat-card">
                            <div class="stat-label">Daily Habits</div>
                            <div class="stat-value" id="daily-habits">0</div>
                            <div class="stat-label">Active</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Weekly Habits</div>
                            <div class="stat-value" id="weekly-habits">0</div>
                            <div class="stat-label">Tracked</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Categories</div>
                            <div class="stat-value" id="active-categories">0</div>
                            <div class="stat-label">Used</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Longest Habit</div>
                            <div class="stat-value" id="longest-habit">0</div>
                            <div class="stat-label">Days Old</div>
                        </div>
                    </div>
                </div>

                <div class="tab-content" id="tips-tab">
                    <h2><i class="fas fa-lightbulb"></i> Habit Building Tips</h2>
                    <div class="habit-info">
                        <div class="info-title">Start Small</div>
                        <div class="info-content">Begin with tiny habits that take less than 2 minutes to complete. Small wins build momentum.</div>
                    </div>
                    <div class="habit-info">
                        <div class="info-title">Be Consistent</div>
                        <div class="info-content">Consistency is more important than perfection. Aim to do your habit every day at the same time.</div>
                    </div>
                    <div class="habit-info">
                        <div class="info-title">Track Your Progress</div>
                        <div class="info-content">Use this tracker to monitor your daily progress and celebrate small victories.</div>
                    </div>
                    <div class="habit-info">
                        <div class="info-title">Stack Habits</div>
                        <div class="info-content">Attach new habits to existing ones. For example, "After I brush my teeth, I will do 2 minutes of meditation."</div>
                    </div>
                    <div class="habit-info">
                        <div class="info-title">Don't Break the Chain</div>
                        <div class="info-content">Try to maintain your streak. Even if you can only do a minimal version of the habit, do something.</div>
                    </div>
                </div>

                <div class="habit-info">
                    <div class="info-title">Habit Formation Science</div>
                    <div class="info-content">
                        <p><strong>Research shows:</strong> It takes an average of 66 days to form a new habit, but this varies from 18 to 254 days depending on the person and behavior.</p>
                        <p><strong>Key factors:</strong> Consistency, environment design, and starting small are crucial for habit formation success.</p>
                    </div>
                </div>

                <div class="stats">
                    <div class="stat-card">
                        <div class="stat-label">Today's Habits</div>
                        <div class="stat-value" id="today-habits">0</div>
                        <div class="stat-label">Completed</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Weekly Avg</div>
                        <div class="stat-value" id="weekly-average">0%</div>
                        <div class="stat-label">Completion</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Pending</div>
                        <div class="stat-value" id="pending-habits">0</div>
                        <div class="stat-label">Habits</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">This Month</div>
                        <div class="stat-value" id="monthly-completed">0</div>
                        <div class="stat-label">Completed</div>
                    </div>
                </div>

                <div class="daily-progress">
                    <div class="progress-bar" id="daily-progress-bar" style="width: 0%"></div>
                </div>
                <div class="progress-text" id="progress-text">0% of daily habits completed</div>
                <div class="progress-indicator">
                    <span>0%</span>
                    <span>50%</span>
                    <span>100%</span>
                </div>
            </section>

            <section class="habits-section">
                <h2><i class="fas fa-tasks"></i> Your Habits</h2>
                <div class="filter-section">
                    <button class="filter-btn active-filter" data-filter="all">All Habits</button>
                    <button class="filter-btn" data-filter="daily">Daily</button>
                    <button class="filter-btn" data-filter="weekly">Weekly</button>
                    <button class="filter-btn" data-filter="active">Active</button>
                </div>
                <div class="export-section">
                    <button type="button" class="export-btn btn-warning" id="export-csv-btn"><i class="fas fa-file-csv"></i> Export CSV</button>
                    <button type="button" class="export-btn btn-danger" id="clear-data-btn"><i class="fas fa-trash"></i> Clear Data</button>
                </div>
                <div id="habits-list">
                    <div class="empty-habits">No habits added yet. Start by adding your first habit!</div>
                </div>
            </section>
        </div>
    </div>

    <!-- Mobile View -->
    <div class="mobile-view">
        <header>
            <h1><i class="fas fa-calendar-check"></i> Habit Tracker</h1>
        </header>

        <div class="container">
            <section class="input-section">
                <div class="tabs">
                    <button class="tab active" data-tab="add-mobile">Add Habit</button>
                    <button class="tab" data-tab="stats-mobile">Stats</button>
                </div>

                <div class="tab-content active" id="add-mobile-tab">
                    <h2><i class="fas fa-plus-circle"></i> Add New Habit</h2>
                    <form id="habit-form-mobile">
                        <div class="form-group">
                            <label for="habit-name-mobile">Habit Name</label>
                            <input type="text" id="habit-name-mobile" placeholder="Enter your habit" required>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="habit-category-mobile">Category</label>
                                <select id="habit-category-mobile" required>
                                    <option value="">Select</option>
                                    <option value="health">Health</option>
                                    <option value="productivity">Productivity</option>
                                    <option value="personal">Personal</option>
                                    <option value="learning">Learning</option>
                                    <option value="fitness">Fitness</option>
                                    <option value="finance">Finance</option>
                                    <option value="relationships">Relationships</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="habit-frequency-mobile">Frequency</label>
                                <select id="habit-frequency-mobile" required>
                                    <option value="daily">Daily</option>
                                    <option value="weekly">Weekly</option>
                                    <option value="monthly">Monthly</option>
                                </select>
                            </div>
                        </div>

                        <button type="submit"><i class="fas fa-plus"></i> Add Habit</button>
                    </form>
                </div>

                <div class="tab-content" id="stats-mobile-tab">
                    <h2><i class="fas fa-chart-bar"></i> Statistics</h2>
                    <div class="stats">
                        <div class="stat-card">
                            <div class="stat-label">Total Habits</div>
                            <div class="stat-value" id="total-habits-mobile">0</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Streaks</div>
                            <div class="stat-value" id="current-streaks-mobile">0</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Best Streak</div>
                            <div class="stat-value" id="best-streak-mobile">0</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Rate</div>
                            <div class="stat-value" id="completion-rate-mobile">0%</div>
                        </div>
                    </div>

                    <div class="stats">
                        <div class="stat-card">
                            <div class="stat-label">Daily</div>
                            <div class="stat-value" id="daily-habits-mobile">0</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Weekly</div>
                            <div class="stat-value" id="weekly-habits-mobile">0</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Categories</div>
                            <div class="stat-value" id="active-categories-mobile">0</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Completed</div>
                            <div class="stat-value" id="today-habits-mobile">0</div>
                        </div>
                    </div>

                    <div class="daily-progress">
                        <div class="progress-bar" id="daily-progress-bar-mobile" style="width: 0%"></div>
                    </div>
                    <div class="progress-text" id="progress-text-mobile">0% completed</div>
                </div>

                <div class="stats">
                    <div class="stat-card">
                        <div class="stat-label">Pending</div>
                        <div class="stat-value" id="pending-habits-mobile">0</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Weekly Avg</div>
                        <div class="stat-value" id="weekly-average-mobile">0%</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">This Month</div>
                        <div class="stat-value" id="monthly-completed-mobile">0</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Longest</div>
                        <div class="stat-value" id="longest-habit-mobile">0</div>
                    </div>
                </div>
            </section>

            <section class="habits-section">
                <h2><i class="fas fa-tasks"></i> Your Habits</h2>
                <div class="filter-section">
                    <button class="filter-btn active-filter" data-filter="all">All</button>
                    <button class="filter-btn" data-filter="daily">Daily</button>
                    <button class="filter-btn" data-filter="weekly">Weekly</button>
                    <button class="filter-btn" data-filter="active">Active</button>
                </div>
                <div id="habits-list-mobile">
                    <div class="empty-habits">No habits yet. Add your first habit!</div>
                </div>
            </section>
        </div>
    </div>

    <!-- Quick Add Modal -->
    <div class="modal" id="quick-add-modal">
        <div class="modal-content">
            <span class="close-modal" id="close-quick-modal">&times;</span>
            <h3><i class="fas fa-bolt"></i> Quick Add Common Habits</h3>
            <div class="form-group">
                <label>Select a common habit to add:</label>
                <button type="button" class="quick-habit-btn" data-habit="Drink 8 glasses of water" data-category="health" data-frequency="daily">Drink 8 glasses of water (Health - Daily)</button>
                <button type="button" class="quick-habit-btn" data-habit="Exercise for 30 minutes" data-category="fitness" data-frequency="daily">Exercise for 30 minutes (Fitness - Daily)</button>
                <button type="button" class="quick-habit-btn" data-habit="Read for 20 minutes" data-category="learning" data-frequency="daily">Read for 20 minutes (Learning - Daily)</button>
                <button type="button" class="quick-habit-btn" data-habit="Meditate for 10 minutes" data-category="health" data-frequency="daily">Meditate for 10 minutes (Health - Daily)</button>
                <button type="button" class="quick-habit-btn" data-habit="Review daily goals" data-category="personal" data-frequency="daily">Review daily goals (Personal - Daily)</button>
                <button type="button" class="quick-habit-btn" data-habit="Plan next day" data-category="personal" data-frequency="daily">Plan next day (Personal - Daily)</button>
                <button type="button" class="quick-habit-btn" data-habit="Weekly review" data-category="productivity" data-frequency="weekly">Weekly review (Productivity - Weekly)</button>
                <button type="button" class="quick-habit-btn" data-habit="Monthly budget check" data-category="finance" data-frequency="monthly">Monthly budget check (Finance - Monthly)</button>
            </div>
        </div>
    </div>

    <!-- Edit Habit Modal -->
    <div class="modal" id="edit-habit-modal">
        <div class="modal-content">
            <span class="close-modal" id="close-edit-modal">&times;</span>
            <h3><i class="fas fa-edit"></i> Edit Habit</h3>
            <form id="edit-habit-form">
                <input type="hidden" id="edit-habit-id">
                <div class="form-group">
                    <label for="edit-habit-name">Habit Name</label>
                    <input type="text" id="edit-habit-name" required>
                </div>
                <div class="form-group">
                    <label for="edit-habit-description">Description</label>
                    <textarea id="edit-habit-description" rows="2"></textarea>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="edit-habit-category">Category</label>
                        <select id="edit-habit-category" required>
                            <option value="health">Health & Wellness</option>
                            <option value="productivity">Productivity</option>
                            <option value="personal">Personal Development</option>
                            <option value="learning">Learning & Education</option>
                            <option value="fitness">Fitness & Exercise</option>
                            <option value="finance">Finance & Budgeting</option>
                            <option value="relationships">Relationships</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="edit-habit-frequency">Frequency</label>
                        <select id="edit-habit-frequency" required>
                            <option value="daily">Daily</option>
                            <option value="weekly">Weekly</option>
                            <option value="monthly">Monthly</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="edit-habit-time">Best Time (Optional)</label>
                        <input type="time" id="edit-habit-time">
                    </div>
                    <div class="form-group">
                        <label for="edit-habit-reminder">Reminder (Optional)</label>
                        <input type="time" id="edit-habit-reminder">
                    </div>
                </div>
                <button type="submit"><i class="fas fa-save"></i> Save Changes</button>
            </form>
        </div>
    </div>

    <!-- Notification Container -->
    <div class="notification" id="notification"></div>

    <script>
        // Habit categories data
        const categoryData = {
            'health': { color: '#2e7d32', icon: 'heartbeat', class: 'category-health' },
            'productivity': { color: '#1565c0', icon: 'tasks', class: 'category-productivity' },
            'personal': { color: '#6a1b9a', icon: 'user', class: 'category-personal' },
            'learning': { color: '#ef6c00', icon: 'book', class: 'category-learning' },
            'fitness': { color: '#c62828', icon: 'dumbbell', class: 'category-fitness' },
            'finance': { color: '#388e3c', icon: 'money-bill-wave', class: 'category-finance' },
            'relationships': { color: '#0097a7', icon: 'users', class: 'category-relationships' },
            'other': { color: '#9e9e9e', icon: 'ellipsis-h', class: 'category-other' }
        };

        // Frequency data
        const frequencyData = {
            'daily': { label: 'Daily', icon: 'sync' },
            'weekly': { label: 'Weekly', icon: 'calendar-week' },
            'monthly': { label: 'Monthly', icon: 'calendar-alt' }
        };

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            // Load data from localStorage
            loadHabitsData();
            
            // Set up form submissions
            document.getElementById('habit-form').addEventListener('submit', handleFormSubmit);
            document.getElementById('habit-form-mobile').addEventListener('submit', handleFormSubmit);
            document.getElementById('edit-habit-form').addEventListener('submit', handleEditFormSubmit);
            
            // Set up tab switching
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabName = this.getAttribute('data-tab');
                    const isMobile = tabName.includes('mobile');
                    
                    // Remove active class from all tabs
                    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                    
                    // Add active class to clicked tab
                    this.classList.add('active');
                    document.getElementById(`${tabName}-tab`).classList.add('active');
                });
            });
            
            // Set up quick add functionality
            document.getElementById('quick-add-btn').addEventListener('click', function() {
                document.getElementById('quick-add-modal').style.display = 'flex';
            });
            
            document.getElementById('close-quick-modal').addEventListener('click', function() {
                document.getElementById('quick-add-modal').style.display = 'none';
            });
            
            // Set up quick habit buttons
            document.querySelectorAll('.quick-habit-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const habitName = this.getAttribute('data-habit');
                    const category = this.getAttribute('data-category');
                    const frequency = this.getAttribute('data-frequency');
                    
                    addQuickHabit(habitName, category, frequency);
                });
            });
            
            // Set up edit modal close
            document.getElementById('close-edit-modal').addEventListener('click', function() {
                document.getElementById('edit-habit-modal').style.display = 'none';
            });
            
            // Set up filters
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active-filter'));
                    this.classList.add('active-filter');
                    updateDisplay();
                });
            });
            
            // Set up export and clear buttons
            document.getElementById('export-csv-btn').addEventListener('click', exportToCSV);
            document.getElementById('clear-data-btn').addEventListener('click', clearAllData);
        });

        let habitsData = [];
        let activeFilter = 'all';

        function handleFormSubmit(e) {
            e.preventDefault();
            
            // Determine if mobile or desktop form
            const isMobile = e.target.id.includes('mobile');
            const name = document.getElementById(isMobile ? 'habit-name-mobile' : 'habit-name').value;
            const description = document.getElementById(isMobile ? 'habit-description-mobile' : 'habit-description')?.value || '';
            const category = document.getElementById(isMobile ? 'habit-category-mobile' : 'habit-category').value;
            const frequency = document.getElementById(isMobile ? 'habit-frequency-mobile' : 'habit-frequency').value;
            const bestTime = document.getElementById(isMobile ? 'habit-time-mobile' : 'habit-time')?.value || '';
            const reminder = document.getElementById(isMobile ? 'habit-reminder-mobile' : 'habit-reminder')?.value || '';
            
            // Add to data
            const habit = {
                id: Date.now(),
                name,
                description,
                category,
                frequency,
                bestTime,
                reminder,
                completedDates: [],
                streak: 0,
                bestStreak: 0,
                createdDate: new Date()
            };
            
            habitsData.push(habit);
            saveHabitsData();
            updateDisplay();
            
            // Reset form
            e.target.reset();
            
            // Show notification
            showNotification('Habit added successfully!', 'success');
        }

        function addQuickHabit(name, category, frequency) {
            const habit = {
                id: Date.now(),
                name,
                description: '',
                category,
                frequency,
                bestTime: '',
                reminder: '',
                completedDates: [],
                streak: 0,
                bestStreak: 0,
                createdDate: new Date()
            };
            
            habitsData.push(habit);
            saveHabitsData();
            updateDisplay();
            document.getElementById('quick-add-modal').style.display = 'none';
            showNotification('Quick habit added!', 'success');
        }

        function toggleHabitCompletion(id) {
            const habit = habitsData.find(h => h.id === id);
            if (habit) {
                const now = new Date();
                const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
                const todayStr = today.toISOString().split('T')[0];
                
                // Check if already completed today
                const isCompletedToday = habit.completedDates.includes(todayStr);
                
                if (isCompletedToday) {
                    // Remove today's completion
                    habit.completedDates = habit.completedDates.filter(d => d !== todayStr);
                } else {
                    // Add today's completion
                    habit.completedDates.push(todayStr);
                }
                
                // Update streak
                updateStreak(habit);
                
                saveHabitsData();
                updateDisplay();
                showNotification(isCompletedToday ? 'Habit completion undone' : 'Habit completed!', 'success');
            }
        }

        function updateStreak(habit) {
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            
            // For daily habits, check consecutive days
            if (habit.frequency === 'daily') {
                let streak = 0;
                let currentDate = new Date(today);
                
                // Count backwards consecutive days
                while (true) {
                    const dateStr = currentDate.toISOString().split('T')[0];
                    if (habit.completedDates.includes(dateStr)) {
                        streak++;
                        currentDate.setDate(currentDate.getDate() - 1);
                    } else {
                        break;
                    }
                }
                
                habit.streak = streak;
                if (streak > habit.bestStreak) {
                    habit.bestStreak = streak;
                }
            }
        }

        function deleteHabit(id) {
            habitsData = habitsData.filter(habit => habit.id !== id);
            saveHabitsData();
            updateDisplay();
            showNotification('Habit deleted', 'success');
        }

        function editHabit(id) {
            const habit = habitsData.find(h => h.id === id);
            if (habit) {
                document.getElementById('edit-habit-id').value = habit.id;
                document.getElementById('edit-habit-name').value = habit.name;
                document.getElementById('edit-habit-description').value = habit.description;
                document.getElementById('edit-habit-category').value = habit.category;
                document.getElementById('edit-habit-frequency').value = habit.frequency;
                document.getElementById('edit-habit-time').value = habit.bestTime || '';
                document.getElementById('edit-habit-reminder').value = habit.reminder || '';
                
                document.getElementById('edit-habit-modal').style.display = 'flex';
            }
        }

        function handleEditFormSubmit(e) {
            e.preventDefault();
            
            const id = parseInt(document.getElementById('edit-habit-id').value);
            const habit = habitsData.find(h => h.id === id);
            
            if (habit) {
                habit.name = document.getElementById('edit-habit-name').value;
                habit.description = document.getElementById('edit-habit-description').value;
                habit.category = document.getElementById('edit-habit-category').value;
                habit.frequency = document.getElementById('edit-habit-frequency').value;
                habit.bestTime = document.getElementById('edit-habit-time').value || '';
                habit.reminder = document.getElementById('edit-habit-reminder').value || '';
                
                saveHabitsData();
                updateDisplay();
                document.getElementById('edit-habit-modal').style.display = 'none';
                showNotification('Habit updated successfully!', 'success');
            }
        }

        function saveHabitsData() {
            localStorage.setItem('habitsTrackerData', JSON.stringify(habitsData));
        }

        function loadHabitsData() {
            const data = localStorage.getItem('habitsTrackerData');
            if (data) {
                habitsData = JSON.parse(data);
                // Convert date strings back to Date objects
                habitsData.forEach(habit => {
                    if (habit.createdDate) habit.createdDate = new Date(habit.createdDate);
                });
            }
            updateDisplay();
        }

        function updateDisplay() {
            // Get active filter
            activeFilter = document.querySelector('.filter-btn.active-filter')?.getAttribute('data-filter') || 'all';
            
            // Filter habits based on active filter
            let filteredHabits = [];
            if (activeFilter === 'all') {
                filteredHabits = [...habitsData];
            } else if (activeFilter === 'daily') {
                filteredHabits = habitsData.filter(habit => habit.frequency === 'daily');
            } else if (activeFilter === 'weekly') {
                filteredHabits = habitsData.filter(habit => habit.frequency === 'weekly');
            } else if (activeFilter === 'active') {
                filteredHabits = habitsData.filter(habit => habit.streak > 0);
            }
            
            // Sort by streak and creation date
            filteredHabits.sort((a, b) => {
                if (b.streak !== a.streak) {
                    return b.streak - a.streak;
                }
                return new Date(b.createdDate) - new Date(a.createdDate);
            });
            
            // Calculate statistics
            const totalHabits = habitsData.length;
            const dailyHabits = habitsData.filter(h => h.frequency === 'daily').length;
            const weeklyHabits = habitsData.filter(h => h.frequency === 'weekly').length;
            const activeCategories = [...new Set(habitsData.map(h => h.category))].length;
            
            // Streak statistics
            const currentStreaks = habitsData.filter(h => h.streak > 0).length;
            const bestStreak = habitsData.length > 0 
                ? Math.max(...habitsData.map(h => h.bestStreak)) 
                : 0;
            
            // Completion statistics
            const today = new Date();
            const todayStr = today.toISOString().split('T')[0];
            const todayCompleted = habitsData.filter(h => 
                h.frequency === 'daily' && h.completedDates.includes(todayStr)
            ).length;
            const pendingHabits = dailyHabits - todayCompleted;
            
            // Longest habit
            const longestHabit = habitsData.length > 0 
                ? Math.max(...habitsData.map(h => {
                    const created = new Date(h.createdDate);
                    const diffTime = Math.abs(today - created);
                    return Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                }))
                : 0;
            
            // Weekly completion rate
            const oneWeekAgo = new Date(today);
            oneWeekAgo.setDate(oneWeekAgo.getDate() - 7);
            let totalExpected = 0;
            let totalCompleted = 0;
            
            habitsData.forEach(habit => {
                if (habit.frequency === 'daily') {
                    totalExpected += 7;
                    habit.completedDates.forEach(date => {
                        const dateObj = new Date(date);
                        if (dateObj >= oneWeekAgo && dateObj <= today) {
                            totalCompleted++;
                        }
                    });
                }
            });
            
            const completionRate = totalExpected > 0 ? Math.round((totalCompleted / totalExpected) * 100) : 0;
            
            // Monthly completed
            const startOfMonth = new Date(today.getFullYear(), today.getMonth(), 1);
            const monthlyCompleted = habitsData.reduce((count, habit) => {
                return count + habit.completedDates.filter(date => {
                    const dateObj = new Date(date);
                    return dateObj >= startOfMonth && dateObj <= today;
                }).length;
            }, 0);
            
            // Weekly average
            const weeklyAverage = dailyHabits > 0 ? Math.round((todayCompleted / dailyHabits) * 100) : 0;
            
            // Update progress bar
            const progressPercentage = dailyHabits > 0 ? Math.round((todayCompleted / dailyHabits) * 100) : 0;
            
            // Update desktop stats
            document.getElementById('total-habits').textContent = totalHabits;
            document.getElementById('current-streaks').textContent = currentStreaks;
            document.getElementById('best-streak').textContent = bestStreak;
            document.getElementById('completion-rate').textContent = `${completionRate}%`;
            document.getElementById('daily-habits').textContent = dailyHabits;
            document.getElementById('weekly-habits').textContent = weeklyHabits;
            document.getElementById('active-categories').textContent = activeCategories;
            document.getElementById('longest-habit').textContent = longestHabit;
            document.getElementById('today-habits').textContent = todayCompleted;
            document.getElementById('weekly-average').textContent = `${weeklyAverage}%`;
            document.getElementById('pending-habits').textContent = pendingHabits;
            document.getElementById('monthly-completed').textContent = monthlyCompleted;
            document.getElementById('daily-progress-bar').style.width = `${progressPercentage}%`;
            document.getElementById('progress-text').textContent = `${progressPercentage}% of daily habits completed`;
            
            // Update mobile stats
            document.getElementById('total-habits-mobile').textContent = totalHabits;
            document.getElementById('current-streaks-mobile').textContent = currentStreaks;
            document.getElementById('best-streak-mobile').textContent = bestStreak;
            document.getElementById('completion-rate-mobile').textContent = `${completionRate}%`;
            document.getElementById('daily-habits-mobile').textContent = dailyHabits;
            document.getElementById('weekly-habits-mobile').textContent = weeklyHabits;
            document.getElementById('active-categories-mobile').textContent = activeCategories;
            document.getElementById('longest-habit-mobile').textContent = longestHabit;
            document.getElementById('today-habits-mobile').textContent = todayCompleted;
            document.getElementById('weekly-average-mobile').textContent = `${weeklyAverage}%`;
            document.getElementById('pending-habits-mobile').textContent = pendingHabits;
            document.getElementById('monthly-completed-mobile').textContent = monthlyCompleted;
            document.getElementById('daily-progress-bar-mobile').style.width = `${progressPercentage}%`;
            document.getElementById('progress-text-mobile').textContent = `${progressPercentage}% completed`;
            
            // Update habits list for desktop
            const habitsList = document.getElementById('habits-list');
            if (filteredHabits.length === 0) {
                habitsList.innerHTML = '<div class="empty-habits">No habits found for this filter</div>';
            } else {
                habitsList.innerHTML = filteredHabits.map(habit => {
                    const isCompletedToday = habit.completedDates.includes(todayStr);
                    const hasStreak = habit.streak > 0;
                    
                    return `
                        <div class="habit-item">
                            <div class="habit-header">
                                <span>
                                    <i class="fas fa-${categoryData[habit.category]?.icon || 'question-circle'}"></i>
                                    ${habit.name}
                                    <span class="frequency-badge"><i class="fas fa-${frequencyData[habit.frequency]?.icon || 'sync'}"></i> ${frequencyData[habit.frequency]?.label || habit.frequency}</span>
                                    ${hasStreak ? `<span class="streak-badge"><i class="fas fa-fire"></i> ${habit.streak}</span>` : ''}
                                </span>
                                <div>
                                    <button class="edit-btn" onclick="editHabit(${habit.id})"><i class="fas fa-edit"></i> Edit</button>
                                    <button class="delete-btn" onclick="deleteHabit(${habit.id})"><i class="fas fa-trash"></i> Delete</button>
                                </div>
                            </div>
                            ${habit.description ? `<div class="habit-description">${habit.description}</div>` : ''}
                            <div>
                                <span class="habit-category ${categoryData[habit.category]?.class || 'category-other'}">
                                    ${habit.category.charAt(0).toUpperCase() + habit.category.slice(1)}
                                </span>
                                ${habit.bestTime ? `<span style="margin-left: 10px; font-size: 0.8rem; color: #666;">
                                    <i class="far fa-clock"></i> ${habit.bestTime}
                                </span>` : ''}
                            </div>
                            ${habit.bestStreak > 1 ? `<div class="habit-time"><i class="fas fa-trophy"></i> Best streak: ${habit.bestStreak} days</div>` : ''}
                            <div class="habit-actions">
                                <button class="action-btn ${isCompletedToday ? 'btn-success' : 'btn-secondary'}" onclick="toggleHabitCompletion(${habit.id})">
                                    <i class="fas ${isCompletedToday ? 'fa-undo' : 'fa-check'}"></i> 
                                    ${isCompletedToday ? 'Undo' : 'Complete'}
                                </button>
                            </div>
                            <div class="week-summary">
                                <span>Created: ${formatDate(new Date(habit.createdDate))}</span>
                                <span>Last completed: ${habit.completedDates.length > 0 ? formatDate(new Date(habit.completedDates[habit.completedDates.length - 1])) : 'Never'}</span>
                            </div>
                        </div>
                    `;
                }).join('');
            }
            
            // Update habits list for mobile
            const habitsListMobile = document.getElementById('habits-list-mobile');
            if (filteredHabits.length === 0) {
                habitsListMobile.innerHTML = '<div class="empty-habits">No habits for this filter</div>';
            } else {
                habitsListMobile.innerHTML = filteredHabits.map(habit => {
                    const isCompletedToday = habit.completedDates.includes(todayStr);
                    const hasStreak = habit.streak > 0;
                    
                    return `
                        <div class="habit-item">
                            <div class="habit-header">
                                <span>
                                    <i class="fas fa-${categoryData[habit.category]?.icon || 'question-circle'}"></i>
                                    ${habit.name.length > 20 ? habit.name.substring(0, 20) + '...' : habit.name}
                                    <span class="frequency-badge"><i class="fas fa-${frequencyData[habit.frequency]?.icon || 'sync'}"></i></span>
                                    ${hasStreak ? `<span class="streak-badge">${habit.streak}</span>` : ''}
                                </span>
                                <div>
                                    <button class="edit-btn" onclick="editHabit(${habit.id})"><i class="fas fa-edit"></i></button>
                                    <button class="delete-btn" onclick="deleteHabit(${habit.id})"><i class="fas fa-trash"></i></button>
                                </div>
                            </div>
                            <div>
                                <span class="habit-category ${categoryData[habit.category]?.class || 'category-other'}">
                                    ${habit.category}
                                </span>
                            </div>
                            <div class="habit-actions">
                                <button class="action-btn ${isCompletedToday ? 'btn-success' : 'btn-secondary'}" onclick="toggleHabitCompletion(${habit.id})">
                                    <i class="fas ${isCompletedToday ? 'fa-undo' : 'fa-check'}"></i> 
                                    ${isCompletedToday ? 'Undo' : 'Complete'}
                                </button>
                            </div>
                        </div>
                    `;
                }).join('');
            }
        }

        function formatDate(date) {
            return date.toLocaleDateString([], { month: 'short', day: 'numeric', year: 'numeric' });
        }

        function formatDateTime(date) {
            return date.toLocaleDateString([], { month: 'short', day: 'numeric' }) + ' ' + 
                   date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
        }

        function exportToCSV() {
            if (habitsData.length === 0) {
                showNotification('No habits to export', 'warning');
                return;
            }
            
            let csv = 'ID,Name,Description,Category,Frequency,Best Time,Reminder,Created Date,Streak,Best Streak,Completed Dates\n';
            
            habitsData.forEach(habit => {
                const name = `"${habit.name.replace(/"/g, '""')}"`;
                const description = habit.description ? `"${habit.description.replace(/"/g, '""')}"` : '';
                const category = habit.category;
                const frequency = habit.frequency;
                const bestTime = habit.bestTime || '';
                const reminder = habit.reminder || '';
                const createdDate = `"${formatDateTime(new Date(habit.createdDate))}"`;
                const streak = habit.streak || 0;
                const bestStreak = habit.bestStreak || 0;
                const completedDates = habit.completedDates ? `"${habit.completedDates.join(', ')}"` : '';
                
                csv += `${habit.id},${name},${description},${category},${frequency},${bestTime},${reminder},${createdDate},${streak},${bestStreak},${completedDates}\n`;
            });
            
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.setAttribute('hidden', '');
            a.setAttribute('href', url);
            a.setAttribute('download', 'habits_tracker.csv');
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            
            showNotification('Habits exported successfully', 'success');
        }

        function clearAllData() {
            if (confirm('Are you sure you want to clear all habits? This cannot be undone.')) {
                habitsData = [];
                localStorage.removeItem('habitsTrackerData');
                updateDisplay();
                showNotification('All habits cleared', 'success');
            }
        }

        function showNotification(message, type) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification ${type} show`;
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // Make functions available globally
        window.toggleHabitCompletion = toggleHabitCompletion;
        window.deleteHabit = deleteHabit;
        window.editHabit = editHabit;
    </script>
</body>
</html>
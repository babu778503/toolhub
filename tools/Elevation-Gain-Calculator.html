<!-- Category: Environment -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Elevation Gain Calculator - Essential Hiking Metrics Tool</title>
    <meta name="description" content="Elevation Gain Calculator helps you calculate total elevation gain for hiking trails. Determine elevation changes for your hiking adventures with our easy-to-use tool.">
    <meta name="keywords" content="elevation gain calculator, hiking elevation, trail elevation, elevation change, hiking metrics, trail difficulty, hiking preparation, outdoor fitness, hiking calculator">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #1a2a6c, #2c3e50, #4ca1af);
            color: #fff;
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
        }

        /* Header Styles */
        .header {
            display: flex;
            justify-content: center;
            align-items: center;
            background: rgba(0, 0, 0, 0.7);
            border-radius: 10px;
            margin-bottom: 25px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header h1 {
            font-size: 2.5rem;
            text-align: center;
            padding: 15px;
            background: linear-gradient(to right, #4facfe, #00f2fe);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        /* Container for content */
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        /* Card Styles */
        .card {
            background: rgba(30, 30, 46, 0.85);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4);
        }

        .card h2 {
            color: #4facfe;
            margin-bottom: 15px;
            font-size: 1.8rem;
            border-bottom: 2px solid #4facfe;
            padding-bottom: 10px;
            display: flex;
            align-items: center;
        }

        .card h2 i {
            margin-right: 10px;
        }

        .card p {
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        /* Form Styles */
        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #4facfe;
        }

        .form-control {
            width: 100%;
            padding: 12px;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            background: rgba(0, 0, 0, 0.3);
            color: white;
            font-size: 1rem;
        }

        .form-control:focus {
            outline: none;
            border-color: #4facfe;
            box-shadow: 0 0 0 2px rgba(79, 172, 254, 0.3);
        }

        /* Button styles */
        .btn {
            display: inline-block;
            padding: 12px 25px;
            background: linear-gradient(to right, #4facfe, #00f2fe);
            color: #1a1a2e;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            text-decoration: none;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            margin: 5px;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .btn:active {
            transform: translateY(0);
        }

        /* Results section */
        .results {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            display: none;
        }

        .results h3 {
            color: #00f2fe;
            margin-bottom: 15px;
        }

        .result-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            transition: transform 0.3s ease;
        }

        .result-item:hover {
            transform: translateX(5px);
        }

        .result-item h4 {
            color: #4facfe;
            margin-bottom: 5px;
        }

        .result-item p {
            margin: 5px 0;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .header {
                height: 50px;
            }
            
            .header h1 {
                font-size: 1.8rem;
                padding: 5px;
            }
            
            .card {
                padding: 15px;
            }
            
            .card h2 {
                font-size: 1.5rem;
            }
            
            body {
                padding: 10px;
            }
        }

        /* Mobile-specific adjustments */
        @media (max-width: 480px) {
            .header h1 {
                font-size: 1.5rem;
            }
            
            .card p {
                font-size: 1rem;
            }
            
            .btn {
                width: 100%;
                margin: 5px 0;
            }
        }
        
        /* Data management section */
        .data-section {
            margin-top: 20px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
        }
        
        .data-section h3 {
            color: #4facfe;
            margin-bottom: 10px;
        }
        
        .data-section p {
            margin-bottom: 10px;
        }
        
        /* Elevation chart */
        .elevation-chart {
            height: 200px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            margin: 15px 0;
            position: relative;
            overflow: hidden;
        }
        
        .elevation-profile {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        
        .elevation-line {
            stroke: #4facfe;
            stroke-width: 3;
            fill: none;
        }
        
        .elevation-area {
            fill: rgba(79, 172, 254, 0.2);
        }
        
        /* Steps list */
        .steps {
            counter-reset: step-counter;
            list-style: none;
            padding-left: 0;
        }

        .steps li {
            counter-increment: step-counter;
            margin-bottom: 20px;
            padding-left: 40px;
            position: relative;
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 8px;
            transition: background 0.3s ease;
        }

        .steps li:hover {
            background: rgba(79, 172, 254, 0.15);
        }

        .steps li::before {
            content: counter(step-counter);
            position: absolute;
            left: 10px;
            top: 15px;
            background: #4facfe;
            color: white;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        
        /* Tip styling */
        .tip {
            background: rgba(79, 172, 254, 0.15);
            border-left: 4px solid #4facfe;
            padding: 15px;
            border-radius: 0 8px 8px 0;
            margin: 15px 0;
            position: relative;
        }

        .tip strong {
            color: #4facfe;
        }

        .tip::before {
            content: "💡";
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.2rem;
        }
        
        /* Progress bar */
        .progress-container {
            margin: 20px 0;
        }
        
        .progress-bar {
            height: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
        }
        
        .progress {
            height: 100%;
            background: linear-gradient(to right, #4facfe, #00f2fe);
            width: 0%;
            transition: width 0.4s ease;
        }
        
        /* Metric cards */
        .metric-cards {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin: 20px 0;
        }
        
        .metric-card {
            flex: 1;
            min-width: 200px;
            background: rgba(79, 172, 254, 0.2);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }
        
        .metric-value {
            font-size: 2rem;
            font-weight: bold;
            color: #4facfe;
            margin: 10px 0;
        }
        
        .metric-label {
            color: #ccc;
        }
        
        /* Tabs */
        .tabs {
            display: flex;
            margin-bottom: 15px;
            border-bottom: 2px solid #4facfe;
            flex-wrap: wrap;
        }

        .tab {
            padding: 10px 20px;
            cursor: pointer;
            background: rgba(255, 255, 255, 0.1);
            margin-right: 5px;
            border-radius: 8px 8px 0 0;
            transition: background 0.3s ease;
        }

        .tab.active {
            background: #4facfe;
            color: white;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }
        
        /* Checklist */
        .checklist {
            margin-top: 15px;
        }

        .checklist-item {
            display: flex;
            align-items: center;
            padding: 10px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 5px;
            margin-bottom: 10px;
        }

        .checklist-item input {
            margin-right: 10px;
            transform: scale(1.3);
        }
        
        /* Difficulty rating */
        .difficulty-rating {
            display: flex;
            align-items: center;
            margin: 10px 0;
        }
        
        .difficulty-rating span {
            margin: 0 5px;
            font-size: 1.5rem;
            cursor: pointer;
        }
        
        .difficulty-easy { color: #00ff00; }
        .difficulty-moderate { color: #ffff00; }
        .difficulty-difficult { color: #ffa500; }
        .difficulty-expert { color: #ff0000; }
        
        /* Comparison table */
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        .comparison-table th, .comparison-table td {
            padding: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            text-align: left;
        }
        
        .comparison-table th {
            background: rgba(79, 172, 254, 0.2);
        }
        
        /* Accordion */
        .accordion {
            margin-top: 15px;
        }

        .accordion-item {
            margin-bottom: 10px;
        }

        .accordion-header {
            background: rgba(79, 172, 254, 0.2);
            padding: 15px;
            cursor: pointer;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .accordion-content {
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 0 0 8px 8px;
            display: none;
        }

        .accordion-content.active {
            display: block;
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>Elevation Gain Calculator</h1>
        </header>

        <main>
            <section class="card">
                <h2>🔍 Calculate Elevation Gain</h2>
                <p>Our Elevation Gain Calculator helps you determine the total elevation gain for hiking trails. Enter elevation data at different points along your route to calculate the cumulative elevation gain and understand the physical demands of your hike.</p>
                
                <div class="form-group">
                    <label for="trail-name">Trail Name:</label>
                    <input type="text" id="trail-name" class="form-control" placeholder="Enter trail name">
                </div>
                
                <div class="form-group">
                    <label for="distance">Trail Distance (miles):</label>
                    <input type="number" id="distance" class="form-control" placeholder="Enter distance in miles" min="0.1" step="0.1">
                </div>
                
                <div class="form-group">
                    <label>Elevation Data Points:</label>
                    <div id="elevation-points">
                        <div class="elevation-point">
                            <input type="number" class="form-control" placeholder="Elevation (feet)" style="width: 45%; display: inline-block; margin-right: 5%;">
                            <input type="number" class="form-control" placeholder="Distance (miles)" style="width: 45%; display: inline-block;">
                        </div>
                    </div>
                    <button class="btn" onclick="addElevationPoint()" style="margin-top: 10px;">Add Elevation Point</button>
                </div>
                
                <div class="form-group">
                    <label for="fitness-level">Your Fitness Level:</label>
                    <select id="fitness-level" class="form-control">
                        <option value="beginner">Beginner</option>
                        <option value="intermediate" selected>Intermediate</option>
                        <option value="advanced">Advanced</option>
                        <option value="expert">Expert</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>Additional Factors:</label>
                    <div class="checklist">
                        <div class="checklist-item">
                            <input type="checkbox" id="weather-factor">
                            <label for="weather-factor">Adverse Weather Conditions</label>
                        </div>
                        <div class="checklist-item">
                            <input type="checkbox" id="terrain-factor">
                            <label for="terrain-factor">Difficult Terrain</label>
                        </div>
                        <div class="checklist-item">
                            <input type="checkbox" id="pack-weight">
                            <label for="pack-weight">Heavy Pack (30+ lbs)</label>
                        </div>
                    </div>
                </div>
                
                <button class="btn" onclick="calculateElevation()">Calculate Elevation Gain</button>
                <button class="btn" onclick="resetForm()">Reset</button>
                
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress" id="form-progress"></div>
                    </div>
                    <p>Form Completion: <span id="progress-text">0%</span></p>
                </div>
                
                <div id="results" class="results">
                    <h3>Elevation Analysis</h3>
                    <div class="metric-cards">
                        <div class="metric-card">
                            <div class="metric-label">Total Elevation Gain</div>
                            <div class="metric-value" id="total-gain">0 ft</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-label">Total Elevation Loss</div>
                            <div class="metric-card">
                                <div class="metric-label">Net Elevation Change</div>
                                <div class="metric-value" id="net-change">0 ft</div>
                            </div>
                            <div class="metric-value" id="total-loss">0 ft</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-label">Elevation Gain per Mile</div>
                            <div class="metric-value" id="gain-per-mile">0 ft/mi</div>
                        </div>
                    </div>
                    
                    <div class="difficulty-rating">
                        <span class="difficulty-easy">★</span>
                        <span class="difficulty-easy">★</span>
                        <span class="difficulty-moderate">★</span>
                        <span class="difficulty-difficult">★</span>
                        <span class="difficulty-expert">★</span>
                    </div>
                    
                    <div class="elevation-chart">
                        <svg class="elevation-profile" viewBox="0 0 100 100">
                            <path class="elevation-area" d="M0,100 L0,80 L20,70 L40,50 L60,30 L80,40 L100,20 L100,100 Z"></path>
                            <path class="elevation-line" d="M0,80 L20,70 L40,50 L60,30 L80,40 L100,20"></path>
                        </svg>
                    </div>
                    
                    <div id="elevation-details"></div>
                </div>
            </section>

            <!-- Tabs Section -->
            <div class="card">
                <div class="tabs">
                    <div class="tab active" onclick="switchTab(event, 'analysis')">Elevation Analysis</div>
                    <div class="tab" onclick="switchTab(event, 'comparison')">Trail Comparison</div>
                    <div class="tab" onclick="switchTab(event, 'advice')">Hiking Advice</div>
                </div>

                <div id="analysis" class="tab-content active">
                    <h2>Elevation Analysis</h2>
                    <div id="analysis-content">
                        <p>Based on your inputs, here's the detailed elevation analysis for your trail:</p>
                        <table class="comparison-table">
                            <thead>
                                <tr>
                                    <th>Metric</th>
                                    <th>Value</th>
                                    <th>Interpretation</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Total Elevation Gain</td>
                                    <td id="analysis-gain">0 ft</td>
                                    <td id="analysis-gain-desc">Amount of climbing on the trail</td>
                                </tr>
                                <tr>
                                    <td>Elevation Gain per Mile</td>
                                    <td id="analysis-gain-per-mile">0 ft/mi</td>
                                    <td id="analysis-gain-per-mile-desc">Average climbing per mile</td>
                                </tr>
                                <tr>
                                    <td>Difficulty Rating</td>
                                    <td id="analysis-difficulty">Easy</td>
                                    <td id="analysis-difficulty-desc">Based on elevation metrics</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div id="comparison" class="tab-content">
                    <h2>Trail Comparison</h2>
                    <div class="form-group">
                        <label for="compare-trail">Compare with another trail:</label>
                        <input type="text" id="compare-trail" class="form-control" placeholder="Enter trail name for comparison">
                    </div>
                    <button class="btn" onclick="compareTrails()">Compare Trails</button>
                    
                    <div id="comparison-results" style="margin-top: 20px; display: none;">
                        <h3>Comparison Results</h3>
                        <table class="comparison-table">
                            <thead>
                                <tr>
                                    <th>Metric</th>
                                    <th>Current Trail</th>
                                    <th>Compared Trail</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Total Elevation Gain</td>
                                    <td id="current-gain">0 ft</td>
                                    <td id="compared-gain">0 ft</td>
                                </tr>
                                <tr>
                                    <td>Distance</td>
                                    <td id="current-distance">0 mi</td>
                                    <td id="compared-distance">0 mi</td>
                                </tr>
                                <tr>
                                    <td>Elevation Gain per Mile</td>
                                    <td id="current-gain-per-mile">0 ft/mi</td>
                                    <td id="compared-gain-per-mile">0 ft/mi</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div id="advice" class="tab-content">
                    <h2>Hiking Preparation Advice</h2>
                    <div class="accordion">
                        <div class="accordion-item">
                            <div class="accordion-header" onclick="toggleAccordion(this)">
                                <span>Physical Preparation</span>
                                <span>+</span>
                            </div>
                            <div class="accordion-content">
                                <p>For trails with significant elevation gain, focus on cardiovascular training and leg strength exercises. Start with shorter hikes and gradually increase distance and elevation gain.</p>
                            </div>
                        </div>
                        
                        <div class="accordion-item">
                            <div class="accordion-header" onclick="toggleAccordion(this)">
                                <span>Equipment Recommendations</span>
                                <span>+</span>
                            </div>
                            <div class="accordion-content">
                                <p>For high elevation gain trails, ensure you have proper hiking boots with ankle support, trekking poles for stability, and a well-fitted backpack with lumbar support.</p>
                            </div>
                        </div>
                        
                        <div class="accordion-item">
                            <div class="accordion-header" onclick="toggleAccordion(this)">
                                <span>Pacing Strategy</span>
                                <span>+</span>
                            </div>
                            <div class="accordion-content">
                                <p>Maintain a steady pace on steep sections. Take breaks before you feel exhausted. Use the "rest step" technique where you lock your downhill knee to rest your muscles.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <section class="card">
                <h2>📋 Understanding Elevation Metrics</h2>
                <ul class="steps">
                    <li><strong>Total Elevation Gain:</strong> The cumulative amount of climbing on a trail, regardless of subsequent descents</li>
                    <li><strong>Total Elevation Loss:</strong> The cumulative amount of descending on a trail, regardless of subsequent climbs</li>
                    <li><strong>Net Elevation Change:</strong> The difference between starting and ending elevation points</li>
                    <li><strong>Elevation Gain per Mile:</strong> Average climbing per mile (total gain ÷ trail distance)</li>
                </ul>
                
                <div class="tip">
                    <strong>Pro Tip:</strong> Elevation gain is a key factor in determining trail difficulty. A 5-mile trail with 1,000 feet of gain will feel much more challenging than a 5-mile flat trail.
                </div>
            </section>

            <section class="card">
                <h2>🎯 Elevation Gain Guidelines</h2>
                <ul class="steps">
                    <li><strong>Easy:</strong> Less than 500 feet per mile (less than 10% grade)</li>
                    <li><strong>Moderate:</strong> 500-800 feet per mile (10-15% grade)</li>
                    <li><strong>Difficult:</strong> 800-1,200 feet per mile (15-20% grade)</li>
                    <li><strong>Very Difficult:</strong> Over 1,200 feet per mile (over 20% grade)</li>
                </ul>
                
                <div class="tip">
                    <strong>Important:</strong> Consider your fitness level when evaluating elevation gain. What's easy for experienced hikers may be challenging for beginners. Always start with trails appropriate for your fitness level.
                </div>
            </section>
            
            <!-- Data Management Section -->
            <section class="card">
                <h2>💾 Data Management</h2>
                <div class="data-section">
                    <h3>Your Calculations are Automatically Saved</h3>
                    <p>All your elevation calculations and settings are automatically saved to your device. No need to manually save - your data persists between sessions.</p>
                    
                    <button class="btn" onclick="clearData()">Clear All Saved Data</button>
                    <p><small>Clicking "Clear All Saved Data" will reset all calculations and settings. This action cannot be undone.</small></p>
                </div>
            </section>
        </main>
    </div>

    <script>
        // Add elevation point
        function addElevationPoint() {
            const pointsContainer = document.getElementById('elevation-points');
            const pointDiv = document.createElement('div');
            pointDiv.className = 'elevation-point';
            pointDiv.innerHTML = `
                <input type="number" class="form-control" placeholder="Elevation (feet)" style="width: 45%; display: inline-block; margin-right: 5%;">
                <input type="number" class="form-control" placeholder="Distance (miles)" style="width: 45%; display: inline-block;">
                <button class="btn" onclick="removeElevationPoint(this)" style="margin-left: 10px;">Remove</button>
            `;
            pointsContainer.appendChild(pointDiv);
            updateFormProgress();
        }

        // Remove elevation point
        function removeElevationPoint(button) {
            button.parentElement.remove();
            updateFormProgress();
        }

        // Update form progress
        function updateFormProgress() {
            const inputs = document.querySelectorAll('input');
            let filledCount = 0;
            
            inputs.forEach(input => {
                if (input.value) {
                    filledCount++;
                }
            });
            
            const total = inputs.length;
            const progress = Math.round((filledCount / total) * 100);
            
            document.getElementById('form-progress').style.width = progress + '%';
            document.getElementById('progress-text').textContent = progress + '%';
        }

        // Calculate elevation
        function calculateElevation() {
            const trailName = document.getElementById('trail-name').value;
            const distance = parseFloat(document.getElementById('distance').value) || 0;
            const fitnessLevel = document.getElementById('fitness-level').value;
            const weatherFactor = document.getElementById('weather-factor').checked;
            const terrainFactor = document.getElementById('terrain-factor').checked;
            const packWeight = document.getElementById('pack-weight').checked;
            
            // Get elevation points
            const elevationInputs = document.querySelectorAll('.elevation-point input[type="number"]');
            const elevations = [];
            const distances = [];
            
            for (let i = 0; i < elevationInputs.length; i += 2) {
                const elevation = parseFloat(elevationInputs[i].value);
                const distanceToPoint = parseFloat(elevationInputs[i + 1].value);
                
                if (!isNaN(elevation) && !isNaN(distanceToPoint)) {
                    elevations.push(elevation);
                    distances.push(distanceToPoint);
                }
            }
            
            if (elevations.length < 2) {
                alert('Please enter at least 2 elevation points');
                return;
            }
            
            // Calculate elevation gain
            let totalGain = 0;
            let totalLoss = 0;
            let netChange = 0;
            
            for (let i = 1; i < elevations.length; i++) {
                const diff = elevations[i] - elevations[i - 1];
                
                if (diff > 0) {
                    totalGain += diff;
                } else {
                    totalLoss += Math.abs(diff);
                }
            }
            
            if (elevations.length > 0) {
                netChange = elevations[elevations.length - 1] - elevations[0];
            }
            
            const gainPerMile = distance > 0 ? Math.round(totalGain / distance) : 0;
            
            // Apply difficulty modifiers
            let adjustedGain = totalGain;
            if (weatherFactor) adjustedGain *= 1.2;
            if (terrainFactor) adjustedGain *= 1.3;
            if (packWeight) adjustedGain *= 1.25;
            
            // Determine difficulty level
            let difficulty = '';
            let difficultyDesc = '';
            if (gainPerMile < 500) {
                difficulty = 'Easy';
                difficultyDesc = 'Suitable for beginners';
            } else if (gainPerMile < 800) {
                difficulty = 'Moderate';
                difficultyDesc = 'Requires average fitness';
            } else if (gainPerMile < 1200) {
                difficulty = 'Difficult';
                difficultyDesc = 'Requires good fitness';
            } else {
                difficulty = 'Very Difficult';
                difficultyDesc = 'Requires advanced fitness';
            }
            
            // Display results
            const resultsDiv = document.getElementById('results');
            document.getElementById('total-gain').textContent = Math.round(totalGain) + ' ft';
            document.getElementById('total-loss').textContent = Math.round(totalLoss) + ' ft';
            document.getElementById('net-change').textContent = Math.round(netChange) + ' ft';
            document.getElementById('gain-per-mile').textContent = gainPerMile + ' ft/mi';
            
            // Update analysis tab
            document.getElementById('analysis-gain').textContent = Math.round(totalGain) + ' ft';
            document.getElementById('analysis-gain-per-mile').textContent = gainPerMile + ' ft/mi';
            document.getElementById('analysis-difficulty').textContent = difficulty;
            document.getElementById('analysis-difficulty-desc').textContent = difficultyDesc;
            
            // Create elevation profile visualization
            const maxElevation = Math.max(...elevations);
            const minElevation = Math.min(...elevations);
            const elevationRange = maxElevation - minElevation;
            
            // Normalize elevations for SVG
            const normalizedElevations = elevations.map(e => {
                return elevationRange > 0 ? 100 - ((e - minElevation) / elevationRange) * 80 : 50;
            });
            
            // Create path for elevation line
            let pathD = '';
            let areaD = 'M0,100 ';
            
            normalizedElevations.forEach((elev, index) => {
                const x = (index / (normalizedElevations.length - 1)) * 100;
                if (index === 0) {
                    pathD = `M${x},${elev}`;
                    areaD += `L${x},${elev} `;
                } else {
                    pathD += ` L${x},${elev}`;
                    areaD += `L${x},${elev} `;
                }
            });
            
            areaD += 'L100,100 Z';
            
            // Update SVG
            document.querySelector('.elevation-line').setAttribute('d', pathD);
            document.querySelector('.elevation-area').setAttribute('d', areaD);
            
            // Show results
            resultsDiv.style.display = 'block';
            
            // Save to localStorage
            localStorage.setItem('elevationCalculator_data', JSON.stringify({
                trailName,
                distance,
                elevations: elevations,
                distances: distances,
                fitnessLevel,
                factors: { weatherFactor, terrainFactor, packWeight }
            }));
        }

        // Compare trails
        function compareTrails() {
            const compareTrail = document.getElementById('compare-trail').value;
            if (!compareTrail) {
                alert('Please enter a trail name for comparison');
                return;
            }
            
            // For demonstration, we'll use sample data
            const currentTrail = {
                gain: parseInt(document.getElementById('total-gain').textContent),
                distance: parseFloat(document.getElementById('distance').value) || 0,
                gainPerMile: parseInt(document.getElementById('gain-per-mile').textContent)
            };
            
            // Sample data for comparison trail
            const comparedTrail = {
                gain: Math.floor(Math.random() * 3000) + 500,
                distance: Math.random() * 15 + 1,
                gainPerMile: Math.floor(Math.random() * 1000) + 200
            };
            
            document.getElementById('current-gain').textContent = currentTrail.gain + ' ft';
            document.getElementById('current-distance').textContent = currentTrail.distance.toFixed(1) + ' mi';
            document.getElementById('current-gain-per-mile').textContent = currentTrail.gainPerMile + ' ft/mi';
            
            document.getElementById('compared-gain').textContent = comparedTrail.gain + ' ft';
            document.getElementById('compared-distance').textContent = comparedTrail.distance.toFixed(1) + ' mi';
            document.getElementById('compared-gain-per-mile').textContent = comparedTrail.gainPerMile + ' ft/mi';
            
            document.getElementById('comparison-results').style.display = 'block';
        }

        // Tab functionality
        function switchTab(evt, tabName) {
            var i, tabcontent, tablinks;
            tabcontent = document.getElementsByClassName("tab-content");
            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].classList.remove("active");
            }
            tablinks = document.getElementsByClassName("tab");
            for (i = 0; i < tablinks.length; i++) {
                tablinks[i].classList.remove("active");
            }
            document.getElementById(tabName).classList.add("active");
            evt.currentTarget.classList.add("active");
        }

        // Accordion functionality
        function toggleAccordion(element) {
            const content = element.nextElementSibling;
            const icon = element.querySelector('span:last-child');
            
            if (content.classList.contains('active')) {
                content.classList.remove('active');
                icon.textContent = '+';
            } else {
                content.classList.add('active');
                icon.textContent = '-';
            }
        }

        // Reset form
        function resetForm() {
            document.getElementById('trail-name').value = '';
            document.getElementById('distance').value = '';
            document.getElementById('elevation-points').innerHTML = `
                <div class="elevation-point">
                    <input type="number" class="form-control" placeholder="Elevation (feet)" style="width: 45%; display: inline-block; margin-right: 5%;">
                    <input type="number" class="form-control" placeholder="Distance (miles)" style="width: 45%; display: inline-block;">
                </div>
            `;
            document.getElementById('fitness-level').value = 'intermediate';
            document.getElementById('weather-factor').checked = false;
            document.getElementById('terrain-factor').checked = false;
            document.getElementById('pack-weight').checked = false;
            document.getElementById('results').style.display = 'none';
            document.getElementById('comparison-results').style.display = 'none';
            document.getElementById('form-progress').style.width = '0%';
            document.getElementById('progress-text').textContent = '0%';
        }

        // Clear all saved data
        function clearData() {
            if (confirm('Are you sure you want to clear all saved data? This will reset all calculations and settings.')) {
                localStorage.removeItem('elevationCalculator_data');
                resetForm();
                alert('All saved data has been cleared.');
            }
        }

        // Load saved data
        window.onload = function() {
            const savedData = localStorage.getItem('elevationCalculator_data');
            if (savedData) {
                const data = JSON.parse(savedData);
                
                document.getElementById('trail-name').value = data.trailName || '';
                document.getElementById('distance').value = data.distance || '';
                document.getElementById('fitness-level').value = data.fitnessLevel || 'intermediate';
                
                // Clear existing points
                document.getElementById('elevation-points').innerHTML = '';
                
                // Add saved points
                for (let i = 0; i < data.elevations.length; i++) {
                    const pointDiv = document.createElement('div');
                    pointDiv.className = 'elevation-point';
                    pointDiv.innerHTML = `
                        <input type="number" class="form-control" value="${data.elevations[i]}" style="width: 45%; display: inline-block; margin-right: 5%;">
                        <input type="number" class="form-control" value="${data.distances[i]}" style="width: 45%; display: inline-block;">
                        <button class="btn" onclick="removeElevationPoint(this)" style="margin-left: 10px;">Remove</button>
                    `;
                    document.getElementById('elevation-points').appendChild(pointDiv);
                }
                
                document.getElementById('weather-factor').checked = data.factors?.weatherFactor || false;
                document.getElementById('terrain-factor').checked = data.factors?.terrainFactor || false;
                document.getElementById('pack-weight').checked = data.factors?.packWeight || false;
                
                updateFormProgress();
            }
        };
    </script>
</body>
</html>
<!-- Category: Health -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pregnancy Due Date Calculator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #ff9a9e, #fad0c4, #a1c4fd);
            color: #333;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        /* Desktop Styles */
        .desktop-view {
            display: block;
        }
        
        .mobile-view {
            display: none;
        }
        
        header {
            text-align: center;
            padding: 20px 0;
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            color: #5a4ae3;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .calculator-card {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
            margin-bottom: 30px;
        }
        
        .input-group {
            margin-bottom: 25px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            font-size: 1.1rem;
            color: #5a4ae3;
        }
        
        input, select {
            width: 100%;
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #e0e0e0;
            background: white;
            color: #333;
            font-size: 1.1rem;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: #5a4ae3;
            box-shadow: 0 0 0 3px rgba(90, 74, 227, 0.2);
        }
        
        button {
            background: #5a4ae3;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            font-weight: 600;
            box-shadow: 0 4px 15px rgba(90, 74, 227, 0.3);
        }
        
        button:hover {
            background: #4a3ad3;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(90, 74, 227, 0.4);
        }
        
        .results {
            margin-top: 30px;
            padding: 25px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            display: none;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        .results h2 {
            margin-bottom: 20px;
            text-align: center;
            color: #5a4ae3;
        }
        
        .due-date-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .info-card {
            background: #f8f9ff;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            border-left: 4px solid #5a4ae3;
        }
        
        .info-title {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 10px;
            color: #5a4ae3;
        }
        
        .info-value {
            font-size: 1.4rem;
            font-weight: 700;
            color: #333;
        }
        
        .trimester-progress {
            margin-top: 25px;
        }
        
        .trimester-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 15px;
            text-align: center;
            color: #5a4ae3;
        }
        
        .progress-container {
            background: #e0e0e0;
            height: 20px;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 10px;
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #ff9a9e, #5a4ae3);
            border-radius: 10px;
            transition: width 1s ease;
        }
        
        .progress-text {
            text-align: center;
            font-size: 0.9rem;
            color: #666;
        }
        
        .notification-section {
            margin-top: 30px;
            padding: 25px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        .notification-section h2 {
            margin-bottom: 20px;
            text-align: center;
            color: #5a4ae3;
        }
        
        .reminder-controls {
            display: flex;
            gap: 15px;
            margin-top: 15px;
        }
        
        .reminder-controls button {
            flex: 1;
        }
        
        .history-section {
            margin-top: 30px;
            padding: 25px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        .history-section h2 {
            margin-bottom: 20px;
            text-align: center;
            color: #5a4ae3;
        }
        
        .history-list {
            max-height: 200px;
            overflow-y: auto;
        }
        
        .history-item {
            padding: 15px;
            background: #f8f9ff;
            border-radius: 8px;
            margin-bottom: 10px;
            border-left: 3px solid #5a4ae3;
        }
        
        /* Mobile Styles */
        @media (max-width: 768px) {
            .desktop-view {
                display: none;
            }
            
            .mobile-view {
                display: block;
            }
            
            body {
                padding: 0;
                background: linear-gradient(135deg, #ff9a9e, #fad0c4);
            }
            
            .mobile-header {
                height: 50px;
                background: rgba(255, 255, 255, 0.95);
                display: flex;
                align-items: center;
                justify-content: center;
                padding: 0 15px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            }
            
            .mobile-header h1 {
                font-size: 1.4rem;
                margin: 0;
                color: #5a4ae3;
            }
            
            .mobile-content {
                padding: 20px;
            }
            
            .calculator-card {
                padding: 20px;
                margin-bottom: 20px;
                background: rgba(255, 255, 255, 0.95);
            }
            
            label {
                font-size: 1rem;
            }
            
            input, select {
                padding: 12px;
                font-size: 1rem;
            }
            
            button {
                padding: 12px;
                font-size: 1.1rem;
            }
            
            .results {
                padding: 20px;
                background: rgba(255, 255, 255, 0.95);
            }
            
            .due-date-info {
                grid-template-columns: 1fr;
            }
            
            .notification-section, .history-section {
                padding: 20px;
                margin-top: 20px;
                background: rgba(255, 255, 255, 0.95);
            }
            
            .reminder-controls {
                flex-direction: column;
            }
            
            .info-value {
                font-size: 1.2rem;
            }
        }
    </style>
</head>
<body>
    <!-- Desktop View -->
    <div class="desktop-view">
        <div class="container">
            <header>
                <h1>Pregnancy Due Date Calculator</h1>
            </header>
            
            <div class="calculator-card">
                <div class="input-group">
                    <label for="lastPeriod">First Day of Last Menstrual Period</label>
                    <input type="date" id="lastPeriod">
                </div>
                
                <div class="input-group">
                    <label for="cycleLength">Average Menstrual Cycle Length (days)</label>
                    <select id="cycleLength">
                        <option value="28">28 days (average)</option>
                        <option value="21">21 days</option>
                        <option value="22">22 days</option>
                        <option value="23">23 days</option>
                        <option value="24">24 days</option>
                        <option value="25">25 days</option>
                        <option value="26">26 days</option>
                        <option value="27">27 days</option>
                        <option value="29">29 days</option>
                        <option value="30">30 days</option>
                        <option value="31">31 days</option>
                        <option value="32">32 days</option>
                        <option value="33">33 days</option>
                        <option value="34">34 days</option>
                        <option value="35">35 days</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label for="conceptionDate">Conception Date (if known)</label>
                    <input type="date" id="conceptionDate">
                </div>
                
                <button id="calculateBtn">Calculate Due Date</button>
            </div>
            
            <div class="results" id="results">
                <h2>Pregnancy Information</h2>
                <div class="due-date-info">
                    <div class="info-card">
                        <div class="info-title">Estimated Due Date</div>
                        <div class="info-value" id="dueDate">-</div>
                    </div>
                    <div class="info-card">
                        <div class="info-title">Weeks Pregnant</div>
                        <div class="info-value" id="weeksPregnant">-</div>
                    </div>
                    <div class="info-card">
                        <div class="info-title">Days Until Due</div>
                        <div class="info-value" id="daysUntilDue">-</div>
                    </div>
                </div>
                
                <div class="trimester-progress">
                    <div class="trimester-title">Pregnancy Progress</div>
                    <div class="progress-container">
                        <div class="progress-bar" id="progressBar" style="width: 0%"></div>
                    </div>
                    <div class="progress-text" id="progressText">0% completed</div>
                </div>
            </div>
            
            <div class="notification-section">
                <h2>Pregnancy Reminders</h2>
                <p>Set reminders for important pregnancy milestones</p>
                <div class="reminder-controls">
                    <button id="setReminderBtn">Set Due Date Reminder</button>
                    <button id="cancelReminderBtn">Cancel Reminder</button>
                </div>
                <p id="reminderStatus" style="margin-top: 15px; text-align: center;"></p>
            </div>
            
            <div class="history-section">
                <h2>Your Pregnancy History</h2>
                <div class="history-list" id="historyList"></div>
            </div>
        </div>
    </div>
    
    <!-- Mobile View -->
    <div class="mobile-view">
        <div class="mobile-header">
            <h1>Pregnancy Due Date Calculator</h1>
        </div>
        
        <div class="mobile-content">
            <div class="calculator-card">
                <div class="input-group">
                    <label for="mobileLastPeriod">Last Period Date</label>
                    <input type="date" id="mobileLastPeriod">
                </div>
                
                <div class="input-group">
                    <label for="mobileCycleLength">Cycle Length</label>
                    <select id="mobileCycleLength">
                        <option value="28">28 days</option>
                        <option value="21">21 days</option>
                        <option value="25">25 days</option>
                        <option value="29">29 days</option>
                        <option value="30">30 days</option>
                        <option value="35">35 days</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label for="mobileConceptionDate">Conception Date</label>
                    <input type="date" id="mobileConceptionDate">
                </div>
                
                <button id="mobileCalculateBtn">Calculate Due Date</button>
            </div>
            
            <div class="results" id="mobileResults">
                <h2>Pregnancy Information</h2>
                <div class="due-date-info">
                    <div class="info-card">
                        <div class="info-title">Due Date</div>
                        <div class="info-value" id="mobileDueDate">-</div>
                    </div>
                    <div class="info-card">
                        <div class="info-title">Weeks</div>
                        <div class="info-value" id="mobileWeeksPregnant">-</div>
                    </div>
                    <div class="info-card">
                        <div class="info-title">Days Left</div>
                        <div class="info-value" id="mobileDaysUntilDue">-</div>
                    </div>
                </div>
                
                <div class="trimester-progress">
                    <div class="trimester-title">Progress</div>
                    <div class="progress-container">
                        <div class="progress-bar" id="mobileProgressBar" style="width: 0%"></div>
                    </div>
                    <div class="progress-text" id="mobileProgressText">0%</div>
                </div>
            </div>
            
            <div class="notification-section">
                <h2>Reminders</h2>
                <div class="reminder-controls">
                    <button id="mobileSetReminderBtn">Set Reminder</button>
                    <button id="mobileCancelReminderBtn">Cancel</button>
                </div>
                <p id="mobileReminderStatus" style="margin-top: 15px; text-align: center;"></p>
            </div>
            
            <div class="history-section">
                <h2>Pregnancy History</h2>
                <div class="history-list" id="mobileHistoryList"></div>
            </div>
        </div>
    </div>

    <script>
        // Check if device is mobile
        const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        
        // DOM Elements
        const lastPeriodInput = isMobile ? document.getElementById('mobileLastPeriod') : document.getElementById('lastPeriod');
        const cycleLengthSelect = isMobile ? document.getElementById('mobileCycleLength') : document.getElementById('cycleLength');
        const conceptionDateInput = isMobile ? document.getElementById('mobileConceptionDate') : document.getElementById('conceptionDate');
        const calculateBtn = isMobile ? document.getElementById('mobileCalculateBtn') : document.getElementById('calculateBtn');
        const resultsDiv = isMobile ? document.getElementById('mobileResults') : document.getElementById('results');
        
        // Result elements
        const dueDateElement = isMobile ? document.getElementById('mobileDueDate') : document.getElementById('dueDate');
        const weeksPregnantElement = isMobile ? document.getElementById('mobileWeeksPregnant') : document.getElementById('weeksPregnant');
        const daysUntilDueElement = isMobile ? document.getElementById('mobileDaysUntilDue') : document.getElementById('daysUntilDue');
        const progressBar = isMobile ? document.getElementById('mobileProgressBar') : document.getElementById('progressBar');
        const progressText = isMobile ? document.getElementById('mobileProgressText') : document.getElementById('progressText');
        
        // Reminder elements
        const setReminderBtn = isMobile ? document.getElementById('mobileSetReminderBtn') : document.getElementById('setReminderBtn');
        const cancelReminderBtn = isMobile ? document.getElementById('mobileCancelReminderBtn') : document.getElementById('cancelReminderBtn');
        const reminderStatus = isMobile ? document.getElementById('mobileReminderStatus') : document.getElementById('reminderStatus');
        const historyList = isMobile ? document.getElementById('mobileHistoryList') : document.getElementById('historyList');
        
        // Load saved data
        function loadSavedData() {
            const savedHistory = localStorage.getItem('pregnancyHistory');
            if (savedHistory) {
                const history = JSON.parse(savedHistory);
                updateHistoryDisplay(history);
            }
            
            const savedReminder = localStorage.getItem('pregnancyReminder');
            if (savedReminder) {
                const reminder = JSON.parse(savedReminder);
                updateReminderStatus(reminder);
            }
        }
        
        // Save to localStorage
        function saveToStorage(key, data) {
            localStorage.setItem(key, JSON.stringify(data));
        }
        
        // Calculate due date using Naegele's rule
        function calculateDueDate(lastPeriod, cycleLength) {
            const lmp = new Date(lastPeriod);
            const conceptionDate = conceptionDateInput ? conceptionDateInput.value : (isMobile ? document.getElementById('mobileConceptionDate').value : null);
            
            let dueDate;
            
            // If conception date is provided, use it (266 days from conception)
            if (conceptionDate) {
                dueDate = new Date(conceptionDate);
                dueDate.setDate(dueDate.getDate() + 266);
            } else {
                // Naegele's rule: Add 280 days to LMP
                // Adjust for cycle length (280 - (28 - cycleLength))
                const adjustment = 28 - parseInt(cycleLength);
                dueDate = new Date(lmp);
                dueDate.setDate(dueDate.getDate() + 280 - adjustment);
            }
            
            return dueDate;
        }
        
        // Calculate pregnancy information
        function calculatePregnancyInfo(lastPeriod, cycleLength) {
            const dueDate = calculateDueDate(lastPeriod, cycleLength);
            const today = new Date();
            
            // Calculate weeks pregnant
            const lmp = new Date(lastPeriod);
            const msInDay = 24 * 60 * 60 * 1000;
            const daysPregnant = Math.floor((today - lmp) / msInDay);
            const weeksPregnant = Math.floor(daysPregnant / 7);
            
            // Calculate days until due
            const daysUntilDue = Math.floor((dueDate - today) / msInDay);
            
            // Calculate progress percentage (40 weeks total)
            const totalDays = 40 * 7;
            const progressPercent = Math.min(100, Math.max(0, (daysPregnant / totalDays) * 100));
            
            return {
                dueDate: dueDate,
                weeksPregnant: weeksPregnant,
                daysUntilDue: daysUntilDue,
                progressPercent: progressPercent
            };
        }
        
        // Display results
        function displayResults(info) {
            dueDateElement.textContent = info.dueDate.toLocaleDateString();
            weeksPregnantElement.textContent = `${info.weeksPregnant} weeks`;
            daysUntilDueElement.textContent = info.daysUntilDue > 0 ? `${info.daysUntilDue} days` : 'Baby is here!';
            progressBar.style.width = `${info.progressPercent}%`;
            progressText.textContent = `${Math.round(info.progressPercent)}% completed`;
            
            resultsDiv.style.display = 'block';
        }
        
        // Update history display
        function updateHistoryDisplay(history) {
            historyList.innerHTML = '';
            
            if (history.length === 0) {
                historyList.innerHTML = '<p style="text-align: center; opacity: 0.7;">No history yet</p>';
                return;
            }
            
            // Show last 5 entries
            const recentHistory = history.slice(-5).reverse();
            
            recentHistory.forEach(entry => {
                const historyElement = document.createElement('div');
                historyElement.className = 'history-item';
                historyElement.innerHTML = `
                    <div><strong>Due:</strong> ${new Date(entry.dueDate).toLocaleDateString()}</div>
                    <div><strong>LMP:</strong> ${new Date(entry.lastPeriod).toLocaleDateString()}</div>
                    <div><small>${new Date(entry.timestamp).toLocaleDateString()}</small></div>
                `;
                historyList.appendChild(historyElement);
            });
        }
        
        // Add to history
        function addToHistory(lastPeriod, cycleLength, dueDate) {
            const history = JSON.parse(localStorage.getItem('pregnancyHistory') || '[]');
            
            history.push({
                lastPeriod: lastPeriod,
                cycleLength: cycleLength,
                dueDate: dueDate.toISOString(),
                timestamp: new Date().toISOString()
            });
            
            // Keep only last 20 entries
            if (history.length > 20) {
                history.shift();
            }
            
            saveToStorage('pregnancyHistory', history);
            updateHistoryDisplay(history);
        }
        
        // Set due date reminder
        function setDueDateReminder(dueDate) {
            const reminder = {
                dueDate: dueDate.toISOString(),
                enabled: true,
                timestamp: new Date().toISOString()
            };
            
            saveToStorage('pregnancyReminder', reminder);
            updateReminderStatus(reminder);
            
            // Request notification permission
            if ('Notification' in window) {
                Notification.requestPermission().then(permission => {
                    if (permission === 'granted') {
                        reminderStatus.innerHTML += '<br><small>Notifications enabled</small>';
                    }
                });
            }
        }
        
        // Cancel reminder
        function cancelReminder() {
            localStorage.removeItem('pregnancyReminder');
            reminderStatus.textContent = 'No active reminder';
            reminderStatus.style.color = '#ff6b6b';
        }
        
        // Update reminder status display
        function updateReminderStatus(reminder) {
            if (reminder && reminder.enabled) {
                const dueDate = new Date(reminder.dueDate);
                reminderStatus.innerHTML = `Reminder set for <strong>${dueDate.toLocaleDateString()}</strong>`;
                reminderStatus.style.color = '#5a4ae3';
            } else {
                reminderStatus.textContent = 'No active reminder';
                reminderStatus.style.color = '#ff6b6b';
            }
        }
        
        // Show notification (if supported)
        function showNotification(title, body) {
            if ('Notification' in window && Notification.permission === 'granted') {
                new Notification(title, {
                    body: body,
                    icon: 'image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><text y=".9em" font-size="90">🤰</text></svg>'
                });
            } else if ('serviceWorker' in navigator && 'PushManager' in window) {
                console.log('Push notifications would be sent here');
            }
        }
        
        // Event Listeners
        calculateBtn.addEventListener('click', () => {
            const lastPeriod = lastPeriodInput.value;
            const cycleLength = cycleLengthSelect.value;
            
            if (!lastPeriod) {
                alert('Please select the first day of your last menstrual period');
                return;
            }
            
            const info = calculatePregnancyInfo(lastPeriod, cycleLength);
            displayResults(info);
            
            // Save to history
            addToHistory(lastPeriod, cycleLength, info.dueDate);
        });
        
        setReminderBtn.addEventListener('click', () => {
            const lastPeriod = lastPeriodInput.value;
            const cycleLength = cycleLengthSelect.value;
            
            if (!lastPeriod) {
                alert('Please calculate your due date first');
                return;
            }
            
            const info = calculatePregnancyInfo(lastPeriod, cycleLength);
            setDueDateReminder(info.dueDate);
        });
        
        cancelReminderBtn.addEventListener('click', cancelReminder);
        
        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            loadSavedData();
            
            // Set default date to 40 weeks ago
            const defaultDate = new Date();
            defaultDate.setDate(defaultDate.getDate() - (40 * 7));
            const dateString = defaultDate.toISOString().split('T')[0];
            
            if (lastPeriodInput) {
                lastPeriodInput.value = dateString;
            }
            if (isMobile && document.getElementById('mobileLastPeriod')) {
                document.getElementById('mobileLastPeriod').value = dateString;
            }
        });
        
        // Handle notification permission
        if ('Notification' in window) {
            if (Notification.permission === 'default') {
                // Will request when setting reminder
            } else if (Notification.permission === 'granted') {
                reminderStatus.innerHTML += '<br><small>Notifications enabled</small>';
            }
        }
    </script>
</body>
</html>
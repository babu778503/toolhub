<!DOCTYPE html>
<!-- Category: Health -->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Asthma Trigger Monitor - Track and monitor asthma triggers with this easy-to-use health tool. Identify environmental and personal factors that affect your asthma symptoms.">
    <meta name="keywords" content="asthma trigger monitor, asthma tracker, asthma management, respiratory health, asthma symptoms, environmental triggers, personal triggers, health tool">
    <title>Asthma Trigger Monitor</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        /* Desktop Styles */
        header {
            background: linear-gradient(to right, #3498db, #2980b9);
            color: white;
            padding: 0 20px;
            height: 70px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }

        h1 {
            font-size: 28px;
            font-weight: 600;
            text-align: center;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 1px solid #eee;
        }

        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            font-weight: 500;
            color: #6c757d;
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
        }

        .tab.active {
            color: #3498db;
            border-bottom: 3px solid #3498db;
            background: white;
        }

        .tab-content {
            display: none;
            padding: 30px;
        }

        .tab-content.active {
            display: block;
        }

        .input-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        .input-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #2c3e50;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        input, select, textarea {
            width: 100%;
            padding: 14px;
            border: 2px solid #e1e5eb;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .button-group {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        button {
            background: linear-gradient(to right, #3498db, #2980b9);
            color: white;
            border: none;
            padding: 14px 25px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            flex: 1;
            min-width: 150px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .reset-btn {
            background: linear-gradient(to right, #e74c3c, #c0392b);
        }

        .reset-btn:hover {
            box-shadow: 0 5px 15px rgba(231, 76, 60, 0.3);
        }

        .export-btn {
            background: linear-gradient(to right, #27ae60, #219653);
        }

        .export-btn:hover {
            box-shadow: 0 5px 15px rgba(39, 174, 96, 0.3);
        }

        .trigger-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        .trigger-card {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s;
            border-top: 4px solid #3498db;
        }

        .trigger-card:hover {
            transform: translateY(-5px);
        }

        .trigger-card.environmental {
            border-top-color: #27ae60;
        }

        .trigger-card.allergen {
            border-top-color: #f39c12;
        }

        .trigger-card.physical {
            border-top-color: #9b59b6;
        }

        .trigger-card.emotional {
            border-top-color: #e74c3c;
        }

        .trigger-card h3 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 18px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .trigger-value {
            font-size: 28px;
            font-weight: 700;
            color: #3498db;
            margin: 10px 0;
        }

        .trigger-status {
            font-size: 16px;
            font-weight: 600;
            padding: 6px 12px;
            border-radius: 20px;
            display: inline-block;
            margin-top: 8px;
        }

        .low { background-color: #d4edda; color: #155724; }
        .moderate { background-color: #fff3cd; color: #856404; }
        .high { background-color: #ffeaa7; color: #856404; }
        .very-high { background-color: #f8d7da; color: #721c24; }
        .extreme { background-color: #e74c3c; color: white; }

        .interpretation {
            background: #e3f2fd;
            border-left: 4px solid #3498db;
            padding: 20px;
            border-radius: 0 8px 8px 0;
            margin: 25px 0;
            text-align: left;
        }

        .interpretation h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .interpretation ul {
            padding-left: 20px;
        }

        .interpretation li {
            margin-bottom: 10px;
            color: #2980b9;
        }

        .chart-container {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 25px;
            margin: 25px 0;
        }

        .chart-title {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .chart-bars {
            display: flex;
            justify-content: space-around;
            align-items: flex-end;
            height: 200px;
            padding: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .chart-bar {
            width: 50px;
            background: linear-gradient(to top, #3498db, #2980b9);
            border-radius: 5px 5px 0 0;
            position: relative;
            transition: height 1s ease-in-out;
        }

        .chart-bar.environmental-bar {
            background: linear-gradient(to top, #27ae60, #219653);
        }

        .chart-bar.allergen-bar {
            background: linear-gradient(to top, #f39c12, #e67e22);
        }

        .chart-bar.physical-bar {
            background: linear-gradient(to top, #9b59b6, #8e44ad);
        }

        .chart-bar.emotional-bar {
            background: linear-gradient(to top, #e74c3c, #c0392b);
        }

        .chart-label {
            text-align: center;
            margin-top: 10px;
            font-weight: 500;
            color: #2c3e50;
        }

        .chart-value {
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-weight: bold;
            color: #2c3e50;
        }

        .data-actions {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .data-actions button {
            flex: 1;
            min-width: 150px;
        }

        .clear-btn {
            background: linear-gradient(to right, #e74c3c, #c0392b);
        }

        .clear-btn:hover {
            box-shadow: 0 5px 15px rgba(231, 76, 60, 0.3);
        }

        .health-tip {
            background: linear-gradient(135deg, #e3f2fd, #d1ecf1);
            border-radius: 8px;
            padding: 20px;
            margin-top: 25px;
            font-size: 15px;
            color: #2c3e50;
            border-left: 4px solid #3498db;
        }

        .health-tip h3 {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
            color: #2c3e50;
        }

        .history-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: white;
            border-radius: 15px;
            width: 90%;
            max-width: 700px;
            max-height: 80vh;
            overflow-y: auto;
            padding: 25px;
            position: relative;
        }

        .close-modal {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 24px;
            cursor: pointer;
            color: #777;
        }

        .history-title {
            text-align: center;
            margin-bottom: 20px;
            color: #2c3e50;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .history-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .history-item {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            border-left: 4px solid #3498db;
        }

        .history-item-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-weight: 600;
            color: #2c3e50;
        }

        .history-item-values {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
        }

        .history-value {
            text-align: center;
            font-size: 14px;
        }

        .history-value-label {
            font-weight: 500;
            color: #777;
        }

        .history-value-data {
            font-weight: 600;
            color: #3498db;
        }

        .delete-history {
            background: #e74c3c;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            margin-top: 10px;
        }

        .no-history {
            text-align: center;
            color: #777;
            font-style: italic;
            padding: 20px;
        }

        .risk-indicator {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-top: 15px;
            padding: 15px;
            border-radius: 8px;
            background: #fff3cd;
        }

        .risk-icon {
            font-size: 24px;
            color: #856404;
        }

        .risk-text {
            font-weight: 500;
            color: #856404;
        }

        .recommendations {
            background: #fce4ec;
            border-radius: 8px;
            padding: 20px;
            margin-top: 25px;
            border-left: 4px solid #e74c3c;
        }

        .recommendations h3 {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            color: #2c3e50;
        }

        .recommendation-list {
            padding-left: 20px;
        }

        .recommendation-list li {
            margin-bottom: 10px;
            color: #c0392b;
        }

        .progress-tracker {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 25px;
            margin: 25px 0;
        }

        .progress-title {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .progress-charts {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .progress-chart {
            background: white;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .progress-chart h4 {
            text-align: center;
            margin-bottom: 15px;
            color: #2c3e50;
        }

        .progress-line {
            height: 30px;
            background: #e9ecef;
            border-radius: 15px;
            overflow: hidden;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, #3498db, #2980b9);
            border-radius: 15px;
            transition: width 1s ease-in-out;
        }

        .progress-target {
            position: absolute;
            top: 0;
            height: 100%;
            width: 2px;
            background: #27ae60;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            font-size: 14px;
            color: #6c757d;
        }

        /* Mobile Styles */
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            header {
                height: 50px;
                padding: 0 15px;
                margin-bottom: 20px;
                justify-content: center;
            }

            h1 {
                font-size: 18px;
                gap: 8px;
            }

            .tab-content {
                padding: 20px;
            }

            .input-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            input, select, textarea {
                padding: 12px;
                font-size: 16px;
            }

            .button-group {
                flex-direction: column;
                gap: 10px;
            }

            button {
                padding: 12px 20px;
                font-size: 14px;
                min-width: auto;
            }

            .trigger-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .trigger-value {
                font-size: 24px;
            }

            .chart-bars {
                flex-direction: column;
                height: auto;
                gap: 20px;
                padding: 20px;
            }

            .chart-bar {
                width: 100%;
                height: 40px !important;
                border-radius: 0 5px 5px 0;
            }

            .chart-value {
                top: 50%;
                left: auto;
                right: -50px;
                transform: translateY(-50%);
            }

            .data-actions {
                flex-direction: column;
            }

            .modal-content {
                width: 95%;
                padding: 20px 15px;
            }

            .history-item-values {
                grid-template-columns: 1fr 1fr;
            }

            .tabs {
                flex-wrap: wrap;
            }

            .tab {
                min-width: 50%;
            }

            .progress-charts {
                grid-template-columns: 1fr;
            }
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 8px;
            color: white;
            font-weight: 500;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 1001;
            transform: translateX(200%);
            transition: transform 0.3s ease-in-out;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
            background: linear-gradient(to right, #27ae60, #219653);
        }

        .notification.error {
            background: linear-gradient(to right, #e74c3c, #c0392b);
        }

        .notification.info {
            background: linear-gradient(to right, #3498db, #2980b9);
        }

        .trigger-list {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 15px 0;
        }

        .trigger-tag {
            background: #e3f2fd;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .trigger-tag.environmental { background: #d4edda; }
        .trigger-tag.allergen { background: #fff3cd; }
        .trigger-tag.physical { background: #e8daef; }
        .trigger-tag.emotional { background: #fce4ec; }

        .symptom-tracker {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }

        .symptom-tracker h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .symptom-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
        }

        .symptom-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .symptom-item input[type="checkbox"] {
            width: auto;
            margin: 0;
        }

        .symptom-item label {
            margin: 0;
            font-weight: normal;
        }

        .severity-slider {
            width: 100%;
            margin: 15px 0;
        }

        .severity-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-weight: 500;
            color: #2c3e50;
        }

        .slider-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .slider-value {
            min-width: 40px;
            text-align: center;
            font-weight: 600;
            color: #3498db;
        }

        input[type="range"] {
            flex: 1;
            height: 8px;
            -webkit-appearance: none;
            background: #e1e5eb;
            border-radius: 4px;
            outline: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            background: #3498db;
            border-radius: 50%;
            cursor: pointer;
        }

        .peak-flow {
            display: flex;
            align-items: center;
            gap: 15px;
            background: #e3f2fd;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .peak-flow-icon {
            font-size: 32px;
            color: #3498db;
        }

        .peak-flow-details {
            flex: 1;
        }

        .peak-flow-details h4 {
            margin-bottom: 5px;
            color: #2c3e50;
        }

        .peak-flow-details p {
            color: #6c757d;
            margin: 0;
        }
    </style>
</head>
<body>
    <header>
        <h1><i class="fas fa-lungs"></i> Asthma Trigger Monitor</h1>
    </header>

    <div class="container">
        <div class="tabs">
            <div class="tab active" data-tab="monitor">Monitor</div>
            <div class="tab" data-tab="history">History</div>
            <div class="tab" data-tab="progress">Progress</div>
            <div class="tab" data-tab="resources">Resources</div>
        </div>

        <div class="tab-content active" id="monitor-tab">
            <div class="input-grid">
                <div class="input-group">
                    <label for="date"><i class="fas fa-calendar"></i> Date & Time</label>
                    <input type="datetime-local" id="date">
                </div>
                
                <div class="input-group">
                    <label for="location"><i class="fas fa-map-marker-alt"></i> Location</label>
                    <input type="text" id="location" placeholder="Enter city or area">
                </div>
                
                <div class="input-group">
                    <label for="peak-flow"><i class="fas fa-chart-line"></i> Peak Flow Reading (L/min)</label>
                    <input type="number" id="peak-flow" placeholder="Enter peak flow">
                </div>
                
                <div class="input-group">
                    <label for="medication"><i class="fas fa-pills"></i> Rescue Medication Used?</label>
                    <select id="medication">
                        <option value="">Select</option>
                        <option value="yes">Yes</option>
                        <option value="no">No</option>
                    </select>
                </div>
            </div>
            
            <div class="symptom-tracker">
                <h3><i class="fas fa-heartbeat"></i> Symptoms Today</h3>
                <div class="symptom-grid">
                    <div class="symptom-item">
                        <input type="checkbox" id="wheezing">
                        <label for="wheezing">Wheezing</label>
                    </div>
                    <div class="symptom-item">
                        <input type="checkbox" id="shortness">
                        <label for="shortness">Shortness of Breath</label>
                    </div>
                    <div class="symptom-item">
                        <input type="checkbox" id="cough">
                        <label for="cough">Coughing</label>
                    </div>
                    <div class="symptom-item">
                        <input type="checkbox" id="chest">
                        <label for="chest">Chest Tightness</label>
                    </div>
                </div>
                
                <div class="severity-slider">
                    <div class="severity-label">
                        <span>Overall Symptom Severity:</span>
                        <span class="slider-value" id="severity-value">5</span>
                    </div>
                    <div class="slider-container">
                        <input type="range" id="severity" min="1" max="10" value="5">
                    </div>
                </div>
            </div>

            <div class="peak-flow">
                <div class="peak-flow-icon">
                    <i class="fas fa-wind"></i>
                </div>
                <div class="peak-flow-details">
                    <h4>Peak Flow Monitoring</h4>
                    <p>Track your peak flow readings to identify patterns and triggers. Normal range varies by age and gender.</p>
                </div>
            </div>

            <div class="input-grid">
                <div class="input-group">
                    <label for="environmental"><i class="fas fa-cloud-sun"></i> Environmental Triggers</label>
                    <select id="environmental" multiple>
                        <option value="pollution">Air Pollution</option>
                        <option value="smoke">Smoke</option>
                        <option value="weather">Weather Changes</option>
                        <option value="humidity">High Humidity</option>
                        <option value="cold">Cold Air</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label for="allergens"><i class="fas fa-seedling"></i> Allergen Triggers</label>
                    <select id="allergens" multiple>
                        <option value="pollen">Pollen</option>
                        <option value="dust">Dust Mites</option>
                        <option value="mold">Mold</option>
                        <option value="pet">Pet Dander</option>
                        <option value="cockroach">Cockroach</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label for="physical"><i class="fas fa-running"></i> Physical Triggers</label>
                    <select id="physical" multiple>
                        <option value="exercise">Exercise</option>
                        <option value="laughing">Laughing/Hyperventilating</option>
                        <option value="stress">Stress/Anxiety</option>
                        <option value="colds">Colds/Infections</option>
                        <option value="chemicals">Chemical Irritants</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label for="notes"><i class="fas fa-sticky-note"></i> Additional Notes</label>
                    <textarea id="notes" rows="3" placeholder="Any additional triggers or observations"></textarea>
                </div>
            </div>
            
            <div class="button-group">
                <button id="track-btn"><i class="fas fa-search"></i> Track Triggers</button>
                <button id="reset-btn" class="reset-btn"><i class="fas fa-redo"></i> Reset</button>
                <button id="export-btn" class="export-btn"><i class="fas fa-file-export"></i> Export Results</button>
            </div>

            <div class="trigger-grid">
                <div class="trigger-card environmental">
                    <h3><i class="fas fa-cloud-sun"></i> Environmental</h3>
                    <div class="trigger-value" id="environmental-count">--</div>
                    <div class="trigger-status" id="environmental-status">--</div>
                </div>
                
                <div class="trigger-card allergen">
                    <h3><i class="fas fa-seedling"></i> Allergen</h3>
                    <div class="trigger-value" id="allergen-count">--</div>
                    <div class="trigger-status" id="allergen-status">--</div>
                </div>
                
                <div class="trigger-card physical">
                    <h3><i class="fas fa-running"></i> Physical</h3>
                    <div class="trigger-value" id="physical-count">--</div>
                    <div class="trigger-status" id="physical-status">--</div>
                </div>
                
                <div class="trigger-card emotional">
                    <h3><i class="fas fa-heart"></i> Emotional</h3>
                    <div class="trigger-value" id="emotional-count">--</div>
                    <div class="trigger-status" id="emotional-status">--</div>
                </div>
            </div>

            <div class="chart-container">
                <h3 class="chart-title"><i class="fas fa-chart-bar"></i> Trigger Categories</h3>
                <div class="chart-bars">
                    <div class="chart-bar environmental-bar" id="environmental-bar" style="height: 0px;">
                        <div class="chart-value" id="environmental-bar-value">0</div>
                        <div class="chart-label">Environmental</div>
                    </div>
                    <div class="chart-bar allergen-bar" id="allergen-bar" style="height: 0px;">
                        <div class="chart-value" id="allergen-bar-value">0</div>
                        <div class="chart-label">Allergen</div>
                    </div>
                    <div class="chart-bar physical-bar" id="physical-bar" style="height: 0px;">
                        <div class="chart-value" id="physical-bar-value">0</div>
                        <div class="chart-label">Physical</div>
                    </div>
                    <div class="chart-bar emotional-bar" id="emotional-bar" style="height: 0px;">
                        <div class="chart-value" id="emotional-bar-value">0</div>
                        <div class="chart-label">Emotional</div>
                    </div>
                </div>
            </div>

            <div class="interpretation">
                <h3><i class="fas fa-info-circle"></i> Trigger Severity Levels</h3>
                <ul>
                    <li><strong>Low (1-2):</strong> Minimal impact on asthma symptoms</li>
                    <li><strong>Moderate (3-4):</strong> Some impact, monitor closely</li>
                    <li><strong>High (5-6):</strong> Significant impact, take preventive measures</li>
                    <li><strong>Very High (7-8):</strong> Major impact, increased risk of attack</li>
                    <li><strong>Extreme (9-10):</strong> Severe impact, immediate action needed</li>
                </ul>
            </div>

            <div id="risk-indicator" class="risk-indicator" style="display: none;">
                <i class="fas fa-exclamation-triangle risk-icon"></i>
                <div class="risk-text" id="risk-text">Your asthma trigger risk will be calculated based on current conditions</div>
            </div>

            <div class="recommendations">
                <h3><i class="fas fa-lightbulb"></i> Personalized Recommendations</h3>
                <ul class="recommendation-list" id="recommendations-list">
                    <li>Identify and avoid your personal asthma triggers</li>
                    <li>Monitor peak flow readings regularly</li>
                    <li>Keep rescue inhaler accessible at all times</li>
                </ul>
            </div>

            <div class="data-actions">
                <button id="save-btn"><i class="fas fa-save"></i> Save Current Tracking</button>
                <button id="clear-btn" class="clear-btn"><i class="fas fa-trash-alt"></i> Clear All Data</button>
            </div>

            <div class="health-tip">
                <h3><i class="fas fa-lightbulb"></i> Respiratory Health Tip</h3>
                <p>Keep a daily asthma diary to identify patterns and triggers. Track symptoms, peak flow readings, medication use, and potential triggers. This information is invaluable for managing your asthma and working with your healthcare provider to adjust your treatment plan.</p>
            </div>
        </div>

        <div class="tab-content" id="history-tab">
            <h2 style="text-align: center; margin-bottom: 20px; color: #2c3e50;"><i class="fas fa-history"></i> Trigger History</h2>
            <div class="history-list" id="history-list">
                <div class="no-history">No history available. Save your trigger tracking to see them here.</div>
            </div>
            <div class="button-group" style="margin-top: 20px;">
                <button id="export-history" class="export-btn"><i class="fas fa-file-export"></i> Export History</button>
                <button id="clear-history" class="clear-btn"><i class="fas fa-trash-alt"></i> Clear History</button>
            </div>
        </div>

        <div class="tab-content" id="progress-tab">
            <h2 style="text-align: center; margin-bottom: 20px; color: #2c3e50;"><i class="fas fa-chart-line"></i> Asthma Management Progress</h2>
            <div class="progress-tracker">
                <h3 class="progress-title"><i class="fas fa-tasks"></i> Your Trigger Pattern Analysis</h3>
                <div class="progress-charts" id="progress-charts">
                    <div class="no-history">No progress data available. Save your trigger tracking to analyze patterns.</div>
                </div>
            </div>
        </div>

        <div class="tab-content" id="resources-tab">
            <h2 style="text-align: center; margin-bottom: 20px; color: #2c3e50;"><i class="fas fa-book"></i> Asthma Resources</h2>
            
            <div class="interpretation">
                <h3><i class="fas fa-info-circle"></i> Common Asthma Triggers</h3>
                <p><strong>Environmental:</strong> Air pollution, smoke, strong odors, weather changes, cold air</p>
                <p><strong>Allergens:</strong> Pollen, dust mites, mold, pet dander, cockroach droppings</p>
                <p><strong>Physical:</strong> Exercise, respiratory infections, stress, laughing, chemical irritants</p>
                <p><strong>Other:</strong> Certain medications, food additives, gastroesophageal reflux</p>
            </div>
            
            <div class="health-tip">
                <h3><i class="fas fa-home"></i> Indoor Air Quality Management</h3>
                <ul>
                    <li>Use HEPA air purifiers in bedrooms and living areas</li>
                    <li>Keep indoor humidity between 30-50% to prevent mold growth</li>
                    <li>Vacuum regularly with a HEPA filter</li>
                    <li>Wash bedding weekly in hot water (130Â°F or higher)</li>
                    <li>Use allergen-proof covers for pillows and mattresses</li>
                    <li>Avoid smoking indoors and using strong cleaning products</li>
                </ul>
            </div>
            
            <div class="recommendations">
                <h3><i class="fas fa-running"></i> Exercise with Asthma</h3>
                <ul class="recommendation-list">
                    <li>Warm up gradually before exercise</li>
                    <li>Use pre-exercise inhaler as prescribed</li>
                    <li>Breathe through your nose when possible</li>
                    <li>Avoid exercising in cold, dry air</li>
                    <li>Choose activities that allow rest periods</li>
                    <li>Stop and use rescue inhaler if symptoms occur</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Notification -->
    <div class="notification" id="notification"></div>

    <script>
        // DOM Elements
        const tabs = document.querySelectorAll('.tab');
        const tabContents = document.querySelectorAll('.tab-content');
        const dateInput = document.getElementById('date');
        const locationInput = document.getElementById('location');
        const peakFlowInput = document.getElementById('peak-flow');
        const medicationSelect = document.getElementById('medication');
        const wheezingCheckbox = document.getElementById('wheezing');
        const shortnessCheckbox = document.getElementById('shortness');
        const coughCheckbox = document.getElementById('cough');
        const chestCheckbox = document.getElementById('chest');
        const severitySlider = document.getElementById('severity');
        const severityValue = document.getElementById('severity-value');
        const environmentalSelect = document.getElementById('environmental');
        const allergensSelect = document.getElementById('allergens');
        const physicalSelect = document.getElementById('physical');
        const notesInput = document.getElementById('notes');
        const trackBtn = document.getElementById('track-btn');
        const resetBtn = document.getElementById('reset-btn');
        const exportBtn = document.getElementById('export-btn');
        const environmentalCount = document.getElementById('environmental-count');
        const allergenCount = document.getElementById('allergen-count');
        const physicalCount = document.getElementById('physical-count');
        const emotionalCount = document.getElementById('emotional-count');
        const environmentalStatus = document.getElementById('environmental-status');
        const allergenStatus = document.getElementById('allergen-status');
        const physicalStatus = document.getElementById('physical-status');
        const emotionalStatus = document.getElementById('emotional-status');
        const saveBtn = document.getElementById('save-btn');
        const clearBtn = document.getElementById('clear-btn');
        const exportHistoryBtn = document.getElementById('export-history');
        const clearHistoryBtn = document.getElementById('clear-history');
        const historyList = document.getElementById('history-list');
        const riskIndicator = document.getElementById('risk-indicator');
        const riskText = document.getElementById('risk-text');
        const recommendationsList = document.getElementById('recommendations-list');
        const notification = document.getElementById('notification');
        const progressCharts = document.getElementById('progress-charts');

        // Chart bars
        const environmentalBar = document.getElementById('environmental-bar');
        const allergenBar = document.getElementById('allergen-bar');
        const physicalBar = document.getElementById('physical-bar');
        const emotionalBar = document.getElementById('emotional-bar');
        const environmentalBarValue = document.getElementById('environmental-bar-value');
        const allergenBarValue = document.getElementById('allergen-bar-value');
        const physicalBarValue = document.getElementById('physical-bar-value');
        const emotionalBarValue = document.getElementById('emotional-bar-value');

        // Set default date to current time
        window.addEventListener('DOMContentLoaded', () => {
            const now = new Date();
            const year = now.getFullYear();
            const month = String(now.getMonth() + 1).padStart(2, '0');
            const day = String(now.getDate()).padStart(2, '0');
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            dateInput.value = `${year}-${month}-${day}T${hours}:${minutes}`;
        });

        // Update severity value display
        severitySlider.addEventListener('input', () => {
            severityValue.textContent = severitySlider.value;
        });

        // Tab switching
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const tabName = tab.getAttribute('data-tab');
                
                // Update active tab
                tabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                
                // Show active content
                tabContents.forEach(content => {
                    content.classList.remove('active');
                    if (content.id === `${tabName}-tab`) {
                        content.classList.add('active');
                        if (tabName === 'history') {
                            loadHistory();
                        } else if (tabName === 'progress') {
                            loadProgressData();
                        }
                    }
                });
            });
        });

        // Load saved data on page load
        window.addEventListener('DOMContentLoaded', () => {
            loadSavedData();
            updateChartBars(0, 0, 0, 0);
        });

        // Track asthma triggers
        trackBtn.addEventListener('click', () => {
            const date = dateInput.value;
            const location = locationInput.value.trim();
            const peakFlow = parseInt(peakFlowInput.value) || 0;
            const medication = medicationSelect.value;
            const environmentalTriggers = Array.from(environmentalSelect.selectedOptions).map(option => option.value);
            const allergenTriggers = Array.from(allergensSelect.selectedOptions).map(option => option.value);
            const physicalTriggers = Array.from(physicalSelect.selectedOptions).map(option => option.value);
            const severity = parseInt(severitySlider.value);
            const notes = notesInput.value.trim();

            // Count triggers in each category
            const environmentalCountValue = environmentalTriggers.length;
            const allergenCountValue = allergenTriggers.length;
            const physicalCountValue = physicalTriggers.length;
            
            // Emotional triggers are inferred from stress/anxiety in physical triggers
            const emotionalCountValue = physicalTriggers.includes('stress') ? 1 : 0;

            // Update results
            environmentalCount.textContent = environmentalCountValue;
            allergenCount.textContent = allergenCountValue;
            physicalCount.textContent = physicalCountValue;
            emotionalCount.textContent = emotionalCountValue;

            // Determine statuses
            updateStatuses(environmentalCountValue, allergenCountValue, physicalCountValue, emotionalCountValue);
            
            // Update chart
            updateChartBars(environmentalCountValue, allergenCountValue, physicalCountValue, emotionalCountValue);
            
            // Calculate risk
            calculateRisk(environmentalCountValue, allergenCountValue, physicalCountValue, emotionalCountValue, severity, peakFlow);
            
            // Generate recommendations
            generateRecommendations(environmentalCountValue, allergenCountValue, physicalCountValue, emotionalCountValue, severity, peakFlow);
            
            showNotification('Asthma triggers tracked successfully!', 'success');
        });

        // Reset form
        resetBtn.addEventListener('click', () => {
            dateInput.value = new Date().toISOString().slice(0, 16);
            locationInput.value = '';
            peakFlowInput.value = '';
            medicationSelect.value = '';
            wheezingCheckbox.checked = false;
            shortnessCheckbox.checked = false;
            coughCheckbox.checked = false;
            chestCheckbox.checked = false;
            severitySlider.value = 5;
            severityValue.textContent = '5';
            environmentalSelect.value = '';
            allergensSelect.value = '';
            physicalSelect.value = '';
            notesInput.value = '';
            environmentalCount.textContent = '--';
            allergenCount.textContent = '--';
            physicalCount.textContent = '--';
            emotionalCount.textContent = '--';
            environmentalStatus.textContent = '--';
            allergenStatus.textContent = '--';
            physicalStatus.textContent = '--';
            emotionalStatus.textContent = '--';
            environmentalStatus.className = 'trigger-status';
            allergenStatus.className = 'trigger-status';
            physicalStatus.className = 'trigger-status';
            emotionalStatus.className = 'trigger-status';
            updateChartBars(0, 0, 0, 0);
            riskIndicator.style.display = 'none';
            recommendationsList.innerHTML = `
                <li>Identify and avoid your personal asthma triggers</li>
                <li>Monitor peak flow readings regularly</li>
                <li>Keep rescue inhaler accessible at all times</li>
            `;
            showNotification('Form reset successfully!', 'info');
        });

        // Save data to localStorage
        saveBtn.addEventListener('click', () => {
            const date = dateInput.value;
            const location = locationInput.value.trim();
            const peakFlow = parseInt(peakFlowInput.value) || 0;
            const medication = medicationSelect.value;
            const environmentalTriggers = Array.from(environmentalSelect.selectedOptions).map(option => option.value);
            const allergenTriggers = Array.from(allergensSelect.selectedOptions).map(option => option.value);
            const physicalTriggers = Array.from(physicalSelect.selectedOptions).map(option => option.value);
            const severity = parseInt(severitySlider.value);
            const notes = notesInput.value.trim();

            const environmentalCountValue = environmentalTriggers.length;
            const allergenCountValue = allergenTriggers.length;
            const physicalCountValue = physicalTriggers.length;
            const emotionalCountValue = physicalTriggers.includes('stress') ? 1 : 0;

            if (environmentalCountValue === 0 && allergenCountValue === 0 && physicalCountValue === 0) {
                showNotification('Please track triggers first', 'error');
                return;
            }

            const data = {
                date: date,
                location: location,
                peakFlow: peakFlow,
                medication: medication,
                symptoms: {
                    wheezing: wheezingCheckbox.checked,
                    shortness: shortnessCheckbox.checked,
                    cough: coughCheckbox.checked,
                    chest: chestCheckbox.checked
                },
                severity: severity,
                environmentalTriggers: environmentalTriggers,
                allergenTriggers: allergenTriggers,
                physicalTriggers: physicalTriggers,
                environmentalCount: environmentalCountValue,
                allergenCount: allergenCountValue,
                physicalCount: physicalCountValue,
                emotionalCount: emotionalCountValue,
                notes: notes,
                timestamp: new Date().toLocaleString()
            };
            
            // Get existing history
            let history = JSON.parse(localStorage.getItem('asthmaHistory')) || [];
            history.push(data);
            
            // Keep only last 50 entries
            if (history.length > 50) {
                history = history.slice(-50);
            }
            
            localStorage.setItem('asthmaHistory', JSON.stringify(history));
            showNotification('Trigger tracking saved successfully!', 'success');
        });

        // Clear all data from localStorage
        clearBtn.addEventListener('click', () => {
            if (confirm('Are you sure you want to clear all saved data? This cannot be undone.')) {
                localStorage.removeItem('asthmaData');
                localStorage.removeItem('asthmaHistory');
                showNotification('All data cleared successfully!', 'info');
            }
        });

        // Export current results
        exportBtn.addEventListener('click', () => {
            const environmentalCountValue = parseInt(environmentalCount.textContent) || 0;
            const allergenCountValue = parseInt(allergenCount.textContent) || 0;
            const physicalCountValue = parseInt(physicalCount.textContent) || 0;
            const emotionalCountValue = parseInt(emotionalCount.textContent) || 0;

            if (environmentalCountValue === 0 && allergenCountValue === 0 && physicalCountValue === 0 && emotionalCountValue === 0) {
                showNotification('Please track triggers first', 'error');
                return;
            }

            const csvContent = `Asthma Trigger Report\nDate: ${new Date().toLocaleString()}\nEnvironmental Triggers: ${environmentalCountValue}\nAllergen Triggers: ${allergenCountValue}\nPhysical Triggers: ${physicalCountValue}\nEmotional Triggers: ${emotionalCountValue}`;
            
            const blob = new Blob([csvContent], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.setAttribute('hidden', '');
            a.setAttribute('href', url);
            a.setAttribute('download', `asthma_triggers_${new Date().toISOString().slice(0,10)}.txt`);
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            
            showNotification('Results exported successfully!', 'success');
        });

        // Export history
        exportHistoryBtn.addEventListener('click', () => {
            const history = JSON.parse(localStorage.getItem('asthmaHistory')) || [];
            
            if (history.length === 0) {
                showNotification('No history to export', 'error');
                return;
            }
            
            let csvContent = 'Date,Location,Peak Flow,Medication Used,Environmental Count,Allergen Count,Physical Count,Emotional Count,Severity,Notes\n';
            history.forEach(entry => {
                csvContent += `"${entry.timestamp}","${entry.location || ''}",${entry.peakFlow || ''},"${entry.medication || ''}",${entry.environmentalCount},${entry.allergenCount},${entry.physicalCount},${entry.emotionalCount},${entry.severity},"${entry.notes || ''}"\n`;
            });
            
            const blob = new Blob([csvContent], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.setAttribute('hidden', '');
            a.setAttribute('href', url);
            a.setAttribute('download', `asthma_history_${new Date().toISOString().slice(0,10)}.csv`);
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            
            showNotification('History exported successfully!', 'success');
        });

        // Clear history
        clearHistoryBtn.addEventListener('click', () => {
            if (confirm('Are you sure you want to clear all history? This cannot be undone.')) {
                localStorage.removeItem('asthmaHistory');
                loadHistory();
                showNotification('History cleared successfully!', 'info');
            }
        });

        // Load saved data from localStorage
        function loadSavedData() {
            const savedData = localStorage.getItem('asthmaData');
            if (savedData) {
                const data = JSON.parse(savedData);
                locationInput.value = data.location || '';
                medicationSelect.value = data.medication || '';
                notesInput.value = data.notes || '';
            }
        }

        // Update status indicators
        function updateStatuses(environmental, allergen, physical, emotional) {
            setStatus(environmentalStatus, environmental);
            setStatus(allergenStatus, allergen);
            setStatus(physicalStatus, physical);
            setStatus(emotionalStatus, emotional);
        }

        function setStatus(element, value) {
            let status, statusClass;
            
            if (value <= 1) {
                status = 'Low';
                statusClass = 'low';
            } else if (value <= 2) {
                status = 'Moderate';
                statusClass = 'moderate';
            } else if (value <= 4) {
                status = 'High';
                statusClass = 'high';
            } else if (value <= 6) {
                status = 'Very High';
                statusClass = 'very-high';
            } else {
                status = 'Extreme';
                statusClass = 'extreme';
            }
            
            element.textContent = status;
            element.className = 'trigger-status ' + statusClass;
        }

        // Update chart bars with animation
        function updateChartBars(environmental, allergen, physical, emotional) {
            // Normalize values for chart display (max 10 for visualization)
            const maxValue = 10;
            const environmentalHeight = Math.min(100, (environmental / maxValue) * 100);
            const allergenHeight = Math.min(100, (allergen / maxValue) * 100);
            const physicalHeight = Math.min(100, (physical / maxValue) * 100);
            const emotionalHeight = Math.min(100, (emotional / maxValue) * 100);
            
            environmentalBar.style.height = `${environmentalHeight}%`;
            allergenBar.style.height = `${allergenHeight}%`;
            physicalBar.style.height = `${physicalHeight}%`;
            emotionalBar.style.height = `${emotionalHeight}%`;
            
            environmentalBarValue.textContent = environmental;
            allergenBarValue.textContent = allergen;
            physicalBarValue.textContent = physical;
            emotionalBarValue.textContent = emotional;
        }

        // Calculate asthma risk
        function calculateRisk(environmental, allergen, physical, emotional, severity, peakFlow) {
            const totalTriggers = environmental + allergen + physical + emotional;
            let riskLevel = '';
            let riskMessage = '';
            let backgroundColor = '#fff3cd';
            let iconColor = '#856404';
            let textColor = '#856404';
            
            if (totalTriggers <= 2 && severity <= 3) {
                riskLevel = 'Low Risk';
                riskMessage = 'Minimal asthma symptoms expected today.';
            } else if (totalTriggers <= 4 && severity <= 5) {
                riskLevel = 'Mild Risk';
                riskMessage = 'Some asthma symptoms may occur. Monitor closely.';
            } else if (totalTriggers <= 6 && severity <= 7) {
                riskLevel = 'Moderate Risk';
                riskMessage = 'Increased risk of asthma symptoms. Take preventive measures.';
            } else if (totalTriggers <= 8 && severity <= 8) {
                riskLevel = 'High Risk';
                riskMessage = 'High risk of asthma symptoms. Limit exposure to triggers.';
                backgroundColor = '#f8d7da';
                iconColor = '#721c24';
                textColor = '#721c24';
            } else {
                riskLevel = 'Extreme Risk';
                riskMessage = 'Very high risk of asthma attack. Avoid triggers and stay alert.';
                backgroundColor = '#e74c3c';
                iconColor = 'white';
                textColor = 'white';
            }
            
            riskText.innerHTML = `<strong>${riskLevel}:</strong> ${riskMessage}`;
            riskIndicator.style.display = 'flex';
            riskIndicator.style.backgroundColor = backgroundColor;
            document.querySelector('.risk-icon').style.color = iconColor;
            riskText.style.color = textColor;
        }

        // Generate personalized recommendations
        function generateRecommendations(environmental, allergen, physical, emotional, severity, peakFlow) {
            const totalTriggers = environmental + allergen + physical + emotional;
            let recommendations = [];
            
            if (totalTriggers > 6 || severity > 7) {
                recommendations.push('Avoid known triggers as much as possible today.');
                recommendations.push('Keep rescue inhaler readily accessible.');
                recommendations.push('Consider postponing strenuous activities.');
                recommendations.push('Contact your healthcare provider if symptoms worsen.');
            } else if (totalTriggers > 3 || severity > 4) {
                recommendations.push('Minimize exposure to identified triggers.');
                recommendations.push('Monitor symptoms closely throughout the day.');
                recommendations.push('Ensure inhaler is easily accessible.');
            } else if (totalTriggers > 0) {
                recommendations.push('Stay aware of your triggers during daily activities.');
                recommendations.push('Continue regular asthma management routine.');
            } else {
                recommendations.push('Low trigger day - enjoy normal activities with usual precautions.');
                recommendations.push('Continue monitoring for any new triggers.');
            }
            
            // Specific recommendations based on trigger types
            if (environmental > 0) {
                recommendations.push('Check air quality index before going outdoors.');
            }
            
            if (allergen > 0) {
                recommendations.push('Keep windows closed and use air purifiers.');
            }
            
            if (physical > 0) {
                recommendations.push('Warm up gradually before physical activity.');
            }
            
            if (emotional > 0) {
                recommendations.push('Practice stress-reduction techniques like deep breathing.');
            }
            
            // Peak flow recommendations
            if (peakFlow > 0 && peakFlow < 300) {
                recommendations.push('Your peak flow is below normal range. Monitor symptoms closely.');
            }
            
            recommendationsList.innerHTML = recommendations.map(rec => `<li>${rec}</li>`).join('');
        }

        // Load history into tab
        function loadHistory() {
            const history = JSON.parse(localStorage.getItem('asthmaHistory')) || [];
            
            if (history.length === 0) {
                historyList.innerHTML = '<div class="no-history">No history available. Save your trigger tracking to see them here.</div>';
                return;
            }
            
            let historyHTML = '';
            history.slice().reverse().forEach((entry, index) => {
                const originalIndex = history.length - 1 - index;
                historyHTML += `
                    <div class="history-item">
                        <div class="history-item-header">
                            <span>${entry.timestamp}</span>
                            <button class="delete-history" data-index="${originalIndex}" style="background: #e74c3c; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer; font-size: 12px;">Delete</button>
                        </div>
                        <div class="history-item-values">
                            <div class="history-value">
                                <div class="history-value-label">Environmental</div>
                                <div class="history-value-data">${entry.environmentalCount}</div>
                            </div>
                            <div class="history-value">
                                <div class="history-value-label">Allergen</div>
                                <div class="history-value-data">${entry.allergenCount}</div>
                            </div>
                            <div class="history-value">
                                <div class="history-value-label">Physical</div>
                                <div class="history-value-data">${entry.physicalCount}</div>
                            </div>
                            <div class="history-value">
                                <div class="history-value-label">Severity</div>
                                <div class="history-value-data">${entry.severity}</div>
                            </div>
                        </div>
                        <div style="margin-top: 10px; font-size: 12px; color: #666;">
                            Location: ${entry.location || 'N/A'} | Peak Flow: ${entry.peakFlow || 'N/A'}
                        </div>
                    </div>
                `;
            });
            
            historyList.innerHTML = historyHTML;
            
            // Add event listeners to delete buttons
            document.querySelectorAll('.delete-history').forEach(button => {
                button.addEventListener('click', function() {
                    const index = parseInt(this.getAttribute('data-index'));
                    deleteHistoryEntry(index);
                });
            });
        }

        // Delete a history entry
        function deleteHistoryEntry(index) {
            let history = JSON.parse(localStorage.getItem('asthmaHistory')) || [];
            history.splice(index, 1);
            localStorage.setItem('asthmaHistory', JSON.stringify(history));
            loadHistory();
            showNotification('History entry deleted!', 'info');
        }

        // Load progress data
        function loadProgressData() {
            const history = JSON.parse(localStorage.getItem('asthmaHistory')) || [];
            
            if (history.length === 0) {
                progressCharts.innerHTML = '<div class="no-history">No progress data available. Save your trigger tracking to analyze patterns.</div>';
                return;
            }
            
            // Calculate averages
            const avgEnvironmental = history.reduce((sum, entry) => sum + entry.environmentalCount, 0) / history.length;
            const avgAllergen = history.reduce((sum, entry) => sum + entry.allergenCount, 0) / history.length;
            const avgPhysical = history.reduce((sum, entry) => sum + entry.physicalCount, 0) / history.length;
            const avgEmotional = history.reduce((sum, entry) => sum + entry.emotionalCount, 0) / history.length;
            const avgSeverity = history.reduce((sum, entry) => sum + entry.severity, 0) / history.length;
            
            // Create progress charts
            let chartsHTML = `
                <div class="progress-chart">
                    <h4>Environmental Triggers Average</h4>
                    <div class="progress-line">
                        <div class="progress-fill" style="width: ${Math.min(100, (avgEnvironmental / 5) * 100)}%"></div>
                        <div class="progress-target" style="left: ${(2 / 5) * 100}%"></div>
                    </div>
                    <div class="progress-info">
                        <span>Average: ${avgEnvironmental.toFixed(1)}</span>
                        <span>Target: Low levels</span>
                    </div>
                </div>
                
                <div class="progress-chart">
                    <h4>Allergen Triggers Average</h4>
                    <div class="progress-line">
                        <div class="progress-fill" style="width: ${Math.min(100, (avgAllergen / 5) * 100)}%"></div>
                        <div class="progress-target" style="left: ${(2 / 5) * 100}%"></div>
                    </div>
                    <div class="progress-info">
                        <span>Average: ${avgAllergen.toFixed(1)}</span>
                        <span>Target: Low levels</span>
                    </div>
                </div>
                
                <div class="progress-chart">
                    <h4>Physical Triggers Average</h4>
                    <div class="progress-line">
                        <div class="progress-fill" style="width: ${Math.min(100, (avgPhysical / 5) * 100)}%"></div>
                        <div class="progress-target" style="left: ${(2 / 5) * 100}%"></div>
                    </div>
                    <div class="progress-info">
                        <span>Average: ${avgPhysical.toFixed(1)}</span>
                        <span>Target: Low levels</span>
                    </div>
                </div>
                
                <div class="progress-chart">
                    <h4>Symptom Severity Average</h4>
                    <div class="progress-line">
                        <div class="progress-fill" style="width: ${Math.min(100, (avgSeverity / 10) * 100)}%"></div>
                        <div class="progress-target" style="left: ${(5 / 10) * 100}%"></div>
                    </div>
                    <div class="progress-info">
                        <span>Average: ${avgSeverity.toFixed(1)}</span>
                        <span>Target: <5</span>
                    </div>
                </div>
            `;
            
            progressCharts.innerHTML = chartsHTML;
        }

        // Show notification
        function showNotification(message, type) {
            notification.textContent = message;
            notification.className = 'notification ' + type;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }
    </script>
</body>
</html>
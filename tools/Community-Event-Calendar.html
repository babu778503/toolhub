<!-- Category: Environment -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Community Event Calendar</title>
    <meta name="description" content="Organize and manage community events to build stronger neighborhoods. Environment-friendly tool for community engagement.">
    <meta name="keywords" content="community event calendar, neighborhood events, community building, environment, sustainable living, event planning, community engagement">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: #333;
            min-height: 100vh;
            padding: 0;
            margin: 0;
        }

        .container {
            width: 100%;
            max-width: 100%;
            margin: 0;
            padding: 0;
        }

        header {
            background-color: #fff;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            padding: 15px 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            height: 50px;
            width: 100%;
        }

        .header-content {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        h1 {
            font-size: 1.5rem;
            color: #2980b9;
            text-align: center;
            font-weight: 600;
            margin: 0;
            padding: 0;
        }

        .calendar-icon {
            font-size: 1.8rem;
            color: #3498db;
        }

        .main-content {
            padding: 20px;
            width: 100%;
            box-sizing: border-box;
            background: transparent;
        }

        .input-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
        }

        .section-title {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: #2980b9;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
        }

        .input-group {
            margin-bottom: 15px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #2980b9;
        }

        .input-group input, .input-group select, .input-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            outline: none;
        }

        .input-group textarea {
            min-height: 100px;
            resize: vertical;
        }

        .date-time-group {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .date-time-group .input-group {
            flex: 1;
            margin-bottom: 0;
        }

        .add-event-btn {
            background: #3498db;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 12px 20px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            margin-top: 10px;
        }

        .add-event-btn:hover {
            background: #2980b9;
        }

        .calendar-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .nav-btn {
            background: #3498db;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 8px 15px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
        }

        .current-month {
            font-size: 1.5rem;
            font-weight: 600;
            color: #2980b9;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
        }

        .calendar-day-header {
            text-align: center;
            font-weight: 600;
            color: #2980b9;
            padding: 10px 0;
        }

        .calendar-day {
            background: #e3f2fd;
            border-radius: 8px;
            min-height: 80px;
            padding: 5px;
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .calendar-day:hover {
            background: #bbdefb;
            transform: translateY(-3px);
            border-color: #3498db;
        }

        .calendar-day-number {
            font-weight: 600;
            color: #2980b9;
        }

        .calendar-day-events {
            font-size: 0.7rem;
            margin-top: 5px;
        }

        .event-dot {
            width: 8px;
            height: 8px;
            background: #3498db;
            border-radius: 50%;
            display: inline-block;
            margin: 2px;
        }

        .event-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
        }

        .event-list {
            list-style: none;
        }

        .event-item {
            background: #e3f2fd;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            animation: fadeIn 0.5s ease;
            border-left: 5px solid #3498db;
            transition: transform 0.2s ease;
        }

        .event-item:hover {
            transform: translateX(5px);
        }

        .event-info {
            flex: 1;
        }

        .event-title {
            font-weight: 600;
            color: #2980b9;
            font-size: 1.1rem;
        }

        .event-details {
            font-size: 0.9rem;
            color: #666;
        }

        .event-actions {
            display: flex;
            gap: 8px;
        }

        .event-btn {
            background: #3498db;
            color: white;
            border: none;
            border-radius: 5px;
            padding: 5px 10px;
            cursor: pointer;
            font-size: 0.8rem;
            transition: background 0.3s ease;
        }

        .event-btn:hover {
            background: #2980b9;
        }

        .history-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
        }

        .history-list {
            list-style: none;
        }

        .history-item {
            background: #e3f2fd;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            animation: fadeIn 0.5s ease;
            border-left: 5px solid #3498db;
            transition: transform 0.2s ease;
        }

        .history-item:hover {
            transform: translateX(5px);
        }

        .history-info {
            flex: 1;
        }

        .history-title {
            font-weight: 600;
            color: #2980b9;
        }

        .history-details {
            font-size: 0.9rem;
            color: #666;
        }

        .history-delete {
            background: #e74c3c;
            color: white;
            border: none;
            border-radius: 5px;
            padding: 5px 10px;
            cursor: pointer;
            font-size: 0.9rem;
        }

        .stats-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .stat-card {
            background: #e3f2fd;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: #2980b9;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #666;
        }

        .progress-container {
            margin-top: 20px;
        }

        .progress-bar {
            height: 10px;
            background: #eee;
            border-radius: 5px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3498db, #2980b9);
            width: 0%;
            transition: width 0.5s ease;
        }

        .progress-text {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            color: #555;
        }

        .tips-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
        }

        .tip-card {
            background: #e3f2fd;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .tip-title {
            font-weight: 600;
            color: #2980b9;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .tip-content {
            color: #666;
            font-size: 0.95rem;
        }

        .tip-steps {
            margin-top: 10px;
            padding-left: 20px;
        }

        .tip-step {
            margin-bottom: 5px;
        }

        .tip-step::before {
            content: "• ";
            color: #2980b9;
            font-weight: bold;
        }

        .clear-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            text-align: center;
        }

        .clear-btn {
            background: #e74c3c;
            color: white;
            border: none;
            border-radius: 12px;
            padding: 12px 25px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            margin-top: 15px;
            transition: all 0.3s ease;
        }

        .clear-btn:hover {
            background: #c0392b;
            transform: scale(1.05);
        }

        .filter-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
        }

        .filter-controls {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .filter-group {
            flex: 1;
            min-width: 200px;
        }

        .filter-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #2980b9;
        }

        .filter-group select {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            outline: none;
        }

        .export-btn {
            background: #27ae60;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 12px 20px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            margin-top: 15px;
        }

        .export-btn:hover {
            background: #219653;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Mobile Styles */
        @media (max-width: 768px) {
            header {
                height: 50px;
                padding: 10px 15px;
            }
            
            h1 {
                font-size: 1.4rem;
                text-align: center;
            }
            
            .header-content {
                gap: 8px;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .date-time-group {
                flex-direction: column;
            }
            
            .calendar-grid {
                grid-template-columns: repeat(7, 1fr);
                font-size: 0.8rem;
            }
            
            .calendar-day {
                min-height: 60px;
                padding: 3px;
            }
            
            .filter-controls {
                flex-direction: column;
            }
            
            .main-content {
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="header-content">
                <div class="calendar-icon">📅</div>
                <h1>Community Event Calendar</h1>
            </div>
        </header>

        <div class="main-content">
            <div class="stats-section">
                <h2 class="section-title">Community Engagement Stats</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="total-events">0</div>
                        <div class="stat-label">Events Scheduled</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="upcoming-events">0</div>
                        <div class="stat-label">Upcoming Events</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="participants">0</div>
                        <div class="stat-label">Participants</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="community-engagement">0%</div>
                        <div class="stat-label">Community Engagement</div>
                    </div>
                </div>
                
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-fill"></div>
                    </div>
                    <div class="progress-text">
                        <span>Engagement: <span id="engagement-percentage">0%</span></span>
                        <span>Progress: <span id="progress-percentage">0%</span></span>
                    </div>
                </div>
            </div>

            <div class="input-section">
                <h2 class="section-title">Add New Event</h2>
                
                <div class="input-group">
                    <label for="event-name">Event Name</label>
                    <input type="text" id="event-name" placeholder="Enter event name">
                </div>
                
                <div class="date-time-group">
                    <div class="input-group">
                        <label for="event-date">Event Date</label>
                        <input type="date" id="event-date">
                    </div>
                    
                    <div class="input-group">
                        <label for="event-time">Event Time</label>
                        <input type="time" id="event-time">
                    </div>
                </div>
                
                <div class="input-group">
                    <label for="event-location">Location</label>
                    <input type="text" id="event-location" placeholder="Enter event location">
                </div>
                
                <div class="input-group">
                    <label for="event-description">Description</label>
                    <textarea id="event-description" placeholder="Enter event description..."></textarea>
                </div>
                
                <div class="input-group">
                    <label for="event-category">Category</label>
                    <select id="event-category">
                        <option value="community">Community Gathering</option>
                        <option value="education">Educational Workshop</option>
                        <option value="environment">Environment Initiative</option>
                        <option value="social">Social Event</option>
                        <option value="volunteer">Volunteer Opportunity</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label for="event-contact">Contact Person</label>
                    <input type="text" id="event-contact" placeholder="Enter contact person name">
                </div>
                
                <button class="add-event-btn" id="add-event-btn">Add Event to Calendar</button>
            </div>

            <div class="filter-section">
                <h2 class="section-title">Filter Events</h2>
                <div class="filter-controls">
                    <div class="filter-group">
                        <label for="filter-category">Category</label>
                        <select id="filter-category">
                            <option value="all">All Categories</option>
                            <option value="community">Community Gathering</option>
                            <option value="education">Educational Workshop</option>
                            <option value="environment">Environment Initiative</option>
                            <option value="social">Social Event</option>
                            <option value="volunteer">Volunteer Opportunity</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label for="filter-month">Month</label>
                        <select id="filter-month">
                            <option value="all">All Months</option>
                            <option value="0">January</option>
                            <option value="1">February</option>
                            <option value="2">March</option>
                            <option value="3">April</option>
                            <option value="4">May</option>
                            <option value="5">June</option>
                            <option value="6">July</option>
                            <option value="7">August</option>
                            <option value="8">September</option>
                            <option value="9">October</option>
                            <option value="10">November</option>
                            <option value="11">December</option>
                        </select>
                    </div>
                </div>
                
                <button class="export-btn" id="export-btn">Export Calendar</button>
            </div>

            <div class="calendar-section">
                <div class="calendar-header">
                    <button class="nav-btn" id="prev-month">←</button>
                    <div class="current-month" id="current-month">June 2023</div>
                    <button class="nav-btn" id="next-month">→</button>
                </div>
                
                <div class="calendar-grid" id="calendar-grid">
                    <!-- Calendar days will be added here -->
                </div>
            </div>

            <div class="event-section">
                <h2 class="section-title">Upcoming Events</h2>
                <ul class="event-list" id="event-list">
                    <!-- Events will be added here -->
                </ul>
            </div>

            <div class="tips-section">
                <h2 class="section-title">Event Planning Tips</h2>
                <div id="tips-list">
                    <!-- Tips will be added here -->
                </div>
            </div>

            <div class="history-section">
                <h2 class="section-title">Event History</h2>
                <ul class="history-list" id="history-list">
                    <!-- History items will be added here -->
                </ul>
            </div>

            <div class="clear-section">
                <h2 class="section-title">Data Management</h2>
                <p>Your events are automatically saved to your device</p>
                <button class="clear-btn" id="clear-btn">Clear History</button>
            </div>
        </div>
    </div>

    <script>
        // Initialize data
        let events = JSON.parse(localStorage.getItem('communityEvents')) || [];
        let currentDate = new Date();
        let currentMonth = currentDate.getMonth();
        let currentYear = currentDate.getFullYear();

        // DOM Elements
        const totalEventsEl = document.getElementById('total-events');
        const upcomingEventsEl = document.getElementById('upcoming-events');
        const participantsEl = document.getElementById('participants');
        const communityEngagementEl = document.getElementById('community-engagement');
        const progressFill = document.getElementById('progress-fill');
        const engagementPercentageEl = document.getElementById('engagement-percentage');
        const progressPercentageEl = document.getElementById('progress-percentage');
        const eventNameInput = document.getElementById('event-name');
        const eventDateInput = document.getElementById('event-date');
        const eventTimeInput = document.getElementById('event-time');
        const eventLocationInput = document.getElementById('event-location');
        const eventDescriptionInput = document.getElementById('event-description');
        const eventCategorySelect = document.getElementById('event-category');
        const eventContactInput = document.getElementById('event-contact');
        const addEventBtn = document.getElementById('add-event-btn');
        const prevMonthBtn = document.getElementById('prev-month');
        const nextMonthBtn = document.getElementById('next-month');
        const currentMonthEl = document.getElementById('current-month');
        const calendarGrid = document.getElementById('calendar-grid');
        const eventList = document.getElementById('event-list');
        const filterCategory = document.getElementById('filter-category');
        const filterMonth = document.getElementById('filter-month');
        const exportBtn = document.getElementById('export-btn');
        const historyList = document.getElementById('history-list');
        const clearBtn = document.getElementById('clear-btn');
        const tipsList = document.getElementById('tips-list');

        // Render tips
        function renderTips() {
            tipsList.innerHTML = '';
            
            const tips = [
                {
                    title: "Plan Ahead",
                    content: "Give your community time to prepare for events.",
                    steps: [
                        "Announce events at least 2 weeks in advance",
                        "Create a simple event description",
                        "Include clear date, time, and location",
                        "Provide contact information for questions"
                    ]
                },
                {
                    title: "Make Events Inclusive",
                    content: "Ensure all community members can participate.",
                    steps: [
                        "Choose accessible venues",
                        "Offer diverse event types",
                        "Consider different time slots for working families",
                        "Provide materials in multiple languages if needed"
                    ]
                },
                {
                    title: "Encourage Participation",
                    content: "Create engaging experiences that bring people together.",
                    steps: [
                        "Include interactive elements",
                        "Provide refreshments when possible",
                        "Create opportunities for networking",
                        "Follow up with participants afterward"
                    ]
                }
            ];
            
            tips.forEach(tip => {
                const tipCard = document.createElement('div');
                tipCard.className = 'tip-card';
                tipCard.innerHTML = `
                    <div class="tip-title">💡 ${tip.title}</div>
                    <div class="tip-content">${tip.content}</div>
                    <div class="tip-steps">
                        ${tip.steps.map(step => `<div class="tip-step">${step}</div>`).join('')}
                    </div>
                `;
                
                tipsList.appendChild(tipCard);
            });
        }

        // Update stats
        function updateStats() {
            const total = events.length;
            totalEventsEl.textContent = total;
            
            // Count upcoming events (within next 30 days)
            const now = new Date();
            const thirtyDaysLater = new Date(now);
            thirtyDaysLater.setDate(thirtyDaysLater.getDate() + 30);
            
            const upcoming = events.filter(event => {
                const eventDate = new Date(event.date);
                return eventDate >= now && eventDate <= thirtyDaysLater;
            }).length;
            
            upcomingEventsEl.textContent = upcoming;
            
            // Estimate participants (simplified)
            const estimatedParticipants = total * 15; // Average 15 participants per event
            participantsEl.textContent = estimatedParticipants;
            
            // Community engagement (estimated)
            const engagement = Math.min(100, Math.round((total / 20) * 100));
            communityEngagementEl.textContent = `${engagement}%`;
            
            // Update progress
            const progressPercentage = Math.min(100, Math.round((total / 30) * 100));
            progressFill.style.width = `${progressPercentage}%`;
            engagementPercentageEl.textContent = `${engagement}%`;
            progressPercentageEl.textContent = `${progressPercentage}%`;
        }

        // Add event
        function addEvent() {
            const name = eventNameInput.value.trim();
            const date = eventDateInput.value;
            const time = eventTimeInput.value;
            const location = eventLocationInput.value.trim();
            const description = eventDescriptionInput.value.trim();
            const category = eventCategorySelect.value;
            const contact = eventContactInput.value.trim();
            
            if (!name || !date || !time || !location) {
                alert('Please fill in all required fields');
                return;
            }
            
            const newEvent = {
                id: Date.now(),
                name: name,
                date: date,
                time: time,
                location: location,
                description: description,
                category: category,
                contact: contact,
                timestamp: new Date().toISOString()
            };
            
            events.push(newEvent);
            localStorage.setItem('communityEvents', JSON.stringify(events));
            
            // Reset form
            eventNameInput.value = '';
            eventDateInput.value = '';
            eventTimeInput.value = '';
            eventLocationInput.value = '';
            eventDescriptionInput.value = '';
            eventCategorySelect.value = 'community';
            eventContactInput.value = '';
            
            renderCalendar();
            renderEvents();
            renderHistory();
            updateStats();
        }

        // Render calendar
        function renderCalendar() {
            calendarGrid.innerHTML = '';
            
            // Set current month display
            const monthNames = ["January", "February", "March", "April", "May", "June",
                              "July", "August", "September", "October", "November", "December"];
            currentMonthEl.textContent = `${monthNames[currentMonth]} ${currentYear}`;
            
            // Create day headers
            const dayHeaders = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            dayHeaders.forEach(day => {
                const header = document.createElement('div');
                header.className = 'calendar-day-header';
                header.textContent = day;
                calendarGrid.appendChild(header);
            });
            
            // Get first day of month and days in month
            const firstDay = new Date(currentYear, currentMonth, 1).getDay();
            const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
            
            // Add empty cells for days before the first day
            for (let i = 0; i < firstDay; i++) {
                const emptyDay = document.createElement('div');
                emptyDay.className = 'calendar-day';
                calendarGrid.appendChild(emptyDay);
            }
            
            // Add cells for each day of the month
            for (let day = 1; day <= daysInMonth; day++) {
                const dayCell = document.createElement('div');
                dayCell.className = 'calendar-day';
                
                const dayNumber = document.createElement('div');
                dayNumber.className = 'calendar-day-number';
                dayNumber.textContent = day;
                
                dayCell.appendChild(dayNumber);
                
                // Check for events on this day
                const dateString = `${currentYear}-${String(currentMonth + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                const dayEvents = events.filter(event => event.date === dateString);
                
                if (dayEvents.length > 0) {
                    const eventsDiv = document.createElement('div');
                    eventsDiv.className = 'calendar-day-events';
                    
                    // Show dots for events (limit to 3)
                    const eventCount = Math.min(dayEvents.length, 3);
                    for (let i = 0; i < eventCount; i++) {
                        const dot = document.createElement('div');
                        dot.className = 'event-dot';
                        eventsDiv.appendChild(dot);
                    }
                    
                    dayCell.appendChild(eventsDiv);
                }
                
                calendarGrid.appendChild(dayCell);
            }
        }

        // Render events with filtering
        function renderEvents() {
            eventList.innerHTML = '';
            
            if (events.length === 0) {
                eventList.innerHTML = '<li class="event-item">No events scheduled. Add your first event to get started.</li>';
                return;
            }
            
            // Apply filters
            const categoryFilter = filterCategory.value;
            const monthFilter = filterMonth.value;
            
            let filteredEvents = [...events];
            
            if (categoryFilter !== 'all') {
                filteredEvents = filteredEvents.filter(event => event.category === categoryFilter);
            }
            
            if (monthFilter !== 'all') {
                filteredEvents = filteredEvents.filter(event => {
                    const eventDate = new Date(event.date);
                    return eventDate.getMonth() == monthFilter;
                });
            }
            
            if (filteredEvents.length === 0) {
                eventList.innerHTML = '<li class="event-item">No events match the current filters.</li>';
                return;
            }
            
            // Sort events by date
            const sortedEvents = [...filteredEvents].sort((a, b) => new Date(a.date) - new Date(b.date));
            
            // Show only upcoming events
            const now = new Date();
            const upcomingEvents = sortedEvents.filter(event => new Date(event.date) >= now);
            
            if (upcomingEvents.length === 0) {
                eventList.innerHTML = '<li class="event-item">No upcoming events match the current filters.</li>';
                return;
            }
            
            upcomingEvents.forEach(event => {
                const li = document.createElement('li');
                li.className = 'event-item';
                
                const eventDate = new Date(event.date);
                const formattedDate = eventDate.toLocaleDateString('en-US', {
                    weekday: 'short',
                    month: 'short',
                    day: 'numeric'
                });
                
                const categoryNames = {
                    'community': 'Community Gathering',
                    'education': 'Educational Workshop',
                    'environment': 'Environment Initiative',
                    'social': 'Social Event',
                    'volunteer': 'Volunteer Opportunity'
                };
                
                li.innerHTML = `
                    <div class="event-info">
                        <div class="event-title">${event.name}</div>
                        <div class="event-details">${categoryNames[event.category]} • ${formattedDate} at ${event.time} • ${event.location}</div>
                        ${event.contact ? `<div class="event-details">Contact: ${event.contact}</div>` : ''}
                    </div>
                    <div class="event-actions">
                        <button class="event-btn edit-btn" data-id="${event.id}">Edit</button>
                        <button class="event-btn delete-btn" data-id="${event.id}">Delete</button>
                    </div>
                `;
                
                eventList.appendChild(li);
            });
        }

        // Render history
        function renderHistory() {
            historyList.innerHTML = '';
            
            if (events.length === 0) {
                historyList.innerHTML = '<li class="history-item">No events created yet. Add your first event to see it here.</li>';
                return;
            }
            
            // Sort by most recent
            const sortedEvents = [...events].sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
            
            sortedEvents.forEach((event, index) => {
                const li = document.createElement('li');
                li.className = 'history-item';
                
                const eventDate = new Date(event.date);
                const formattedDate = eventDate.toLocaleDateString();
                const formattedTime = new Date(event.timestamp).toLocaleTimeString([], {
                    hour: '2-digit',
                    minute: '2-digit'
                });
                
                const categoryNames = {
                    'community': 'Community Gathering',
                    'education': 'Educational Workshop',
                    'environment': 'Environment Initiative',
                    'social': 'Social Event',
                    'volunteer': 'Volunteer Opportunity'
                };
                
                li.innerHTML = `
                    <div class="history-info">
                        <div class="history-title">${event.name}</div>
                        <div class="history-details">${categoryNames[event.category]} • ${formattedDate} at ${formattedTime}</div>
                    </div>
                    <button class="history-delete" data-id="${event.id}">Delete</button>
                `;
                
                historyList.appendChild(li);
            });
        }

        // Edit event
        function editEvent(id) {
            const event = events.find(e => e.id === id);
            if (event) {
                eventNameInput.value = event.name;
                eventDateInput.value = event.date;
                eventTimeInput.value = event.time;
                eventLocationInput.value = event.location;
                eventDescriptionInput.value = event.description;
                eventCategorySelect.value = event.category;
                eventContactInput.value = event.contact || '';
                
                // Remove from events temporarily
                events = events.filter(e => e.id !== id);
                localStorage.setItem('communityEvents', JSON.stringify(events));
                
                renderCalendar();
                renderEvents();
                renderHistory();
                updateStats();
            }
        }

        // Delete event
        function deleteEvent(id) {
            if (confirm('Are you sure you want to delete this event?')) {
                events = events.filter(e => e.id !== id);
                localStorage.setItem('communityEvents', JSON.stringify(events));
                
                renderCalendar();
                renderEvents();
                renderHistory();
                updateStats();
            }
        }

        // Navigate months
        function navigateMonth(direction) {
            if (direction === 'prev') {
                currentMonth--;
                if (currentMonth < 0) {
                    currentMonth = 11;
                    currentYear--;
                }
            } else {
                currentMonth++;
                if (currentMonth > 11) {
                    currentMonth = 0;
                    currentYear++;
                }
            }
            
            renderCalendar();
        }

        // Export calendar
        function exportCalendar() {
            if (events.length === 0) {
                alert('No events to export');
                return;
            }
            
            // Create CSV content
            let csvContent = "Event Name,Date,Time,Location,Category,Description,Contact\n";
            
            events.forEach(event => {
                const categoryNames = {
                    'community': 'Community Gathering',
                    'education': 'Educational Workshop',
                    'environment': 'Environment Initiative',
                    'social': 'Social Event',
                    'volunteer': 'Volunteer Opportunity'
                };
                
                csvContent += `"${event.name}",${event.date},${event.time},"${event.location}","${categoryNames[event.category]}","${event.description}","${event.contact || ''}"\n`;
            });
            
            // Create download link
            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.setAttribute('href', url);
            link.setAttribute('download', 'community_events.csv');
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        // Clear history
        function clearHistory() {
            if (confirm('Are you sure you want to clear all events? This cannot be undone.')) {
                events = [];
                localStorage.setItem('communityEvents', JSON.stringify(events));
                
                renderCalendar();
                renderEvents();
                renderHistory();
                updateStats();
            }
        }

        // Event Listeners
        addEventBtn.addEventListener('click', addEvent);
        
        prevMonthBtn.addEventListener('click', () => navigateMonth('prev'));
        nextMonthBtn.addEventListener('click', () => navigateMonth('next'));
        
        filterCategory.addEventListener('change', renderEvents);
        filterMonth.addEventListener('change', renderEvents);
        exportBtn.addEventListener('click', exportCalendar);
        
        eventList.addEventListener('click', (e) => {
            if (e.target.classList.contains('edit-btn')) {
                const id = parseInt(e.target.getAttribute('data-id'));
                editEvent(id);
            } else if (e.target.classList.contains('delete-btn')) {
                const id = parseInt(e.target.getAttribute('data-id'));
                deleteEvent(id);
            }
        });
        
        historyList.addEventListener('click', (e) => {
            if (e.target.classList.contains('history-delete')) {
                const id = parseInt(e.target.getAttribute('data-id'));
                deleteEvent(id);
            }
        });
        
        clearBtn.addEventListener('click', clearHistory);

        // Initialize
        renderTips();
        renderCalendar();
        renderEvents();
        renderHistory();
        updateStats();
        
        // Set today's date as default
        const today = new Date();
        eventDateInput.value = today.toISOString().split('T')[0];
        eventTimeInput.value = '18:00';
    </script>
</body>
</html>
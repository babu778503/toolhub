<!DOCTYPE html>
<!-- Category: Health & Wellness -->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Breathing Exercise Timer</title>
    <meta name="description" content="Breathing Exercise Timer - Guided breathing exercises for relaxation, meditation, and stress relief. Customize timing, cycles, and techniques for optimal mindfulness.">
    <meta name="keywords" content="breathing exercise timer, meditation timer, breathing guide, relaxation tool, stress relief, mindfulness timer, breathing technique, calm breathing, anxiety relief">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        /* Desktop Styles */
        header {
            background: rgba(255, 255, 255, 0.95);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #667eea, #764ba2, #667eea);
            background-size: 200% 100%;
            animation: gradientAnimation 3s linear infinite;
        }
        
        @keyframes gradientAnimation {
            0% { background-position: 0% 50%; }
            100% { background-position: 200% 50%; }
        }
        
        h1 {
            color: #333;
            font-size: 2.5rem;
            margin-bottom: 0;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
        }
        
        .tool-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .input-section, .timer-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
            backdrop-filter: blur(10px);
        }
        
        .section-title {
            color: #555;
            font-size: 1.5rem;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #667eea;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            color: #555;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        input, select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s ease;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .range-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .range-container input[type="range"] {
            flex: 1;
        }
        
        .range-value {
            min-width: 60px;
            text-align: center;
            font-weight: 600;
            color: #667eea;
        }
        
        button {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 14px 25px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .secondary-btn {
            background: linear-gradient(45deg, #28a745, #238636);
        }
        
        .danger-btn {
            background: linear-gradient(45deg, #dc3545, #c82333);
        }
        
        .timer-display {
            text-align: center;
            margin: 30px 0;
        }
        
        .timer-circle {
            width: 250px;
            height: 250px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s ease;
        }
        
        .timer-circle::before {
            content: '';
            position: absolute;
            width: 230px;
            height: 230px;
            border-radius: 50%;
            background: white;
        }
        
        .timer-text {
            position: relative;
            font-size: 4rem;
            font-weight: 700;
            color: #667eea;
            z-index: 2;
        }
        
        .phase-text {
            font-size: 1.5rem;
            font-weight: 600;
            color: #555;
            margin-bottom: 20px;
        }
        
        .controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 20px;
        }
        
        .control-btn {
            padding: 12px 25px;
            font-size: 16px;
        }
        
        .presets {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .preset-card {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        
        .preset-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .preset-card.active {
            border-color: #667eea;
            background: #eef2ff;
        }
        
        .preset-name {
            font-weight: 600;
            color: #333;
            margin-bottom: 5px;
        }
        
        .preset-desc {
            font-size: 0.9rem;
            color: #666;
        }
        
        .history-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
            margin-bottom: 30px;
        }
        
        .history-item {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .data-management {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
            text-align: center;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            border-radius: 8px;
            color: white;
            font-weight: 600;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transform: translateX(400px);
            transition: transform 0.3s ease;
            z-index: 1000;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification.success {
            background: linear-gradient(45deg, #28a745, #238636);
        }
        
        .notification.error {
            background: linear-gradient(45deg, #dc3545, #c82333);
        }
        
        .breathing-animation {
            animation: breathe 4s infinite;
        }
        
        @keyframes breathe {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        .inhale-animation {
            animation: inhale 4s infinite;
        }
        
        @keyframes inhale {
            0% { transform: scale(0.8); background: linear-gradient(135deg, #667eea, #764ba2); }
            50% { transform: scale(1.2); background: linear-gradient(135deg, #4facfe, #00f2fe); }
            100% { transform: scale(0.8); background: linear-gradient(135deg, #667eea, #764ba2); }
        }
        
        .hold-animation {
            animation: hold 4s infinite;
        }
        
        @keyframes hold {
            0% { transform: scale(1.2); background: linear-gradient(135deg, #4facfe, #00f2fe); }
            50% { transform: scale(1.2); background: linear-gradient(135deg, #ff9a9e, #fad0c4); }
            100% { transform: scale(1.2); background: linear-gradient(135deg, #4facfe, #00f2fe); }
        }
        
        .exhale-animation {
            animation: exhale 4s infinite;
        }
        
        @keyframes exhale {
            0% { transform: scale(1.2); background: linear-gradient(135deg, #ff9a9e, #fad0c4); }
            50% { transform: scale(0.8); background: linear-gradient(135deg, #a18cd1, #fbc2eb); }
            100% { transform: scale(1.2); background: linear-gradient(135deg, #ff9a9e, #fad0c4); }
        }
        
        /* Mobile Styles */
        @media (max-width: 768px) {
            body {
                padding: 10px;
                align-items: flex-start;
            }
            
            header {
                height: 50px;
                display: flex;
                align-items: center;
                justify-content: center;
                padding: 0 15px;
                margin-bottom: 20px;
            }
            
            h1 {
                font-size: 1.5rem;
                margin: 0;
            }
            
            .tool-grid {
                grid-template-columns: 1fr;
                gap: 20px;
                margin-bottom: 20px;
            }
            
            .input-section, .timer-section, .history-section {
                padding: 20px;
            }
            
            .section-title {
                font-size: 1.3rem;
                margin-bottom: 15px;
            }
            
            .form-group {
                margin-bottom: 15px;
            }
            
            input, select {
                padding: 10px 12px;
                font-size: 14px;
            }
            
            button {
                padding: 12px 20px;
                font-size: 14px;
            }
            
            .timer-circle {
                width: 200px;
                height: 200px;
            }
            
            .timer-circle::before {
                width: 180px;
                height: 180px;
            }
            
            .timer-text {
                font-size: 3rem;
            }
            
            .phase-text {
                font-size: 1.2rem;
            }
            
            .controls {
                flex-direction: column;
                gap: 10px;
            }
            
            .control-btn {
                width: 100%;
            }
            
            .presets {
                grid-template-columns: 1fr 1fr;
                gap: 10px;
            }
            
            .data-management {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-lungs"></i> Breathing Exercise Timer</h1>
        </header>
        
        <div class="tool-grid">
            <div class="input-section">
                <h2 class="section-title"><i class="fas fa-cog"></i> Exercise Settings</h2>
                
                <div class="form-group">
                    <label for="technique"><i class="fas fa-heartbeat"></i> Breathing Technique</label>
                    <select id="technique">
                        <option value="4-7-8">4-7-8 Technique</option>
                        <option value="box">Box Breathing</option>
                        <option value="deep">Deep Breathing</option>
                        <option value="alternate">Alternate Nostril</option>
                        <option value="custom">Custom</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="inhaleTime"><i class="fas fa-arrow-up"></i> Inhale Time (seconds)</label>
                    <div class="range-container">
                        <input type="range" id="inhaleTime" min="1" max="10" value="4">
                        <span class="range-value" id="inhaleValue">4</span>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="holdTime"><i class="fas fa-pause"></i> Hold Time (seconds)</label>
                    <div class="range-container">
                        <input type="range" id="holdTime" min="0" max="15" value="7">
                        <span class="range-value" id="holdValue">7</span>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="exhaleTime"><i class="fas fa-arrow-down"></i> Exhale Time (seconds)</label>
                    <div class="range-container">
                        <input type="range" id="exhaleTime" min="1" max="15" value="8">
                        <span class="range-value" id="exhaleValue">8</span>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="cycles"><i class="fas fa-sync-alt"></i> Number of Cycles</label>
                    <div class="range-container">
                        <input type="range" id="cycles" min="1" max="20" value="5">
                        <span class="range-value" id="cyclesValue">5</span>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="restTime"><i class="fas fa-bed"></i> Rest Between Cycles (seconds)</label>
                    <div class="range-container">
                        <input type="range" id="restTime" min="0" max="30" value="5">
                        <span class="range-value" id="restValue">5</span>
                    </div>
                </div>
                
                <button id="saveSettingsBtn" class="secondary-btn"><i class="fas fa-save"></i> Save Settings</button>
            </div>
            
            <div class="timer-section">
                <h2 class="section-title"><i class="fas fa-clock"></i> Breathing Timer</h2>
                
                <div class="timer-display">
                    <div class="timer-circle" id="timerCircle">
                        <div class="timer-text" id="timerText">4</div>
                    </div>
                    <div class="phase-text" id="phaseText">Ready to Begin</div>
                </div>
                
                <div class="controls">
                    <button id="startBtn" class="control-btn"><i class="fas fa-play"></i> Start</button>
                    <button id="pauseBtn" class="control-btn secondary-btn" style="display: none;"><i class="fas fa-pause"></i> Pause</button>
                    <button id="resetBtn" class="control-btn danger-btn"><i class="fas fa-stop"></i> Reset</button>
                </div>
                
                <div class="presets">
                    <div class="preset-card active" data-preset="calm">
                        <div class="preset-name">Calm</div>
                        <div class="preset-desc">4-7-8</div>
                    </div>
                    <div class="preset-card" data-preset="focus">
                        <div class="preset-name">Focus</div>
                        <div class="preset-desc">4-4-4-4</div>
                    </div>
                    <div class="preset-card" data-preset="relax">
                        <div class="preset-name">Relax</div>
                        <div class="preset-desc">Deep</div>
                    </div>
                    <div class="preset-card" data-preset="energy">
                        <div class="preset-name">Energy</div>
                        <div class="preset-desc">3-3-3</div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="history-section">
            <h2 class="section-title"><i class="fas fa-history"></i> Session History</h2>
            <div id="historyList">
                <p>No sessions recorded yet. Complete your first breathing exercise!</p>
            </div>
        </div>
        
        <div class="data-management">
            <h2 class="section-title"><i class="fas fa-database"></i> Data Management</h2>
            <p>Your breathing exercise data is automatically saved in your browser. Clear all saved data if needed.</p>
            <button class="danger-btn" id="clearDataBtn"><i class="fas fa-trash"></i> Clear All Saved Data</button>
        </div>
    </div>
    
    <div class="notification" id="notification"></div>

    <script>
        // DOM Elements
        const startBtn = document.getElementById('startBtn');
        const pauseBtn = document.getElementById('pauseBtn');
        const resetBtn = document.getElementById('resetBtn');
        const saveSettingsBtn = document.getElementById('saveSettingsBtn');
        const clearDataBtn = document.getElementById('clearDataBtn');
        const presetCards = document.querySelectorAll('.preset-card');
        const notification = document.getElementById('notification');
        const timerCircle = document.getElementById('timerCircle');
        const timerText = document.getElementById('timerText');
        const phaseText = document.getElementById('phaseText');
        
        // Input elements
        const inputs = {
            technique: document.getElementById('technique'),
            inhaleTime: document.getElementById('inhaleTime'),
            holdTime: document.getElementById('holdTime'),
            exhaleTime: document.getElementById('exhaleTime'),
            cycles: document.getElementById('cycles'),
            restTime: document.getElementById('restTime')
        };
        
        // Display elements
        const displayElements = {
            inhaleValue: document.getElementById('inhaleValue'),
            holdValue: document.getElementById('holdValue'),
            exhaleValue: document.getElementById('exhaleValue'),
            cyclesValue: document.getElementById('cyclesValue'),
            restValue: document.getElementById('restValue')
        };
        
        // Timer variables
        let timer = null;
        let currentPhase = 'ready';
        let currentTime = 0;
        let currentCycle = 1;
        let isRunning = false;
        let isPaused = false;
        let totalCycles = 5;
        
        // Show notification
        function showNotification(message, type = 'success') {
            notification.textContent = message;
            notification.className = `notification ${type} show`;
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }
        
        // Load saved data
        function loadSavedData() {
            // Load settings
            const savedSettings = JSON.parse(localStorage.getItem('bet_settings') || '{}');
            
            if (savedSettings.technique) inputs.technique.value = savedSettings.technique;
            if (savedSettings.inhaleTime) inputs.inhaleTime.value = savedSettings.inhaleTime;
            if (savedSettings.holdTime) inputs.holdTime.value = savedSettings.holdTime;
            if (savedSettings.exhaleTime) inputs.exhaleTime.value = savedSettings.exhaleTime;
            if (savedSettings.cycles) inputs.cycles.value = savedSettings.cycles;
            if (savedSettings.restTime) inputs.restTime.value = savedSettings.restTime;
            
            // Update range displays
            updateRangeDisplays();
            
            // Load history
            loadHistory();
        }
        
        // Save settings
        function saveSettings() {
            const settings = {
                technique: inputs.technique.value,
                inhaleTime: parseInt(inputs.inhaleTime.value),
                holdTime: parseInt(inputs.holdTime.value),
                exhaleTime: parseInt(inputs.exhaleTime.value),
                cycles: parseInt(inputs.cycles.value),
                restTime: parseInt(inputs.restTime.value)
            };
            
            localStorage.setItem('bet_settings', JSON.stringify(settings));
            showNotification('Settings saved successfully!');
        }
        
        // Update range displays
        function updateRangeDisplays() {
            displayElements.inhaleValue.textContent = inputs.inhaleTime.value;
            displayElements.holdValue.textContent = inputs.holdTime.value;
            displayElements.exhaleValue.textContent = inputs.exhaleTime.value;
            displayElements.cyclesValue.textContent = inputs.cycles.value;
            displayElements.restValue.textContent = inputs.restTime.value;
        }
        
        // Load history
        function loadHistory() {
            const history = JSON.parse(localStorage.getItem('bet_history') || '[]');
            const historyList = document.getElementById('historyList');
            
            // Clear list
            historyList.innerHTML = '';
            
            if (history.length === 0) {
                historyList.innerHTML = '<p>No sessions recorded yet. Complete your first breathing exercise!</p>';
                return;
            }
            
            // Sort by date (newest first)
            history.sort((a, b) => new Date(b.date) - new Date(a.date));
            
            // Show last 5 sessions
            const recentHistory = history.slice(0, 5);
            
            recentHistory.forEach(session => {
                const historyElement = document.createElement('div');
                historyElement.className = 'history-item';
                historyElement.innerHTML = `
                    <div>
                        <strong>${session.technique}</strong> - ${session.cycles} cycles
                        <br><small>${new Date(session.date).toLocaleString()}</small>
                    </div>
                    <div>${session.duration} min</div>
                `;
                historyList.appendChild(historyElement);
            });
        }
        
        // Add to history
        function addToHistory(technique, cycles, duration) {
            const history = JSON.parse(localStorage.getItem('bet_history') || '[]');
            
            const session = {
                id: Date.now(),
                technique: technique,
                cycles: cycles,
                duration: duration,
                date: new Date().toISOString()
            };
            
            history.push(session);
            localStorage.setItem('bet_history', JSON.stringify(history));
            loadHistory();
        }
        
        // Start timer
        function startTimer() {
            if (isRunning && !isPaused) return;
            
            isRunning = true;
            isPaused = false;
            startBtn.style.display = 'none';
            pauseBtn.style.display = 'flex';
            
            // Set initial values
            totalCycles = parseInt(inputs.cycles.value);
            currentCycle = 1;
            currentPhase = 'inhale';
            currentTime = parseInt(inputs.inhaleTime.value);
            
            // Update display
            updateTimerDisplay();
            updateCircleAnimation();
            
            // Start timer
            timer = setInterval(updateTimer, 1000);
        }
        
        // Pause timer
        function pauseTimer() {
            if (!isRunning) return;
            
            isPaused = !isPaused;
            
            if (isPaused) {
                clearInterval(timer);
                pauseBtn.innerHTML = '<i class="fas fa-play"></i> Resume';
                pauseBtn.className = 'control-btn secondary-btn';
                phaseText.textContent = 'Paused';
            } else {
                timer = setInterval(updateTimer, 1000);
                pauseBtn.innerHTML = '<i class="fas fa-pause"></i> Pause';
                pauseBtn.className = 'control-btn secondary-btn';
                updateTimerDisplay();
            }
        }
        
        // Reset timer
        function resetTimer() {
            clearInterval(timer);
            isRunning = false;
            isPaused = false;
            startBtn.style.display = 'flex';
            pauseBtn.style.display = 'none';
            pauseBtn.innerHTML = '<i class="fas fa-pause"></i> Pause';
            pauseBtn.className = 'control-btn secondary-btn';
            
            // Reset to initial state
            currentPhase = 'ready';
            currentTime = parseInt(inputs.inhaleTime.value);
            currentCycle = 1;
            updateTimerDisplay();
            timerCircle.className = 'timer-circle';
            phaseText.textContent = 'Ready to Begin';
        }
        
        // Update timer
        function updateTimer() {
            if (isPaused) return;
            
            currentTime--;
            
            // Update display
            updateTimerDisplay();
            updateCircleAnimation();
            
            // Check if phase is complete
            if (currentTime <= 0) {
                // Move to next phase
                switch (currentPhase) {
                    case 'inhale':
                        if (parseInt(inputs.holdTime.value) > 0) {
                            currentPhase = 'hold';
                            currentTime = parseInt(inputs.holdTime.value);
                        } else {
                            currentPhase = 'exhale';
                            currentTime = parseInt(inputs.exhaleTime.value);
                        }
                        break;
                    case 'hold':
                        currentPhase = 'exhale';
                        currentTime = parseInt(inputs.exhaleTime.value);
                        break;
                    case 'exhale':
                        if (parseInt(inputs.restTime.value) > 0 && currentCycle < totalCycles) {
                            currentPhase = 'rest';
                            currentTime = parseInt(inputs.restTime.value);
                        } else if (currentCycle < totalCycles) {
                            currentPhase = 'inhale';
                            currentTime = parseInt(inputs.inhaleTime.value);
                            currentCycle++;
                        } else {
                            // Exercise complete
                            completeExercise();
                            return;
                        }
                        break;
                    case 'rest':
                        currentPhase = 'inhale';
                        currentTime = parseInt(inputs.inhaleTime.value);
                        currentCycle++;
                        break;
                }
            }
        }
        
        // Update timer display
        function updateTimerDisplay() {
            timerText.textContent = currentTime;
            
            switch (currentPhase) {
                case 'inhale':
                    phaseText.textContent = 'Inhale';
                    break;
                case 'hold':
                    phaseText.textContent = 'Hold';
                    break;
                case 'exhale':
                    phaseText.textContent = 'Exhale';
                    break;
                case 'rest':
                    phaseText.textContent = 'Rest';
                    break;
                case 'ready':
                    phaseText.textContent = 'Ready to Begin';
                    timerText.textContent = parseInt(inputs.inhaleTime.value);
                    break;
            }
        }
        
        // Update circle animation
        function updateCircleAnimation() {
            timerCircle.className = 'timer-circle';
            
            switch (currentPhase) {
                case 'inhale':
                    timerCircle.classList.add('inhale-animation');
                    break;
                case 'hold':
                    timerCircle.classList.add('hold-animation');
                    break;
                case 'exhale':
                    timerCircle.classList.add('exhale-animation');
                    break;
                case 'rest':
                    timerCircle.style.background = 'linear-gradient(135deg, #a18cd1, #fbc2eb)';
                    break;
                case 'ready':
                    timerCircle.style.background = 'linear-gradient(135deg, #667eea, #764ba2)';
                    break;
            }
        }
        
        // Complete exercise
        function completeExercise() {
            clearInterval(timer);
            isRunning = false;
            startBtn.style.display = 'flex';
            pauseBtn.style.display = 'none';
            
            // Add to history
            const duration = Math.round((parseInt(inputs.inhaleTime.value) + 
                                       parseInt(inputs.holdTime.value) + 
                                       parseInt(inputs.exhaleTime.value) + 
                                       parseInt(inputs.restTime.value)) * 
                                      totalCycles / 60);
            
            addToHistory(inputs.technique.value, totalCycles, duration);
            
            // Show completion message
            timerText.textContent = '✓';
            phaseText.textContent = 'Complete!';
            timerCircle.className = 'timer-circle';
            timerCircle.style.background = 'linear-gradient(135deg, #28a745, #238636)';
            
            showNotification('Breathing exercise completed!');
        }
        
        // Apply preset
        function applyPreset(preset) {
            // Remove active class from all presets
            presetCards.forEach(card => card.classList.remove('active'));
            
            // Add active class to clicked preset
            event.target.closest('.preset-card').classList.add('active');
            
            // Apply preset settings
            switch (preset) {
                case 'calm':
                    inputs.technique.value = '4-7-8';
                    inputs.inhaleTime.value = '4';
                    inputs.holdTime.value = '7';
                    inputs.exhaleTime.value = '8';
                    inputs.cycles.value = '5';
                    inputs.restTime.value = '5';
                    break;
                case 'focus':
                    inputs.technique.value = 'box';
                    inputs.inhaleTime.value = '4';
                    inputs.holdTime.value = '4';
                    inputs.exhaleTime.value = '4';
                    inputs.cycles.value = '8';
                    inputs.restTime.value = '0';
                    break;
                case 'relax':
                    inputs.technique.value = 'deep';
                    inputs.inhaleTime.value = '5';
                    inputs.holdTime.value = '0';
                    inputs.exhaleTime.value = '5';
                    inputs.cycles.value = '10';
                    inputs.restTime.value = '10';
                    break;
                case 'energy':
                    inputs.technique.value = 'custom';
                    inputs.inhaleTime.value = '3';
                    inputs.holdTime.value = '3';
                    inputs.exhaleTime.value = '3';
                    inputs.cycles.value = '15';
                    inputs.restTime.value = '0';
                    break;
            }
            
            updateRangeDisplays();
            resetTimer();
        }
        
        // Clear all saved data
        function clearSavedData() {
            if (confirm('Are you sure you want to clear all saved data? This cannot be undone.')) {
                localStorage.removeItem('bet_settings');
                localStorage.removeItem('bet_history');
                loadSavedData();
                resetTimer();
                showNotification('All data cleared successfully!');
            }
        }
        
        // Event Listeners
        startBtn.addEventListener('click', startTimer);
        pauseBtn.addEventListener('click', pauseTimer);
        resetBtn.addEventListener('click', resetTimer);
        saveSettingsBtn.addEventListener('click', saveSettings);
        clearDataBtn.addEventListener('click', clearSavedData);
        
        // Range input listeners
        inputs.inhaleTime.addEventListener('input', function() {
            displayElements.inhaleValue.textContent = this.value;
            if (currentPhase === 'ready') {
                timerText.textContent = this.value;
            }
        });
        
        inputs.holdTime.addEventListener('input', function() {
            displayElements.holdValue.textContent = this.value;
        });
        
        inputs.exhaleTime.addEventListener('input', function() {
            displayElements.exhaleValue.textContent = this.value;
        });
        
        inputs.cycles.addEventListener('input', function() {
            displayElements.cyclesValue.textContent = this.value;
        });
        
        inputs.restTime.addEventListener('input', function() {
            displayElements.restValue.textContent = this.value;
        });
        
        // Preset card listeners
        presetCards.forEach(card => {
            card.addEventListener('click', function() {
                const preset = this.getAttribute('data-preset');
                applyPreset(preset);
            });
        });
        
        // Technique change listener
        inputs.technique.addEventListener('change', function() {
            const technique = this.value;
            
            switch (technique) {
                case '4-7-8':
                    inputs.inhaleTime.value = '4';
                    inputs.holdTime.value = '7';
                    inputs.exhaleTime.value = '8';
                    break;
                case 'box':
                    inputs.inhaleTime.value = '4';
                    inputs.holdTime.value = '4';
                    inputs.exhaleTime.value = '4';
                    break;
                case 'deep':
                    inputs.inhaleTime.value = '5';
                    inputs.holdTime.value = '0';
                    inputs.exhaleTime.value = '5';
                    break;
            }
            
            updateRangeDisplays();
            if (currentPhase === 'ready') {
                timerText.textContent = inputs.inhaleTime.value;
            }
        });
        
        // Initialize
        loadSavedData();
        updateRangeDisplays();
        
        // Handle page visibility change to pause timer when tab is not active
        document.addEventListener('visibilitychange', () => {
            if (document.hidden && isRunning && !isPaused) {
                pauseTimer();
            }
        });
    </script>
</body>
</html>

<!DOCTYPE html>
<!-- Category: Health & Wellness -->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Breathing Exercise Timer</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #11998e, #38ef7d, #11998e);
            color: #333;
            min-height: 100vh;
            padding: 20px;
        }

        /* Desktop Styles */
        .desktop-view {
            display: block;
            max-width: 1200px;
            margin: 0 auto;
        }

        .mobile-view {
            display: none;
        }

        header {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            text-align: center;
            position: relative;
        }

        h1 {
            color: #11998e;
            margin-bottom: 10px;
            font-size: 2.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        h1 i {
            color: #38ef7d;
        }

        .subtitle {
            color: #38ef7d;
            font-size: 1.2rem;
            margin-bottom: 20px;
        }

        .container {
            display: flex;
            gap: 30px;
            margin-bottom: 30px;
        }

        .input-section {
            flex: 1;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
        }

        .exercises-section {
            flex: 1;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            max-height: 600px;
            overflow-y: auto;
        }

        h2 {
            color: #11998e;
            margin-bottom: 20px;
            border-bottom: 2px solid #38ef7d;
            padding-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #11998e;
        }

        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        input:focus, select:focus, textarea:focus {
            border-color: #11998e;
            outline: none;
            box-shadow: 0 0 0 3px rgba(17, 153, 142, 0.2);
        }

        button {
            background: linear-gradient(to right, #11998e, #38ef7d);
            color: white;
            border: none;
            padding: 14px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 18px;
            font-weight: 600;
            width: 100%;
            transition: transform 0.2s, box-shadow 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .btn-secondary {
            background: linear-gradient(to right, #6c757d, #495057);
            margin-top: 10px;
        }

        .btn-warning {
            background: linear-gradient(to right, #ffc107, #e0a800);
        }

        .btn-danger {
            background: linear-gradient(to right, #dc3545, #bd2130);
        }

        .btn-success {
            background: linear-gradient(to right, #28a745, #218838);
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-top: 25px;
        }

        .stat-card {
            background: linear-gradient(135deg, #11998e, #1a9e8a);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            margin: 10px 0;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .exercise-item {
            background: #f8f9fa;
            border-left: 4px solid #11998e;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 0 8px 8px 0;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s;
        }

        .exercise-item:hover {
            transform: translateX(5px);
        }

        .exercise-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .exercise-time {
            color: #38ef7d;
            font-size: 0.9rem;
        }

        .delete-btn, .edit-btn, .favorite-btn {
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            width: auto;
            transition: background 0.3s;
            margin-left: 5px;
        }

        .delete-btn {
            background: #dc3545;
        }

        .delete-btn:hover {
            background: #bd2130;
        }

        .edit-btn {
            background: #17a2b8;
        }

        .edit-btn:hover {
            background: #138496;
        }

        .favorite-btn {
            background: #ffc107;
        }

        .favorite-btn:hover {
            background: #e0a800;
        }

        .favorite-btn.favorited {
            background: #ff6b6b;
        }

        .empty-exercises {
            text-align: center;
            color: #666;
            font-style: italic;
            padding: 20px;
        }

        .daily-progress {
            height: 20px;
            background: #e0e0e0;
            border-radius: 10px;
            margin-top: 15px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(to right, #28a745, #218838);
            border-radius: 10px;
            transition: width 0.5s;
        }

        .progress-text {
            text-align: center;
            margin-top: 10px;
            font-weight: 600;
        }

        .progress-indicator {
            display: flex;
            justify-content: space-between;
            font-size: 0.8rem;
            color: #666;
            margin-top: 5px;
        }

        .breathing-info {
            background: #e3f2fd;
            border-left: 4px solid #2196F3;
            padding: 15px;
            border-radius: 0 8px 8px 0;
            margin: 20px 0;
        }

        .info-title {
            font-weight: 600;
            margin-bottom: 10px;
            color: #11998e;
        }

        .info-content {
            font-size: 0.9rem;
            line-height: 1.5;
        }

        .chart-container {
            height: 200px;
            margin-top: 20px;
            position: relative;
        }

        .chart-bar {
            position: absolute;
            bottom: 0;
            width: 30px;
            background: linear-gradient(to top, #11998e, #1a9e8a);
            border-radius: 5px 5px 0 0;
            text-align: center;
            color: white;
            font-size: 0.7rem;
            display: flex;
            align-items: flex-end;
            justify-content: center;
            padding: 5px;
        }

        .chart-label {
            position: absolute;
            bottom: -25px;
            width: 30px;
            text-align: center;
            font-size: 0.7rem;
            color: #666;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            border-radius: 15px;
            padding: 30px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            position: relative;
        }

        .close-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.5rem;
            cursor: pointer;
            color: #666;
        }

        .modal h3 {
            color: #11998e;
            margin-bottom: 20px;
            text-align: center;
        }

        .form-row {
            display: flex;
            gap: 15px;
        }

        .form-row .form-group {
            flex: 1;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            border-radius: 8px;
            color: white;
            font-weight: 600;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            z-index: 1001;
            transform: translateX(200%);
            transition: transform 0.3s;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
            background: linear-gradient(to right, #28a745, #218838);
        }

        .notification.warning {
            background: linear-gradient(to right, #ffc107, #e0a800);
        }

        .notification.error {
            background: linear-gradient(to right, #dc3545, #c82333);
        }

        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid #ddd;
        }

        .tab {
            padding: 10px 20px;
            cursor: pointer;
            background: #f0f0f0;
            border: none;
            border-radius: 5px 5px 0 0;
            margin-right: 5px;
        }

        .tab.active {
            background: #11998e;
            color: white;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .export-section {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .export-btn {
            flex: 1;
            padding: 10px;
            font-size: 0.9rem;
        }

        .filter-section {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .filter-btn {
            flex: 1;
            padding: 8px;
            font-size: 0.8rem;
        }

        .active-filter {
            background: #11998e;
            color: white;
        }

        .exercise-description {
            margin: 8px 0;
            font-size: 0.9rem;
            color: #555;
        }

        .exercise-category {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: 600;
            margin-top: 5px;
        }

        .category-relaxation {
            background: #e8f5e9;
            color: #2e7d32;
        }

        .category-mindfulness {
            background: #e3f2fd;
            color: #1565c0;
        }

        .category-stress {
            background: #fff3e0;
            color: #ef6c00;
        }

        .category-focus {
            background: #f3e5f5;
            color: #6a1b9a;
        }

        .breathing-timer {
            text-align: center;
            margin: 30px 0;
        }

        .timer-display {
            font-size: 5rem;
            font-weight: 700;
            color: #11998e;
            margin: 20px 0;
            background: rgba(255, 255, 255, 0.8);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .breathing-circle {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            background: linear-gradient(135deg, #11998e, #38ef7d);
            margin: 20px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            font-weight: 600;
            box-shadow: 0 8px 25px rgba(17, 153, 142, 0.4);
            transition: transform 0.5s ease;
        }

        .breathing-circle.breathe-in {
            transform: scale(1.2);
        }

        .breathing-circle.breathe-out {
            transform: scale(0.8);
        }

        .breathing-instruction {
            font-size: 1.5rem;
            font-weight: 600;
            color: #11998e;
            margin: 20px 0;
            height: 40px;
        }

        .timer-controls {
            display: flex;
            gap: 15px;
            margin: 20px 0;
            justify-content: center;
        }

        .timer-btn {
            padding: 15px 25px;
            font-size: 1.1rem;
        }

        .btn-stop {
            background: linear-gradient(to right, #dc3545, #bd2130);
        }

        .btn-pause {
            background: linear-gradient(to right, #ffc107, #e0a800);
        }

        .preset-exercises {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        .preset-card {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid #e9ecef;
        }

        .preset-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border-color: #11998e;
        }

        .preset-title {
            font-weight: 600;
            color: #11998e;
            margin-bottom: 10px;
        }

        .preset-description {
            font-size: 0.9rem;
            color: #666;
        }

        .session-stats {
            background: #e8f5e9;
            border-left: 4px solid #4caf50;
            padding: 15px;
            border-radius: 0 8px 8px 0;
            margin: 20px 0;
        }

        .session-title {
            font-weight: 600;
            margin-bottom: 10px;
            color: #11998e;
        }

        .session-content {
            display: flex;
            justify-content: space-around;
            text-align: center;
        }

        .session-stat {
            flex: 1;
        }

        .session-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: #11998e;
        }

        .session-label {
            font-size: 0.9rem;
            color: #666;
        }

        .breathing-animation {
            position: relative;
            height: 300px;
            margin: 20px 0;
        }

        .wave {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 100px;
            background: rgba(17, 153, 142, 0.2);
            border-radius: 50%;
            animation: wave 4s infinite ease-in-out;
        }

        @keyframes wave {
            0%, 100% { transform: scaleY(0.5); }
            50% { transform: scaleY(1); }
        }

        .breath-counter {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 2rem;
            font-weight: bold;
            color: #11998e;
        }

        .goal-section {
            background: #fff3e0;
            border-left: 4px solid #ff9800;
            padding: 15px;
            border-radius: 0 8px 8px 0;
            margin: 20px 0;
        }

        .goal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .goal-progress {
            height: 15px;
            background: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }

        .goal-progress-bar {
            height: 100%;
            background: linear-gradient(to right, #4CAF50, #8BC34A);
            border-radius: 10px;
            transition: width 0.5s;
        }

        .goal-info {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            color: #11998e;
        }

        .audio-controls {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 15px 0;
        }

        .volume-control {
            flex: 1;
        }

        .achievement-badge {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 20px;
            background: #ffeb3b;
            color: #333;
            font-size: 0.8rem;
            font-weight: 600;
            margin: 5px;
        }

        /* Mobile Styles */
        @media (max-width: 768px) {
            .desktop-view {
                display: none;
            }

            .mobile-view {
                display: block;
            }

            body {
                padding: 0;
                background: linear-gradient(135deg, #11998e, #38ef7d);
            }

            header {
                height: 50px;
                border-radius: 0;
                padding: 10px;
                margin-bottom: 0;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            h1 {
                font-size: 1.3rem;
                margin: 0;
            }

            h1 i {
                font-size: 1rem;
            }

            .subtitle {
                display: none;
            }

            .container {
                display: block;
                padding: 15px;
                gap: 15px;
            }

            .input-section, .exercises-section {
                border-radius: 10px;
                padding: 15px;
                margin-bottom: 15px;
            }

            .stats {
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
            }

            .stat-card {
                padding: 12px;
            }

            .stat-value {
                font-size: 1.3rem;
                margin: 5px 0;
            }

            .stat-label {
                font-size: 0.7rem;
            }

            h2 {
                font-size: 1.2rem;
                margin-bottom: 15px;
            }

            button {
                padding: 12px;
                font-size: 16px;
            }

            .exercise-item {
                padding: 12px;
            }

            .exercise-header {
                flex-direction: column;
                gap: 5px;
            }

            .form-group {
                margin-bottom: 15px;
            }

            input, select {
                padding: 10px;
                font-size: 14px;
            }

            .daily-progress {
                height: 15px;
            }

            .progress-text {
                font-size: 0.8rem;
            }

            .form-row {
                flex-direction: column;
                gap: 0;
            }

            .modal-content {
                padding: 20px;
                width: 95%;
            }

            .export-section {
                flex-direction: column;
                gap: 5px;
            }

            .filter-section {
                flex-direction: column;
                gap: 5px;
            }

            .exercise-description {
                font-size: 0.8rem;
            }

            .timer-display {
                font-size: 3rem;
                padding: 15px;
            }

            .breathing-circle {
                width: 150px;
                height: 150px;
                font-size: 1.2rem;
            }

            .breathing-instruction {
                font-size: 1.2rem;
                margin: 15px 0;
            }

            .timer-controls {
                flex-direction: column;
                gap: 10px;
            }

            .timer-btn {
                width: 100%;
                padding: 12px;
            }

            .preset-exercises {
                grid-template-columns: 1fr;
                gap: 10px;
            }

            .session-content {
                flex-direction: column;
                gap: 10px;
            }

            .breathing-animation {
                height: 200px;
            }

            .wave {
                height: 70px;
            }

            .breath-counter {
                font-size: 1.5rem;
            }
        }

        @media (max-width: 480px) {
            .stats {
                grid-template-columns: 1fr 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Desktop View -->
    <div class="desktop-view">
        <header>
            <h1><i class="fas fa-lungs"></i> Breathing Exercise Timer</h1>
            <div class="subtitle">Practice mindful breathing for relaxation and stress relief</div>
        </header>

        <div class="container">
            <section class="input-section">
                <div class="tabs">
                    <button class="tab active" data-tab="timer">Breathing Timer</button>
                    <button class="tab" data-tab="presets">Preset Exercises</button>
                    <button class="tab" data-tab="stats">Statistics</button>
                    <button class="tab" data-tab="tips">Breathing Tips</button>
                    <button class="tab" data-tab="goals">Goals</button>
                </div>

                <div class="tab-content active" id="timer-tab">
                    <h2><i class="fas fa-clock"></i> Custom Breathing Timer</h2>
                    <form id="breathing-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="inhale-time">Inhale (seconds)</label>
                                <input type="number" id="inhale-time" min="1" max="20" value="4" required>
                            </div>
                            <div class="form-group">
                                <label for="hold-time">Hold (seconds)</label>
                                <input type="number" id="hold-time" min="0" max="20" value="4">
                            </div>
                            <div class="form-group">
                                <label for="exhale-time">Exhale (seconds)</label>
                                <input type="number" id="exhale-time" min="1" max="20" value="6" required>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="total-time">Total Duration (minutes)</label>
                            <input type="number" id="total-time" min="1" max="30" value="5" required>
                        </div>

                        <div class="form-group">
                            <label for="exercise-name">Exercise Name (Optional)</label>
                            <input type="text" id="exercise-name" placeholder="e.g., Relaxing Breath, Focus Breath">
                        </div>

                        <div class="form-group">
                            <label for="background-sound">Background Sound</label>
                            <select id="background-sound">
                                <option value="none">None</option>
                                <option value="nature">Nature Sounds</option>
                                <option value="ocean">Ocean Waves</option>
                                <option value="rain">Rain</option>
                                <option value="silence">White Noise</option>
                            </select>
                        </div>

                        <button type="submit"><i class="fas fa-play"></i> Start Breathing Exercise</button>
                    </form>

                    <div class="breathing-timer">
                        <div class="breathing-circle" id="breathing-circle">
                            <div>Ready</div>
                        </div>
                        <div class="breathing-instruction" id="breathing-instruction">Prepare to begin</div>
                        <div class="timer-display" id="timer-display">00:00</div>
                        <div class="timer-controls">
                            <button type="button" class="timer-btn" id="start-btn"><i class="fas fa-play"></i> Start</button>
                            <button type="button" class="timer-btn btn-pause" id="pause-btn"><i class="fas fa-pause"></i> Pause</button>
                            <button type="button" class="timer-btn btn-stop" id="stop-btn"><i class="fas fa-stop"></i> Stop</button>
                        </div>
                    </div>

                    <div class="session-stats">
                        <div class="session-title">Current Session</div>
                        <div class="session-content">
                            <div class="session-stat">
                                <div class="session-value" id="cycles-count">0</div>
                                <div class="session-label">Cycles</div>
                            </div>
                            <div class="session-stat">
                                <div class="session-value" id="time-elapsed">0s</div>
                                <div class="session-label">Elapsed</div>
                            </div>
                            <div class="session-stat">
                                <div class="session-value" id="avg-breath">0s</div>
                                <div class="session-label">Avg Breath</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tab-content" id="presets-tab">
                    <h2><i class="fas fa-list"></i> Preset Breathing Exercises</h2>
                    <div class="preset-exercises">
                        <div class="preset-card" data-preset="4-4-4">
                            <div class="preset-title">Box Breathing</div>
                            <div class="preset-description">4s Inhale, 4s Hold, 4s Exhale</div>
                            <div class="preset-description">Great for focus and calm</div>
                        </div>
                        <div class="preset-card" data-preset="4-7-8">
                            <div class="preset-title">4-7-8 Technique</div>
                            <div class="preset-description">4s Inhale, 7s Hold, 8s Exhale</div>
                            <div class="preset-description">Excellent for sleep and relaxation</div>
                        </div>
                        <div class="preset-card" data-preset="6-2-6">
                            <div class="preset-title">Relaxing Breath</div>
                            <div class="preset-description">6s Inhale, 2s Hold, 6s Exhale</div>
                            <div class="preset-description">Perfect for stress relief</div>
                        </div>
                        <div class="preset-card" data-preset="3-0-3">
                            <div class="preset-title">Natural Breath</div>
                            <div class="preset-description">3s Inhale, No Hold, 3s Exhale</div>
                            <div class="preset-description">Good for beginners</div>
                        </div>
                    </div>

                    <div class="breathing-info">
                        <div class="info-title">Quick Start</div>
                        <div class="info-content">
                            <p>Click on any preset to load it into the timer. You can then adjust the duration before starting.</p>
                        </div>
                    </div>
                </div>

                <div class="tab-content" id="stats-tab">
                    <h2><i class="fas fa-chart-bar"></i> Breathing Statistics</h2>
                    <div class="stats">
                        <div class="stat-card">
                            <div class="stat-label">Total Sessions</div>
                            <div class="stat-value" id="total-sessions">0</div>
                            <div class="stat-label">Completed</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Total Time</div>
                            <div class="stat-value" id="total-time-spent">0</div>
                            <div class="stat-label">Minutes</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Avg. Duration</div>
                            <div class="stat-value" id="avg-duration">0</div>
                            <div class="stat-label">Minutes</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Favorite Exercise</div>
                            <div class="stat-value" id="favorite-exercise">-</div>
                            <div class="stat-label">Most Used</div>
                        </div>
                    </div>

                    <div class="stats">
                        <div class="stat-card">
                            <div class="stat-label">This Week</div>
                            <div class="stat-value" id="this-week-sessions">0</div>
                            <div class="stat-label">Sessions</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Longest Session</div>
                            <div class="stat-value" id="longest-session">0</div>
                            <div class="stat-label">Minutes</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Streak</div>
                            <div class="stat-value" id="current-streak">0</div>
                            <div class="stat-label">Days</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Consistency</div>
                            <div class="stat-value" id="consistency-rate">0%</div>
                            <div class="stat-label">Rate</div>
                        </div>
                    </div>

                    <div class="goal-section">
                        <div class="goal-header">
                            <h3>Weekly Goal Progress</h3>
                            <span id="goal-value">7 sessions</span>
                        </div>
                        <div class="goal-progress">
                            <div class="goal-progress-bar" id="goal-progress-bar" style="width: 0%"></div>
                        </div>
                        <div class="goal-info">
                            <span id="goal-current">0 sessions</span>
                            <span id="goal-remaining">7 sessions remaining</span>
                        </div>
                    </div>
                </div>

                <div class="tab-content" id="tips-tab">
                    <h2><i class="fas fa-lightbulb"></i> Breathing Tips</h2>
                    <div class="breathing-info">
                        <div class="info-title">Diaphragmatic Breathing</div>
                        <div class="info-content">Breathe deeply into your belly rather than your chest. Place one hand on your chest and one on your stomach. Only the hand on your stomach should move.</div>
                    </div>
                    <div class="breathing-info">
                        <div class="info-title">Consistent Practice</div>
                        <div class="info-content">Even 5 minutes of daily breathing exercises can significantly reduce stress and improve focus.</div>
                    </div>
                    <div class="breathing-info">
                        <div class="info-title">Find Your Rhythm</div>
                        <div class="info-content">Start with shorter sessions and gradually increase duration as you become more comfortable with the practice.</div>
                    </div>
                    <div class="breathing-info">
                        <div class="info-title">Create a Calm Environment</div>
                        <div class="info-content">Find a quiet, comfortable space where you won't be disturbed. Sit or lie down in a relaxed position.</div>
                    </div>
                    <div class="breathing-info">
                        <div class="info-title">Use Visual Cues</div>
                        <div class="info-content">Focus on the visual guide in our breathing timer to help maintain rhythm and stay present.</div>
                    </div>
                    <div class="breathing-info">
                        <div class="info-title">Listen to Your Body</div>
                        <div class="info-content">If any breathing pattern feels uncomfortable, adjust the timing or stop and try a different technique.</div>
                    </div>

                    <div class="achievement-badge">
                        <i class="fas fa-trophy"></i> First Session Completed
                    </div>
                    <div class="achievement-badge">
                        <i class="fas fa-fire"></i> 3-Day Streak
                    </div>
                    <div class="achievement-badge">
                        <i class="fas fa-clock"></i> 30 Minutes Total
                    </div>
                </div>

                <div class="tab-content" id="goals-tab">
                    <h2><i class="fas fa-bullseye"></i> Set Breathing Goals</h2>
                    <div class="form-group">
                        <label for="weekly-goal">Weekly Sessions Goal</label>
                        <input type="number" id="weekly-goal" min="1" max="21" value="7">
                    </div>
                    <div class="form-group">
                        <label for="daily-minutes">Daily Minutes Goal</label>
                        <input type="number" id="daily-minutes" min="1" max="60" value="10">
                    </div>
                    <button type="button" id="save-goals-btn"><i class="fas fa-save"></i> Save Goals</button>

                    <div class="goal-section">
                        <div class="goal-header">
                            <h3>Current Goals</h3>
                            <span id="current-weekly-goal">7 sessions/week</span>
                        </div>
                        <div class="goal-progress">
                            <div class="goal-progress-bar" id="current-goal-progress" style="width: 0%"></div>
                        </div>
                        <div class="goal-info">
                            <span id="current-goal-current">0 sessions</span>
                            <span id="current-goal-remaining">7 sessions remaining</span>
                        </div>
                    </div>

                    <div class="breathing-info">
                        <div class="info-title">Goal Tracking</div>
                        <div class="info-content">
                            <p>Setting goals helps maintain consistency in your breathing practice. Track your progress and celebrate achievements!</p>
                        </div>
                    </div>
                </div>

                <div class="breathing-info">
                    <div class="info-title">Benefits of Breathing Exercises</div>
                    <div class="info-content">
                        <p><strong>Physical Benefits:</strong> Lower blood pressure, reduced heart rate, improved oxygenation</p>
                        <p><strong>Mental Benefits:</strong> Reduced anxiety, improved focus, better sleep quality</p>
                    </div>
                </div>

                <div class="stats">
                    <div class="stat-card">
                        <div class="stat-label">Today's Sessions</div>
                        <div class="stat-value" id="today-sessions">0</div>
                        <div class="stat-label">Completed</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">This Month</div>
                        <div class="stat-value" id="this-month-sessions">0</div>
                        <div class="stat-label">Sessions</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Avg. Cycles</div>
                        <div class="stat-value" id="avg-cycles">0</div>
                        <div class="stat-label">Per Session</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Progress</div>
                        <div class="stat-value" id="progress-rate">0%</div>
                        <div class="stat-label">Improvement</div>
                    </div>
                </div>

                <div class="daily-progress">
                    <div class="progress-bar" id="daily-progress-bar" style="width: 0%"></div>
                </div>
                <div class="progress-text" id="progress-text">0% of weekly goal completed</div>
                <div class="progress-indicator">
                    <span>0%</span>
                    <span>50%</span>
                    <span>100%</span>
                </div>
            </section>

            <section class="exercises-section">
                <h2><i class="fas fa-history"></i> Exercise History</h2>
                <div class="filter-section">
                    <button class="filter-btn active-filter" data-filter="all">All Sessions</button>
                    <button class="filter-btn" data-filter="this-week">This Week</button>
                    <button class="filter-btn" data-filter="completed">Completed</button>
                    <button class="filter-btn" data-filter="favorites">Favorites</button>
                </div>
                <div class="export-section">
                    <button type="button" class="export-btn btn-warning" id="export-csv-btn"><i class="fas fa-file-csv"></i> Export CSV</button>
                    <button type="button" class="export-btn btn-danger" id="clear-data-btn"><i class="fas fa-trash"></i> Clear Data</button>
                </div>
                <div id="exercises-list">
                    <div class="empty-exercises">No breathing exercises logged yet. Start your first session!</div>
                </div>
            </section>
        </div>
    </div>

    <!-- Mobile View -->
    <div class="mobile-view">
        <header>
            <h1><i class="fas fa-lungs"></i> Breathing Timer</h1>
        </header>

        <div class="container">
            <section class="input-section">
                <div class="tabs">
                    <button class="tab active" data-tab="timer-mobile">Timer</button>
                    <button class="tab" data-tab="presets-mobile">Presets</button>
                    <button class="tab" data-tab="stats-mobile">Stats</button>
                </div>

                <div class="tab-content active" id="timer-mobile-tab">
                    <h2><i class="fas fa-clock"></i> Breathing Timer</h2>
                    <form id="breathing-form-mobile">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="inhale-time-mobile">Inhale (s)</label>
                                <input type="number" id="inhale-time-mobile" min="1" max="20" value="4" required>
                            </div>
                            <div class="form-group">
                                <label for="hold-time-mobile">Hold (s)</label>
                                <input type="number" id="hold-time-mobile" min="0" max="20" value="4">
                            </div>
                            <div class="form-group">
                                <label for="exhale-time-mobile">Exhale (s)</label>
                                <input type="number" id="exhale-time-mobile" min="1" max="20" value="6" required>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="total-time-mobile">Duration (min)</label>
                            <input type="number" id="total-time-mobile" min="1" max="30" value="5" required>
                        </div>

                        <button type="submit"><i class="fas fa-play"></i> Start Exercise</button>
                    </form>

                    <div class="breathing-timer">
                        <div class="breathing-circle" id="breathing-circle-mobile">
                            <div>Ready</div>
                        </div>
                        <div class="breathing-instruction" id="breathing-instruction-mobile">Prepare to begin</div>
                        <div class="timer-display" id="timer-display-mobile">00:00</div>
                        <div class="timer-controls">
                            <button type="button" class="timer-btn" id="start-btn-mobile"><i class="fas fa-play"></i> Start</button>
                            <button type="button" class="timer-btn btn-pause" id="pause-btn-mobile"><i class="fas fa-pause"></i> Pause</button>
                            <button type="button" class="timer-btn btn-stop" id="stop-btn-mobile"><i class="fas fa-stop"></i> Stop</button>
                        </div>
                    </div>

                    <div class="session-stats">
                        <div class="session-content">
                            <div class="session-stat">
                                <div class="session-value" id="cycles-count-mobile">0</div>
                                <div class="session-label">Cycles</div>
                            </div>
                            <div class="session-stat">
                                <div class="session-value" id="time-elapsed-mobile">0s</div>
                                <div class="session-label">Elapsed</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tab-content" id="presets-mobile-tab">
                    <h2><i class="fas fa-list"></i> Preset Exercises</h2>
                    <div class="preset-exercises">
                        <div class="preset-card" data-preset="4-4-4">
                            <div class="preset-title">Box Breathing</div>
                            <div class="preset-description">4s Inhale, 4s Hold, 4s Exhale</div>
                        </div>
                        <div class="preset-card" data-preset="4-7-8">
                            <div class="preset-title">4-7-8 Technique</div>
                            <div class="preset-description">4s Inhale, 7s Hold, 8s Exhale</div>
                        </div>
                        <div class="preset-card" data-preset="6-2-6">
                            <div class="preset-title">Relaxing Breath</div>
                            <div class="preset-description">6s Inhale, 2s Hold, 6s Exhale</div>
                        </div>
                        <div class="preset-card" data-preset="3-0-3">
                            <div class="preset-title">Natural Breath</div>
                            <div class="preset-description">3s Inhale, No Hold, 3s Exhale</div>
                        </div>
                    </div>
                </div>

                <div class="tab-content" id="stats-mobile-tab">
                    <h2><i class="fas fa-chart-bar"></i> Statistics</h2>
                    <div class="stats">
                        <div class="stat-card">
                            <div class="stat-label">Total Sessions</div>
                            <div class="stat-value" id="total-sessions-mobile">0</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Total Time</div>
                            <div class="stat-value" id="total-time-spent-mobile">0</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Avg. Duration</div>
                            <div class="stat-value" id="avg-duration-mobile">0</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Favorite</div>
                            <div class="stat-value" id="favorite-exercise-mobile">-</div>
                        </div>
                    </div>

                    <div class="stats">
                        <div class="stat-card">
                            <div class="stat-label">This Week</div>
                            <div class="stat-value" id="this-week-sessions-mobile">0</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Longest</div>
                            <div class="stat-value" id="longest-session-mobile">0</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Streak</div>
                            <div class="stat-value" id="current-streak-mobile">0</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Consistency</div>
                            <div class="stat-value" id="consistency-rate-mobile">0%</div>
                        </div>
                    </div>

                    <div class="daily-progress">
                        <div class="progress-bar" id="daily-progress-bar-mobile" style="width: 0%"></div>
                    </div>
                    <div class="progress-text" id="progress-text-mobile">0% completed</div>
                </div>

                <div class="stats">
                    <div class="stat-card">
                        <div class="stat-label">Today</div>
                        <div class="stat-value" id="today-sessions-mobile">0</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">This Month</div>
                        <div class="stat-value" id="this-month-sessions-mobile">0</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Avg. Cycles</div>
                        <div class="stat-value" id="avg-cycles-mobile">0</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Progress</div>
                        <div class="stat-value" id="progress-rate-mobile">0%</div>
                    </div>
                </div>
            </section>

            <section class="exercises-section">
                <h2><i class="fas fa-history"></i> Exercise History</h2>
                <div class="filter-section">
                    <button class="filter-btn active-filter" data-filter="all">All</button>
                    <button class="filter-btn" data-filter="this-week">Week</button>
                    <button class="filter-btn" data-filter="completed">Done</button>
                    <button class="filter-btn" data-filter="favorites">Favorites</button>
                </div>
                <div id="exercises-list-mobile">
                    <div class="empty-exercises">No sessions yet!</div>
                </div>
            </section>
        </div>
    </div>

    <!-- Notification Container -->
    <div class="notification" id="notification"></div>

    <script>
        // Breathing exercise presets
        const presets = {
            '4-4-4': { inhale: 4, hold: 4, exhale: 4, name: 'Box Breathing' },
            '4-7-8': { inhale: 4, hold: 7, exhale: 8, name: '4-7-8 Technique' },
            '6-2-6': { inhale: 6, hold: 2, exhale: 6, name: 'Relaxing Breath' },
            '3-0-3': { inhale: 3, hold: 0, exhale: 3, name: 'Natural Breath' }
        };

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            // Load data from localStorage
            loadBreathingData();
            loadGoals();
            
            // Set up form submissions
            document.getElementById('breathing-form').addEventListener('submit', handleFormSubmit);
            document.getElementById('breathing-form-mobile').addEventListener('submit', handleFormSubmit);
            
            // Set up tab switching
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabName = this.getAttribute('data-tab');
                    const isMobile = tabName.includes('mobile');
                    
                    // Remove active class from all tabs
                    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                    
                    // Add active class to clicked tab
                    this.classList.add('active');
                    document.getElementById(`${tabName}-tab`).classList.add('active');
                });
            });
            
            // Set up preset cards
            document.querySelectorAll('.preset-card').forEach(card => {
                card.addEventListener('click', function() {
                    const presetKey = this.getAttribute('data-preset');
                    const preset = presets[presetKey];
                    
                    // Set form values
                    document.getElementById('inhale-time').value = preset.inhale;
                    document.getElementById('hold-time').value = preset.hold;
                    document.getElementById('exhale-time').value = preset.exhale;
                    document.getElementById('exercise-name').value = preset.name;
                    
                    // For mobile
                    document.getElementById('inhale-time-mobile').value = preset.inhale;
                    document.getElementById('hold-time-mobile').value = preset.hold;
                    document.getElementById('exhale-time-mobile').value = preset.exhale;
                    document.getElementById('total-time-mobile').value = 5;
                    
                    showNotification(`${preset.name} loaded!`, 'success');
                });
            });
            
            // Set up timer controls
            document.getElementById('start-btn').addEventListener('click', startTimer);
            document.getElementById('pause-btn').addEventListener('click', pauseTimer);
            document.getElementById('stop-btn').addEventListener('click', stopTimer);
            
            document.getElementById('start-btn-mobile').addEventListener('click', startTimer);
            document.getElementById('pause-btn-mobile').addEventListener('click', pauseTimer);
            document.getElementById('stop-btn-mobile').addEventListener('click', stopTimer);
            
            // Set up goals
            document.getElementById('save-goals-btn').addEventListener('click', saveGoals);
            
            // Set up filters
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active-filter'));
                    this.classList.add('active-filter');
                    updateDisplay();
                });
            });
            
            // Set up export and clear buttons
            document.getElementById('export-csv-btn').addEventListener('click', exportToCSV);
            document.getElementById('clear-data-btn').addEventListener('click', clearAllData);
        });

        let breathingData = [];
        let weeklyGoal = 7;
        let dailyMinutesGoal = 10;
        let timerInterval = null;
        let totalTime = 0;
        let elapsedTime = 0;
        let cycles = 0;
        let isRunning = false;
        let isPaused = false;
        let currentPhase = 'ready'; // ready, inhale, hold, exhale
        let phaseTime = 0;
        let inhaleTime = 4;
        let holdTime = 4;
        let exhaleTime = 6;
        let sessionName = '';
        let backgroundSound = 'none';

        function handleFormSubmit(e) {
            e.preventDefault();
            
            // Determine if mobile or desktop form
            const isMobile = e.target.id.includes('mobile');
            inhaleTime = parseInt(document.getElementById(isMobile ? 'inhale-time-mobile' : 'inhale-time').value);
            holdTime = parseInt(document.getElementById(isMobile ? 'hold-time-mobile' : 'hold-time').value);
            exhaleTime = parseInt(document.getElementById(isMobile ? 'exhale-time-mobile' : 'exhale-time').value);
            totalTime = parseInt(document.getElementById(isMobile ? 'total-time-mobile' : 'total-time').value) * 60;
            sessionName = document.getElementById(isMobile ? 'exercise-name-mobile' : 'exercise-name').value || 'Custom Breathing';
            backgroundSound = document.getElementById(isMobile ? 'background-sound-mobile' : 'background-sound')?.value || 'none';
            
            if (inhaleTime < 1 || exhaleTime < 1 || totalTime < 1) {
                showNotification('Please enter valid times', 'error');
                return;
            }
            
            // Start the timer
            startTimer();
        }

        function startTimer() {
            if (isRunning && !isPaused) {
                showNotification('Timer is already running', 'warning');
                return;
            }
            
            if (isPaused) {
                isPaused = false;
                runTimer();
                showNotification('Timer resumed', 'success');
                return;
            }
            
            // Reset values
            elapsedTime = 0;
            cycles = 0;
            currentPhase = 'ready';
            phaseTime = 0;
            isRunning = true;
            isPaused = false;
            
            // Update displays
            updateTimerDisplay();
            updateBreathingCircle();
            updateSessionStats();
            
            runTimer();
            showNotification('Breathing exercise started!', 'success');
        }

        function runTimer() {
            if (timerInterval) clearInterval(timerInterval);
            timerInterval = setInterval(() => {
                if (isPaused || !isRunning) return;
                
                elapsedTime++;
                phaseTime++;
                
                // Update displays
                updateTimerDisplay();
                updateSessionStats();
                
                // Handle breathing phases
                if (currentPhase === 'ready') {
                    currentPhase = 'inhale';
                    phaseTime = 1;
                    updateBreathingCircle();
                } else if (currentPhase === 'inhale' && phaseTime > inhaleTime) {
                    currentPhase = holdTime > 0 ? 'hold' : 'exhale';
                    phaseTime = 1;
                    updateBreathingCircle();
                } else if (currentPhase === 'hold' && phaseTime > holdTime) {
                    currentPhase = 'exhale';
                    phaseTime = 1;
                    updateBreathingCircle();
                } else if (currentPhase === 'exhale' && phaseTime > exhaleTime) {
                    currentPhase = 'inhale';
                    phaseTime = 1;
                    cycles++;
                    updateBreathingCircle();
                }
                
                // Check if session is complete
                if (elapsedTime >= totalTime) {
                    stopTimer();
                    completeSession();
                }
            }, 1000);
        }

        function pauseTimer() {
            if (!isRunning) {
                showNotification('Timer is not running', 'warning');
                return;
            }
            
            if (isPaused) {
                isPaused = false;
                runTimer();
                showNotification('Timer resumed', 'success');
            } else {
                isPaused = true;
                clearInterval(timerInterval);
                showNotification('Timer paused', 'success');
            }
        }

        function stopTimer() {
            isRunning = false;
            isPaused = false;
            clearInterval(timerInterval);
            
            // Reset displays
            currentPhase = 'ready';
            phaseTime = 0;
            updateTimerDisplay();
            updateBreathingCircle();
            updateSessionStats();
            
            showNotification('Timer stopped', 'success');
        }

        function completeSession() {
            const session = {
                id: Date.now(),
                name: sessionName,
                inhale: inhaleTime,
                hold: holdTime,
                exhale: exhaleTime,
                duration: totalTime,
                cycles: cycles,
                completed: true,
                timestamp: new Date()
            };
            
            breathingData.push(session);
            saveBreathingData();
            updateDisplay();
            
            showNotification('Session completed! Great job!', 'success');
        }

        function updateTimerDisplay() {
            const isMobile = document.getElementById('timer-display-mobile') !== null;
            const display = isMobile ? document.getElementById('timer-display-mobile') : document.getElementById('timer-display');
            
            if (!display) return;
            
            const remainingTime = Math.max(0, totalTime - elapsedTime);
            const minutes = Math.floor(remainingTime / 60);
            const seconds = remainingTime % 60;
            display.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        function updateBreathingCircle() {
            const isMobile = document.getElementById('breathing-circle-mobile') !== null;
            const circle = isMobile ? document.getElementById('breathing-circle-mobile') : document.getElementById('breathing-circle');
            const instruction = isMobile ? document.getElementById('breathing-instruction-mobile') : document.getElementById('breathing-instruction');
            
            if (!circle || !instruction) return;
            
            if (currentPhase === 'ready') {
                circle.innerHTML = '<div>Ready</div>';
                circle.className = 'breathing-circle';
                instruction.textContent = 'Prepare to begin';
            } else if (currentPhase === 'inhale') {
                circle.innerHTML = `<div>${phaseTime}/${inhaleTime}</div>`;
                circle.className = 'breathing-circle breathe-in';
                instruction.textContent = 'Breathe In';
            } else if (currentPhase === 'hold') {
                circle.innerHTML = `<div>${phaseTime}/${holdTime}</div>`;
                circle.className = 'breathing-circle';
                instruction.textContent = 'Hold';
            } else if (currentPhase === 'exhale') {
                circle.innerHTML = `<div>${phaseTime}/${exhaleTime}</div>`;
                circle.className = 'breathing-circle breathe-out';
                instruction.textContent = 'Breathe Out';
            }
        }

        function updateSessionStats() {
            const isMobile = document.getElementById('cycles-count-mobile') !== null;
            
            if (isMobile) {
                document.getElementById('cycles-count-mobile').textContent = cycles;
                document.getElementById('time-elapsed-mobile').textContent = `${elapsedTime}s`;
            } else {
                document.getElementById('cycles-count').textContent = cycles;
                document.getElementById('time-elapsed').textContent = `${elapsedTime}s`;
                document.getElementById('avg-breath').textContent = cycles > 0 ? `${((inhaleTime + holdTime + exhaleTime) / 3).toFixed(1)}s` : '0s';
            }
        }

        function deleteSession(id) {
            breathingData = breathingData.filter(session => session.id !== id);
            saveBreathingData();
            updateDisplay();
            showNotification('Session deleted', 'success');
        }

        function toggleFavorite(id) {
            const session = breathingData.find(s => s.id === id);
            if (session) {
                session.favorite = !session.favorite;
                saveBreathingData();
                updateDisplay();
                showNotification(session.favorite ? 'Added to favorites!' : 'Removed from favorites', 'success');
            }
        }

        function saveBreathingData() {
            localStorage.setItem('breathingTrackerData', JSON.stringify(breathingData));
        }

        function loadBreathingData() {
            const data = localStorage.getItem('breathingTrackerData');
            if (data) {
                breathingData = JSON.parse(data);
                // Convert timestamp strings back to Date objects
                breathingData.forEach(session => {
                    if (session.timestamp) session.timestamp = new Date(session.timestamp);
                });
            }
            updateDisplay();
        }

        function saveGoals() {
            weeklyGoal = parseInt(document.getElementById('weekly-goal').value) || 7;
            dailyMinutesGoal = parseInt(document.getElementById('daily-minutes').value) || 10;
            
            localStorage.setItem('breathingGoals', JSON.stringify({
                weeklyGoal,
                dailyMinutesGoal
            }));
            
            updateDisplay();
            showNotification('Goals saved successfully!', 'success');
        }

        function loadGoals() {
            const data = localStorage.getItem('breathingGoals');
            if (data) {
                const goals = JSON.parse(data);
                weeklyGoal = goals.weeklyGoal || 7;
                dailyMinutesGoal = goals.dailyMinutesGoal || 10;
            }
            document.getElementById('weekly-goal').value = weeklyGoal;
            document.getElementById('daily-minutes').value = dailyMinutesGoal;
        }

        function updateDisplay() {
            // Get active filter
            const activeFilter = document.querySelector('.filter-btn.active-filter')?.getAttribute('data-filter') || 'all';
            
            // Filter sessions based on active filter
            let filteredSessions = [];
            if (activeFilter === 'all') {
                filteredSessions = [...breathingData];
            } else if (activeFilter === 'this-week') {
                const oneWeekAgo = new Date();
                oneWeekAgo.setDate(oneWeekAgo.getDate() - 7);
                filteredSessions = breathingData.filter(session => new Date(session.timestamp) >= oneWeekAgo);
            } else if (activeFilter === 'completed') {
                filteredSessions = breathingData.filter(session => session.completed);
            } else if (activeFilter === 'favorites') {
                filteredSessions = breathingData.filter(session => session.favorite);
            }
            
            // Sort by timestamp (newest first)
            filteredSessions.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
            
            // Calculate statistics
            const totalSessions = breathingData.length;
            const totalTimeSpent = breathingData.reduce((sum, session) => sum + session.duration, 0);
            const avgDuration = totalSessions > 0 ? Math.round(totalTimeSpent / totalSessions / 60) : 0;
            
            // Favorite exercise (most used)
            const exerciseCounts = {};
            breathingData.forEach(session => {
                const name = session.name || 'Custom Breathing';
                exerciseCounts[name] = (exerciseCounts[name] || 0) + 1;
            });
            let favoriteExercise = '-';
            if (Object.keys(exerciseCounts).length > 0) {
                favoriteExercise = Object.keys(exerciseCounts).reduce((a, b) => 
                    exerciseCounts[a] > exerciseCounts[b] ? a : b
                );
            }
            
            // This week sessions
            const today = new Date();
            const oneWeekAgo = new Date(today);
            oneWeekAgo.setDate(oneWeekAgo.getDate() - 7);
            const thisWeekSessions = breathingData.filter(session => new Date(session.timestamp) >= oneWeekAgo).length;
            
            // Longest session
            const longestSession = breathingData.length > 0 
                ? Math.max(...breathingData.map(session => session.duration)) / 60
                : 0;
            
            // Current streak (consecutive days with sessions)
            let currentStreak = 0;
            if (breathingData.length > 0) {
                const sortedSessions = [...breathingData].sort((a, b) => new Date(a.timestamp) - new Date(b.timestamp));
                const uniqueDates = [...new Set(sortedSessions.map(session => 
                    new Date(session.timestamp).toDateString()
                ))].sort((a, b) => new Date(a) - new Date(b));
                
                // Count consecutive days from today backwards
                let currentDate = new Date();
                currentDate.setHours(0, 0, 0, 0);
                while (true) {
                    const dateStr = currentDate.toDateString();
                    if (uniqueDates.includes(dateStr)) {
                        currentStreak++;
                        currentDate.setDate(currentDate.getDate() - 1);
                    } else {
                        break;
                    }
                }
            }
            
            // Consistency rate (percentage of days in the last week with sessions)
            const daysInWeek = 7;
            const uniqueDaysThisWeek = [...new Set(breathingData.filter(session => 
                new Date(session.timestamp) >= oneWeekAgo
            ).map(session => new Date(session.timestamp).toDateString()))].length;
            const consistencyRate = Math.round((uniqueDaysThisWeek / daysInWeek) * 100);
            
            // Today's sessions
            const todayStr = today.toDateString();
            const todaySessions = breathingData.filter(session => 
                new Date(session.timestamp).toDateString() === todayStr
            ).length;
            
            // This month sessions
            const startOfMonth = new Date(today.getFullYear(), today.getMonth(), 1);
            const thisMonthSessions = breathingData.filter(session => 
                new Date(session.timestamp) >= startOfMonth
            ).length;
            
            // Average cycles
            const avgCycles = totalSessions > 0 
                ? Math.round(breathingData.reduce((sum, session) => sum + session.cycles, 0) / totalSessions)
                : 0;
            
            // Progress rate (sessions this week vs last week)
            const twoWeeksAgo = new Date(oneWeekAgo);
            twoWeeksAgo.setDate(twoWeeksAgo.getDate() - 7);
            const lastWeekSessions = breathingData.filter(session => 
                new Date(session.timestamp) >= twoWeeksAgo && new Date(session.timestamp) < oneWeekAgo
            ).length;
            const progressRate = lastWeekSessions > 0 
                ? Math.round(((thisWeekSessions - lastWeekSessions) / lastWeekSessions) * 100)
                : 0;
            
            // Update progress bar (goal: weeklyGoal sessions per week)
            const progressPercentage = Math.min(100, (thisWeekSessions / weeklyGoal) * 100);
            
            // Update desktop stats
            document.getElementById('total-sessions').textContent = totalSessions;
            document.getElementById('total-time-spent').textContent = Math.round(totalTimeSpent / 60);
            document.getElementById('avg-duration').textContent = avgDuration;
            document.getElementById('favorite-exercise').textContent = favoriteExercise;
            document.getElementById('this-week-sessions').textContent = thisWeekSessions;
            document.getElementById('longest-session').textContent = longestSession;
            document.getElementById('current-streak').textContent = currentStreak;
            document.getElementById('consistency-rate').textContent = `${consistencyRate}%`;
            document.getElementById('today-sessions').textContent = todaySessions;
            document.getElementById('this-month-sessions').textContent = thisMonthSessions;
            document.getElementById('avg-cycles').textContent = avgCycles;
            document.getElementById('progress-rate').textContent = `${progressRate >= 0 ? '+' : ''}${progressRate}%`;
            document.getElementById('daily-progress-bar').style.width = `${progressPercentage}%`;
            document.getElementById('progress-text').textContent = `${Math.round(progressPercentage)}% of weekly goal completed`;
            
            // Update goal section
            document.getElementById('goal-value').textContent = `${weeklyGoal} sessions`;
            document.getElementById('goal-progress-bar').style.width = `${progressPercentage}%`;
            document.getElementById('goal-current').textContent = `${thisWeekSessions} sessions`;
            document.getElementById('goal-remaining').textContent = `${Math.max(0, weeklyGoal - thisWeekSessions)} sessions remaining`;
            
            // Update current goals section
            document.getElementById('current-weekly-goal').textContent = `${weeklyGoal} sessions/week`;
            document.getElementById('current-goal-progress').style.width = `${progressPercentage}%`;
            document.getElementById('current-goal-current').textContent = `${thisWeekSessions} sessions`;
            document.getElementById('current-goal-remaining').textContent = `${Math.max(0, weeklyGoal - thisWeekSessions)} sessions remaining`;
            
            // Update mobile stats
            document.getElementById('total-sessions-mobile').textContent = totalSessions;
            document.getElementById('total-time-spent-mobile').textContent = Math.round(totalTimeSpent / 60);
            document.getElementById('avg-duration-mobile').textContent = avgDuration;
            document.getElementById('favorite-exercise-mobile').textContent = favoriteExercise;
            document.getElementById('this-week-sessions-mobile').textContent = thisWeekSessions;
            document.getElementById('longest-session-mobile').textContent = longestSession;
            document.getElementById('current-streak-mobile').textContent = currentStreak;
            document.getElementById('consistency-rate-mobile').textContent = `${consistencyRate}%`;
            document.getElementById('today-sessions-mobile').textContent = todaySessions;
            document.getElementById('this-month-sessions-mobile').textContent = thisMonthSessions;
            document.getElementById('avg-cycles-mobile').textContent = avgCycles;
            document.getElementById('progress-rate-mobile').textContent = `${progressRate >= 0 ? '+' : ''}${progressRate}%`;
            document.getElementById('daily-progress-bar-mobile').style.width = `${progressPercentage}%`;
            document.getElementById('progress-text-mobile').textContent = `${Math.round(progressPercentage)}% completed`;
            
            // Update exercises list for desktop
            const exercisesList = document.getElementById('exercises-list');
            if (filteredSessions.length === 0) {
                exercisesList.innerHTML = '<div class="empty-exercises">No breathing sessions found for this filter</div>';
            } else {
                exercisesList.innerHTML = filteredSessions.map(session => `
                    <div class="exercise-item">
                        <div class="exercise-header">
                            <span>
                                <i class="fas fa-lungs"></i> 
                                ${session.name}
                                <span class="exercise-category category-relaxation">
                                    ${Math.round(session.duration / 60)} min
                                </span>
                                ${session.favorite ? '<i class="fas fa-star" style="color: #ffc107;"></i>' : ''}
                            </span>
                            <div>
                                <button class="favorite-btn ${session.favorite ? 'favorited' : ''}" onclick="toggleFavorite(${session.id})">
                                    <i class="fas fa-star"></i> ${session.favorite ? 'Unfavorite' : 'Favorite'}
                                </button>
                                <button class="delete-btn" onclick="deleteSession(${session.id})"><i class="fas fa-trash"></i> Delete</button>
                            </div>
                        </div>
                        <div class="exercise-description">
                            <strong>Rhythm:</strong> ${session.inhale}s Inhale, ${session.hold}s Hold, ${session.exhale}s Exhale
                        </div>
                        <div class="exercise-description">
                            <strong>Cycles:</strong> ${session.cycles} | 
                            <strong>Date:</strong> ${formatDateTime(new Date(session.timestamp))}
                        </div>
                    </div>
                `).join('');
            }
            
            // Update exercises list for mobile
            const exercisesListMobile = document.getElementById('exercises-list-mobile');
            if (filteredSessions.length === 0) {
                exercisesListMobile.innerHTML = '<div class="empty-exercises">No sessions for this filter</div>';
            } else {
                exercisesListMobile.innerHTML = filteredSessions.map(session => `
                    <div class="exercise-item">
                        <div class="exercise-header">
                            <span>
                                <i class="fas fa-lungs"></i> 
                                ${session.name.length > 20 ? session.name.substring(0, 20) + '...' : session.name}
                                ${session.favorite ? '<i class="fas fa-star" style="color: #ffc107;"></i>' : ''}
                            </span>
                            <div>
                                <button class="favorite-btn ${session.favorite ? 'favorited' : ''}" onclick="toggleFavorite(${session.id})">
                                    <i class="fas fa-star"></i>
                                </button>
                                <button class="delete-btn" onclick="deleteSession(${session.id})"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                        <div class="exercise-description">
                            ${session.inhale}s/${session.hold}s/${session.exhale}s | ${Math.round(session.duration / 60)}min
                        </div>
                        <div class="exercise-description">
                            ${session.cycles} cycles | ${formatDate(new Date(session.timestamp))}
                        </div>
                    </div>
                `).join('');
            }
        }

        function formatDate(date) {
            return date.toLocaleDateString([], { month: 'short', day: 'numeric' });
        }

        function formatDateTime(date) {
            return date.toLocaleDateString([], { month: 'short', day: 'numeric' }) + ' ' + 
                   date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
        }

        function exportToCSV() {
            if (breathingData.length === 0) {
                showNotification('No breathing sessions to export', 'warning');
                return;
            }
            
            let csv = 'ID,Name,Inhale,Hold,Exhale,Duration (seconds),Cycles,Completed,Favorite,Timestamp\n';
            
            breathingData.forEach(session => {
                const name = `"${session.name.replace(/"/g, '""')}"`;
                const timestamp = `"${formatDateTime(new Date(session.timestamp))}"`;
                const favorite = session.favorite ? 'Yes' : 'No';
                
                csv += `${session.id},${name},${session.inhale},${session.hold},${session.exhale},${session.duration},${session.cycles},${session.completed},${favorite},${timestamp}\n`;
            });
            
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.setAttribute('hidden', '');
            a.setAttribute('href', url);
            a.setAttribute('download', 'breathing_sessions.csv');
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            
            showNotification('Breathing sessions exported successfully', 'success');
        }

        function clearAllData() {
            if (confirm('Are you sure you want to clear all breathing session data? This cannot be undone.')) {
                breathingData = [];
                localStorage.removeItem('breathingTrackerData');
                updateDisplay();
                showNotification('All breathing session data cleared', 'success');
            }
        }

        function showNotification(message, type) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification ${type} show`;
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // Make functions available globally
        window.deleteSession = deleteSession;
        window.toggleFavorite = toggleFavorite;
    </script>
</body>
</html>
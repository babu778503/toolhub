<!DOCTYPE html>
<!-- Category: Mental Health & Wellness -->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stress Level Checker</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #8e2de2, #4a00e0, #8e2de2);
            color: #333;
            min-height: 100vh;
            padding: 20px;
        }

        /* Desktop Styles */
        .desktop-view {
            display: block;
            max-width: 1200px;
            margin: 0 auto;
        }

        .mobile-view {
            display: none;
        }

        header {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            text-align: center;
            position: relative;
        }

        h1 {
            color: #8e2de2;
            margin-bottom: 10px;
            font-size: 2.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        h1 i {
            color: #4a00e0;
        }

        .subtitle {
            color: #4a00e0;
            font-size: 1.2rem;
            margin-bottom: 20px;
        }

        .container {
            display: flex;
            gap: 30px;
            margin-bottom: 30px;
        }

        .input-section {
            flex: 1;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
        }

        .stress-section {
            flex: 1;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            max-height: 600px;
            overflow-y: auto;
        }

        h2 {
            color: #8e2de2;
            margin-bottom: 20px;
            border-bottom: 2px solid #4a00e0;
            padding-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #8e2de2;
        }

        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        input:focus, select:focus, textarea:focus {
            border-color: #8e2de2;
            outline: none;
            box-shadow: 0 0 0 3px rgba(142, 45, 226, 0.2);
        }

        button {
            background: linear-gradient(to right, #8e2de2, #4a00e0);
            color: white;
            border: none;
            padding: 14px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 18px;
            font-weight: 600;
            width: 100%;
            transition: transform 0.2s, box-shadow 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .btn-secondary {
            background: linear-gradient(to right, #6c757d, #495057);
            margin-top: 10px;
        }

        .btn-warning {
            background: linear-gradient(to right, #ffc107, #e0a800);
        }

        .btn-danger {
            background: linear-gradient(to right, #dc3545, #bd2130);
        }

        .btn-success {
            background: linear-gradient(to right, #28a745, #218838);
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-top: 25px;
        }

        .stat-card {
            background: linear-gradient(135deg, #8e2de2, #7a2de2);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            margin: 10px 0;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .stress-item {
            background: #f8f9fa;
            border-left: 4px solid #8e2de2;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 0 8px 8px 0;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s;
        }

        .stress-item:hover {
            transform: translateX(5px);
        }

        .stress-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .stress-time {
            color: #4a00e0;
            font-size: 0.9rem;
        }

        .delete-btn, .edit-btn {
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            width: auto;
            transition: background 0.3s;
            margin-left: 5px;
        }

        .delete-btn {
            background: #dc3545;
        }

        .delete-btn:hover {
            background: #bd2130;
        }

        .edit-btn {
            background: #17a2b8;
        }

        .edit-btn:hover {
            background: #138496;
        }

        .empty-stress {
            text-align: center;
            color: #666;
            font-style: italic;
            padding: 20px;
        }

        .daily-progress {
            height: 20px;
            background: #e0e0e0;
            border-radius: 10px;
            margin-top: 15px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(to right, #28a745, #218838);
            border-radius: 10px;
            transition: width 0.5s;
        }

        .progress-text {
            text-align: center;
            margin-top: 10px;
            font-weight: 600;
        }

        .progress-indicator {
            display: flex;
            justify-content: space-between;
            font-size: 0.8rem;
            color: #666;
            margin-top: 5px;
        }

        .stress-info {
            background: #e3f2fd;
            border-left: 4px solid #2196F3;
            padding: 15px;
            border-radius: 0 8px 8px 0;
            margin: 20px 0;
        }

        .info-title {
            font-weight: 600;
            margin-bottom: 10px;
            color: #8e2de2;
        }

        .info-content {
            font-size: 0.9rem;
            line-height: 1.5;
        }

        .chart-container {
            height: 200px;
            margin-top: 20px;
            position: relative;
        }

        .chart-bar {
            position: absolute;
            bottom: 0;
            width: 30px;
            background: linear-gradient(to top, #8e2de2, #7a2de2);
            border-radius: 5px 5px 0 0;
            text-align: center;
            color: white;
            font-size: 0.7rem;
            display: flex;
            align-items: flex-end;
            justify-content: center;
            padding: 5px;
        }

        .chart-label {
            position: absolute;
            bottom: -25px;
            width: 30px;
            text-align: center;
            font-size: 0.7rem;
            color: #666;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            border-radius: 15px;
            padding: 30px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            position: relative;
        }

        .close-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.5rem;
            cursor: pointer;
            color: #666;
        }

        .modal h3 {
            color: #8e2de2;
            margin-bottom: 20px;
            text-align: center;
        }

        .form-row {
            display: flex;
            gap: 15px;
        }

        .form-row .form-group {
            flex: 1;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            border-radius: 8px;
            color: white;
            font-weight: 600;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            z-index: 1001;
            transform: translateX(200%);
            transition: transform 0.3s;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
            background: linear-gradient(to right, #28a745, #218838);
        }

        .notification.warning {
            background: linear-gradient(to right, #ffc107, #e0a800);
        }

        .notification.error {
            background: linear-gradient(to right, #dc3545, #c82333);
        }

        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid #ddd;
        }

        .tab {
            padding: 10px 20px;
            cursor: pointer;
            background: #f0f0f0;
            border: none;
            border-radius: 5px 5px 0 0;
            margin-right: 5px;
        }

        .tab.active {
            background: #8e2de2;
            color: white;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .export-section {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .export-btn {
            flex: 1;
            padding: 10px;
            font-size: 0.9rem;
        }

        .filter-section {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .filter-btn {
            flex: 1;
            padding: 8px;
            font-size: 0.8rem;
        }

        .active-filter {
            background: #8e2de2;
            color: white;
        }

        .stress-description {
            margin: 8px 0;
            font-size: 0.9rem;
            color: #555;
        }

        .stress-category {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: 600;
            margin-top: 5px;
        }

        .category-work {
            background: #e3f2fd;
            color: #1565c0;
        }

        .category-personal {
            background: #f3e5f5;
            color: #6a1b9a;
        }

        .category-health {
            background: #e8f5e9;
            color: #2e7d32;
        }

        .category-financial {
            background: #fff3e0;
            color: #ef6c00;
        }

        .category-relationships {
            background: #ffebee;
            color: #c62828;
        }

        .stress-scale {
            display: flex;
            justify-content: space-between;
            margin: 20px 0;
            text-align: center;
        }

        .stress-option {
            flex: 1;
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            margin: 0 5px;
            background: #f8f9fa;
            border: 2px solid #e9ecef;
        }

        .stress-option:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .stress-option.selected {
            border: 3px solid #8e2de2;
            background: #f5f0ff;
            transform: scale(1.05);
        }

        .stress-emoji {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .stress-label {
            font-weight: 600;
            color: #333;
        }

        .stress-calendar {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
            margin-top: 15px;
        }

        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            font-size: 0.7rem;
            background: #e0e0e0;
            cursor: pointer;
            transition: all 0.2s;
        }

        .calendar-day.low { background: #4caf50; color: white; }
        .calendar-day.moderate { background: #ffc107; color: black; }
        .calendar-day.high { background: #ff9800; color: white; }
        .calendar-day.severe { background: #f44336; color: white; }
        .calendar-day.extreme { background: #9c27b0; color: white; }

        .calendar-day.today {
            border: 2px solid #8e2de2;
        }

        .calendar-header {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
            margin-bottom: 5px;
            font-weight: 600;
            font-size: 0.8rem;
            text-align: center;
            color: #8e2de2;
        }

        .stress-actions {
            display: flex;
            gap: 5px;
            margin-top: 10px;
        }

        .action-btn {
            flex: 1;
            padding: 8px;
            font-size: 0.8rem;
        }

        .week-summary {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            font-size: 0.8rem;
            color: #666;
        }

        .stress-intensity {
            display: flex;
            align-items: center;
            margin: 10px 0;
        }

        .intensity-label {
            margin-right: 10px;
            font-weight: 600;
            color: #8e2de2;
        }

        .intensity-slider {
            flex: 1;
            height: 10px;
            -webkit-appearance: none;
            background: #e0e0e0;
            border-radius: 5px;
            outline: none;
        }

        .intensity-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #8e2de2;
            cursor: pointer;
        }

        .intensity-value {
            margin-left: 10px;
            font-weight: 600;
            color: #8e2de2;
            min-width: 30px;
        }

        .stress-level-indicator {
            height: 20px;
            background: linear-gradient(to right, #4caf50, #ffc107, #ff9800, #f44336, #9c27b0);
            border-radius: 10px;
            margin: 20px 0;
            position: relative;
        }

        .stress-level-marker {
            position: absolute;
            top: -5px;
            width: 10px;
            height: 30px;
            background: #333;
            border-radius: 5px;
            transform: translateX(-50%);
        }

        .stress-level-labels {
            display: flex;
            justify-content: space-between;
            font-size: 0.8rem;
            color: #666;
            margin-top: 5px;
        }

        .stress-recommendation {
            background: #fff3e0;
            border-left: 4px solid #ff9800;
            padding: 15px;
            border-radius: 0 8px 8px 0;
            margin: 15px 0;
        }

        .recommendation-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: #8e2de2;
        }

        .recommendation-content {
            font-size: 0.9rem;
            line-height: 1.4;
        }

        /* Mobile Styles */
        @media (max-width: 768px) {
            .desktop-view {
                display: none;
            }

            .mobile-view {
                display: block;
            }

            body {
                padding: 0;
                background: linear-gradient(135deg, #8e2de2, #4a00e0);
            }

            header {
                height: 50px;
                border-radius: 0;
                padding: 10px;
                margin-bottom: 0;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            h1 {
                font-size: 1.3rem;
                margin: 0;
            }

            h1 i {
                font-size: 1rem;
            }

            .subtitle {
                display: none;
            }

            .container {
                display: block;
                padding: 15px;
                gap: 15px;
            }

            .input-section, .stress-section {
                border-radius: 10px;
                padding: 15px;
                margin-bottom: 15px;
            }

            .stats {
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
            }

            .stat-card {
                padding: 12px;
            }

            .stat-value {
                font-size: 1.3rem;
                margin: 5px 0;
            }

            .stat-label {
                font-size: 0.7rem;
            }

            h2 {
                font-size: 1.2rem;
                margin-bottom: 15px;
            }

            button {
                padding: 12px;
                font-size: 16px;
            }

            .stress-item {
                padding: 12px;
            }

            .stress-header {
                flex-direction: column;
                gap: 5px;
            }

            .form-group {
                margin-bottom: 15px;
            }

            input, select {
                padding: 10px;
                font-size: 14px;
            }

            .daily-progress {
                height: 15px;
            }

            .progress-text {
                font-size: 0.8rem;
            }

            .form-row {
                flex-direction: column;
                gap: 0;
            }

            .modal-content {
                padding: 20px;
                width: 95%;
            }

            .export-section {
                flex-direction: column;
                gap: 5px;
            }

            .filter-section {
                flex-direction: column;
                gap: 5px;
            }

            .stress-description {
                font-size: 0.8rem;
            }

            .stress-actions {
                flex-direction: column;
            }

            .action-btn {
                width: 100%;
            }

            .stress-scale {
                flex-direction: column;
                gap: 10px;
            }

            .stress-option {
                margin: 0;
            }

            .stress-calendar {
                gap: 3px;
            }

            .calendar-day {
                font-size: 0.6rem;
            }

            .calendar-header {
                font-size: 0.7rem;
            }

            .intensity-slider {
                height: 8px;
            }

            .intensity-slider::-webkit-slider-thumb {
                width: 16px;
                height: 16px;
            }

            .stress-level-indicator {
                height: 15px;
            }

            .stress-level-marker {
                height: 25px;
            }
        }

        @media (max-width: 480px) {
            .stats {
                grid-template-columns: 1fr 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Desktop View -->
    <div class="desktop-view">
        <header>
            <h1><i class="fas fa-heartbeat"></i> Stress Level Checker</h1>
            <div class="subtitle">Monitor and manage your stress levels for better mental health</div>
        </header>

        <div class="container">
            <section class="input-section">
                <div class="tabs">
                    <button class="tab active" data-tab="check">Check Stress</button>
                    <button class="tab" data-tab="categories">Stress Types</button>
                    <button class="tab" data-tab="stats">Statistics</button>
                    <button class="tab" data-tab="tips">Stress Management</button>
                </div>

                <div class="tab-content active" id="check-tab">
                    <h2><i class="fas fa-plus-circle"></i> Check Your Stress Level</h2>
                    <form id="stress-form">
                        <div class="form-group">
                            <label>How stressed are you right now?</label>
                            <div class="stress-scale">
                                <div class="stress-option" data-level="1">
                                    <div class="stress-emoji">😊</div>
                                    <div class="stress-label">Not at all</div>
                                </div>
                                <div class="stress-option" data-level="2">
                                    <div class="stress-emoji">🙂</div>
                                    <div class="stress-label">A little</div>
                                </div>
                                <div class="stress-option" data-level="3">
                                    <div class="stress-emoji">😐</div>
                                    <div class="stress-label">Moderate</div>
                                </div>
                                <div class="stress-option" data-level="4">
                                    <div class="stress-emoji">😟</div>
                                    <div class="stress-label">High</div>
                                </div>
                                <div class="stress-option" data-level="5">
                                    <div class="stress-emoji">😫</div>
                                    <div class="stress-label">Extreme</div>
                                </div>
                            </div>
                            <input type="hidden" id="stress-level" name="level" required>
                        </div>

                        <div class="form-group">
                            <label for="stress-description">What's causing your stress? (Optional)</label>
                            <textarea id="stress-description" rows="3" placeholder="Describe what's stressing you out..."></textarea>
                        </div>

                        <div class="form-group">
                            <label for="stress-triggers">Triggers (Optional)</label>
                            <input type="text" id="stress-triggers" placeholder="What triggered this stress? (e.g., work deadline, family issues)">
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="stress-category">Category</label>
                                <select id="stress-category">
                                    <option value="work">Work/School</option>
                                    <option value="personal">Personal Issues</option>
                                    <option value="health">Health Concerns</option>
                                    <option value="financial">Financial</option>
                                    <option value="relationships">Relationships</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="stress-time">Time (Optional)</label>
                                <input type="time" id="stress-time">
                            </div>
                        </div>

                        <button type="submit"><i class="fas fa-plus"></i> Log Stress Level</button>
                        <button type="button" class="btn-secondary" id="quick-check-btn"><i class="fas fa-bolt"></i> Quick Stress Check</button>
                    </form>
                </div>

                <div class="tab-content" id="categories-tab">
                    <h2><i class="fas fa-list"></i> Types of Stress</h2>
                    <div class="stress-info">
                        <div class="info-title">Work/School Stress</div>
                        <div class="info-content">Related to job responsibilities, deadlines, performance pressure, or academic challenges.</div>
                    </div>
                    <div class="stress-info">
                        <div class="info-title">Personal Issues</div>
                        <div class="info-content">Internal conflicts, self-doubt, perfectionism, or personal expectations and goals.</div>
                    </div>
                    <div class="stress-info">
                        <div class="info-title">Health Concerns</div>
                        <div class="info-content">Physical health issues, chronic conditions, or concerns about mental well-being.</div>
                    </div>
                    <div class="stress-info">
                        <div class="info-title">Financial Stress</div>
                        <div class="info-content">Money worries, debt, job security, or financial planning concerns.</div>
                    </div>
                    <div class="stress-info">
                        <div class="info-title">Relationship Stress</div>
                        <div class="info-content">Conflicts with family, friends, partners, or social relationship challenges.</div>
                    </div>
                </div>

                <div class="tab-content" id="stats-tab">
                    <h2><i class="fas fa-chart-bar"></i> Stress Statistics</h2>
                    <div class="stats">
                        <div class="stat-card">
                            <div class="stat-label">Total Entries</div>
                            <div class="stat-value" id="total-entries">0</div>
                            <div class="stat-label">Logged</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Avg. Level</div>
                            <div class="stat-value" id="avg-stress-level">0</div>
                            <div class="stat-label">This Week</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">High Stress</div>
                            <div class="stat-value" id="high-stress-count">0</div>
                            <div class="stat-label">Days</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Most Common</div>
                            <div class="stat-value" id="most-common-category">-</div>
                            <div class="stat-label">Category</div>
                        </div>
                    </div>

                    <div class="stats">
                        <div class="stat-card">
                            <div class="stat-label">Today's Entries</div>
                            <div class="stat-value" id="today-entries">0</div>
                            <div class="stat-label">Logged</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Weekly Avg</div>
                            <div class="stat-value" id="weekly-average">0</div>
                            <div class="stat-label">Entries</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Categories</div>
                            <div class="stat-value" id="active-categories">0</div>
                            <div class="stat-label">Used</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Current Streak</div>
                            <div class="stat-value" id="current-streak">0</div>
                            <div class="stat-label">Days</div>
                        </div>
                    </div>
                </div>

                <div class="tab-content" id="tips-tab">
                    <h2><i class="fas fa-lightbulb"></i> Stress Management Tips</h2>
                    <div class="stress-info">
                        <div class="info-title">Deep Breathing</div>
                        <div class="info-content">Practice the 4-7-8 technique: Inhale for 4 counts, hold for 7, exhale for 8.</div>
                    </div>
                    <div class="stress-info">
                        <div class="info-title">Physical Activity</div>
                        <div class="info-content">Regular exercise releases endorphins which naturally reduce stress hormones.</div>
                    </div>
                    <div class="stress-info">
                        <div class="info-title">Mindfulness & Meditation</div>
                        <div class="info-content">Even 5-10 minutes of daily meditation can significantly reduce stress levels.</div>
                    </div>
                    <div class="stress-info">
                        <div class="info-title">Healthy Boundaries</div>
                        <div class="info-content">Learn to say no to additional responsibilities when you're already overwhelmed.</div>
                    </div>
                    <div class="stress-info">
                        <div class="info-title">Social Support</div>
                        <div class="info-content">Talk to trusted friends, family, or a mental health professional about your stress.</div>
                    </div>
                    <div class="stress-info">
                        <div class="info-title">Sleep Hygiene</div>
                        <div class="info-content">Maintain consistent sleep schedules and create a calming bedtime routine.</div>
                    </div>
                </div>

                <div class="stress-info">
                    <div class="info-title">Understanding Stress</div>
                    <div class="info-content">
                        <p><strong>Normal stress:</strong> Can be motivating and help you perform better in challenging situations.</p>
                        <p><strong>Chronic stress:</strong> Prolonged stress can negatively impact your physical and mental health.</p>
                    </div>
                </div>

                <div class="stats">
                    <div class="stat-card">
                        <div class="stat-label">This Month</div>
                        <div class="stat-value" id="monthly-entries">0</div>
                        <div class="stat-label">Entries</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Low Stress</div>
                        <div class="stat-value" id="low-stress-count">0</div>
                        <div class="stat-label">Days</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Improvement</div>
                        <div class="stat-value" id="improvement-rate">0%</div>
                        <div class="stat-label">This Week</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Consistency</div>
                        <div class="stat-value" id="tracking-consistency">0%</div>
                        <div class="stat-label">Rate</div>
                    </div>
                </div>

                <div class="daily-progress">
                    <div class="progress-bar" id="daily-progress-bar" style="width: 0%"></div>
                </div>
                <div class="progress-text" id="progress-text">0% of weekly goal completed</div>
                <div class="progress-indicator">
                    <span>0%</span>
                    <span>50%</span>
                    <span>100%</span>
                </div>
            </section>

            <section class="stress-section">
                <h2><i class="fas fa-history"></i> Stress History</h2>
                <div class="filter-section">
                    <button class="filter-btn active-filter" data-filter="all">All Entries</button>
                    <button class="filter-btn" data-filter="high">High Stress</button>
                    <button class="filter-btn" data-filter="this-week">This Week</button>
                    <button class="filter-btn" data-filter="work">Work</button>
                </div>
                <div class="export-section">
                    <button type="button" class="export-btn btn-warning" id="export-csv-btn"><i class="fas fa-file-csv"></i> Export CSV</button>
                    <button type="button" class="export-btn btn-danger" id="clear-data-btn"><i class="fas fa-trash"></i> Clear Data</button>
                </div>
                <div id="stress-list">
                    <div class="empty-stress">No stress entries logged yet. Start by checking your stress level!</div>
                </div>
            </section>
        </div>
    </div>

    <!-- Mobile View -->
    <div class="mobile-view">
        <header>
            <h1><i class="fas fa-heartbeat"></i> Stress Checker</h1>
        </header>

        <div class="container">
            <section class="input-section">
                <div class="tabs">
                    <button class="tab active" data-tab="check-mobile">Check Stress</button>
                    <button class="tab" data-tab="stats-mobile">Stats</button>
                </div>

                <div class="tab-content active" id="check-mobile-tab">
                    <h2><i class="fas fa-plus-circle"></i> Check Stress Level</h2>
                    <form id="stress-form-mobile">
                        <div class="form-group">
                            <label>How stressed are you?</label>
                            <div class="stress-scale">
                                <div class="stress-option" data-level="1">
                                    <div class="stress-emoji">😊</div>
                                    <div class="stress-label">Not at all</div>
                                </div>
                                <div class="stress-option" data-level="2">
                                    <div class="stress-emoji">🙂</div>
                                    <div class="stress-label">A little</div>
                                </div>
                                <div class="stress-option" data-level="3">
                                    <div class="stress-emoji">😐</div>
                                    <div class="stress-label">Moderate</div>
                                </div>
                                <div class="stress-option" data-level="4">
                                    <div class="stress-emoji">😟</div>
                                    <div class="stress-label">High</div>
                                </div>
                                <div class="stress-option" data-level="5">
                                    <div class="stress-emoji">😫</div>
                                    <div class="stress-label">Extreme</div>
                                </div>
                            </div>
                            <input type="hidden" id="stress-level-mobile" name="level" required>
                        </div>

                        <div class="form-group">
                            <label for="stress-description-mobile">Notes (Optional)</label>
                            <textarea id="stress-description-mobile" rows="2" placeholder="What's stressing you?"></textarea>
                        </div>

                        <button type="submit"><i class="fas fa-plus"></i> Log Stress</button>
                    </form>
                </div>

                <div class="tab-content" id="stats-mobile-tab">
                    <h2><i class="fas fa-chart-bar"></i> Statistics</h2>
                    <div class="stats">
                        <div class="stat-card">
                            <div class="stat-label">Total Entries</div>
                            <div class="stat-value" id="total-entries-mobile">0</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Avg. Level</div>
                            <div class="stat-value" id="avg-stress-level-mobile">0</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">High Stress</div>
                            <div class="stat-value" id="high-stress-count-mobile">0</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Most Common</div>
                            <div class="stat-value" id="most-common-category-mobile">-</div>
                        </div>
                    </div>

                    <div class="stats">
                        <div class="stat-card">
                            <div class="stat-label">Today</div>
                            <div class="stat-value" id="today-entries-mobile">0</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Weekly Avg</div>
                            <div class="stat-value" id="weekly-average-mobile">0</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Categories</div>
                            <div class="stat-value" id="active-categories-mobile">0</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Streak</div>
                            <div class="stat-value" id="current-streak-mobile">0</div>
                        </div>
                    </div>

                    <div class="daily-progress">
                        <div class="progress-bar" id="daily-progress-bar-mobile" style="width: 0%"></div>
                    </div>
                    <div class="progress-text" id="progress-text-mobile">0% completed</div>
                </div>

                <div class="stats">
                    <div class="stat-card">
                        <div class="stat-label">This Month</div>
                        <div class="stat-value" id="monthly-entries-mobile">0</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Low Stress</div>
                        <div class="stat-value" id="low-stress-count-mobile">0</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Improvement</div>
                        <div class="stat-value" id="improvement-rate-mobile">0%</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Consistency</div>
                        <div class="stat-value" id="tracking-consistency-mobile">0%</div>
                    </div>
                </div>
            </section>

            <section class="stress-section">
                <h2><i class="fas fa-history"></i> Stress History</h2>
                <div class="filter-section">
                    <button class="filter-btn active-filter" data-filter="all">All</button>
                    <button class="filter-btn" data-filter="high">High</button>
                    <button class="filter-btn" data-filter="this-week">Week</button>
                    <button class="filter-btn" data-filter="work">Work</button>
                </div>
                <div id="stress-list-mobile">
                    <div class="empty-stress">No entries yet!</div>
                </div>
            </section>
        </div>
    </div>

    <!-- Quick Check Modal -->
    <div class="modal" id="quick-check-modal">
        <div class="modal-content">
            <span class="close-modal" id="close-quick-modal">&times;</span>
            <h3><i class="fas fa-bolt"></i> Quick Stress Check</h3>
            <div class="form-group">
                <label>Select your stress level:</label>
                <button type="button" class="quick-stress-btn" data-level="1">😊 Not at all stressed</button>
                <button type="button" class="quick-stress-btn" data-level="2">🙂 A little stressed</button>
                <button type="button" class="quick-stress-btn" data-level="3">😐 Moderately stressed</button>
                <button type="button" class="quick-stress-btn" data-level="4">😟 Highly stressed</button>
                <button type="button" class="quick-stress-btn" data-level="5">😫 Extremely stressed</button>
            </div>
        </div>
    </div>

    <!-- Edit Stress Modal -->
    <div class="modal" id="edit-stress-modal">
        <div class="modal-content">
            <span class="close-modal" id="close-edit-modal">&times;</span>
            <h3><i class="fas fa-edit"></i> Edit Stress Entry</h3>
            <form id="edit-stress-form">
                <input type="hidden" id="edit-stress-id">
                <div class="form-group">
                    <label for="edit-stress-level">Stress Level</label>
                    <select id="edit-stress-level" required>
                        <option value="1">😊 Not at all stressed</option>
                        <option value="2">🙂 A little stressed</option>
                        <option value="3">😐 Moderately stressed</option>
                        <option value="4">😟 Highly stressed</option>
                        <option value="5">😫 Extremely stressed</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="edit-stress-description">Description</label>
                    <textarea id="edit-stress-description" rows="3"></textarea>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="edit-stress-category">Category</label>
                        <select id="edit-stress-category">
                            <option value="work">Work/School</option>
                            <option value="personal">Personal Issues</option>
                            <option value="health">Health Concerns</option>
                            <option value="financial">Financial</option>
                            <option value="relationships">Relationships</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="edit-stress-time">Time</label>
                        <input type="time" id="edit-stress-time">
                    </div>
                </div>
                <button type="submit"><i class="fas fa-save"></i> Save Changes</button>
            </form>
        </div>
    </div>

    <!-- Notification Container -->
    <div class="notification" id="notification"></div>

    <script>
        // Stress level data
        const stressLevelData = {
            1: { emoji: '😊', label: 'Not at all stressed', color: '#4caf50', class: 'low' },
            2: { emoji: '🙂', label: 'A little stressed', color: '#8bc34a', class: 'low' },
            3: { emoji: '😐', label: 'Moderately stressed', color: '#ffc107', class: 'moderate' },
            4: { emoji: '😟', label: 'Highly stressed', color: '#ff9800', class: 'high' },
            5: { emoji: '😫', label: 'Extremely stressed', color: '#f44336', class: 'extreme' }
        };

        const stressCategories = {
            'work': { label: 'Work/School', class: 'category-work' },
            'personal': { label: 'Personal Issues', class: 'category-personal' },
            'health': { label: 'Health Concerns', class: 'category-health' },
            'financial': { label: 'Financial', class: 'category-financial' },
            'relationships': { label: 'Relationships', class: 'category-relationships' },
            'other': { label: 'Other', class: 'category-personal' }
        };

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            // Load data from localStorage
            loadStressData();
            
            // Set up form submissions
            document.getElementById('stress-form').addEventListener('submit', handleFormSubmit);
            document.getElementById('stress-form-mobile').addEventListener('submit', handleFormSubmit);
            document.getElementById('edit-stress-form').addEventListener('submit', handleEditFormSubmit);
            
            // Set up tab switching
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabName = this.getAttribute('data-tab');
                    const isMobile = tabName.includes('mobile');
                    
                    // Remove active class from all tabs
                    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                    
                    // Add active class to clicked tab
                    this.classList.add('active');
                    document.getElementById(`${tabName}-tab`).classList.add('active');
                });
            });
            
            // Set up stress level selection
            document.querySelectorAll('.stress-option').forEach(option => {
                option.addEventListener('click', function() {
                    const level = this.getAttribute('data-level');
                    document.querySelectorAll('.stress-option').forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                    
                    // Set hidden input value
                    const isMobile = document.getElementById('stress-form-mobile').contains(this);
                    document.getElementById(isMobile ? 'stress-level-mobile' : 'stress-level').value = level;
                });
            });
            
            // Set up quick check functionality
            document.getElementById('quick-check-btn').addEventListener('click', function() {
                document.getElementById('quick-check-modal').style.display = 'flex';
            });
            
            document.getElementById('close-quick-modal').addEventListener('click', function() {
                document.getElementById('quick-check-modal').style.display = 'none';
            });
            
            // Set up quick stress buttons
            document.querySelectorAll('.quick-stress-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const level = this.getAttribute('data-level');
                    addQuickStress(level);
                });
            });
            
            // Set up edit modal close
            document.getElementById('close-edit-modal').addEventListener('click', function() {
                document.getElementById('edit-stress-modal').style.display = 'none';
            });
            
            // Set up filters
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active-filter'));
                    this.classList.add('active-filter');
                    updateDisplay();
                });
            });
            
            // Set up export and clear buttons
            document.getElementById('export-csv-btn').addEventListener('click', exportToCSV);
            document.getElementById('clear-data-btn').addEventListener('click', clearAllData);
        });

        let stressData = [];
        let activeFilter = 'all';

        function handleFormSubmit(e) {
            e.preventDefault();
            
            // Determine if mobile or desktop form
            const isMobile = e.target.id.includes('mobile');
            const level = parseInt(document.getElementById(isMobile ? 'stress-level-mobile' : 'stress-level').value);
            const description = document.getElementById(isMobile ? 'stress-description-mobile' : 'stress-description').value || '';
            const triggers = document.getElementById(isMobile ? 'stress-triggers-mobile' : 'stress-triggers')?.value || '';
            const category = document.getElementById(isMobile ? 'stress-category-mobile' : 'stress-category')?.value || 'work';
            const time = document.getElementById(isMobile ? 'stress-time-mobile' : 'stress-time')?.value || '';
            
            if (!level || level < 1 || level > 5) {
                showNotification('Please select a valid stress level', 'error');
                return;
            }
            
            // Add to data
            const stressEntry = {
                id: Date.now(),
                level,
                description,
                triggers,
                category,
                time,
                timestamp: new Date()
            };
            
            stressData.push(stressEntry);
            saveStressData();
            updateDisplay();
            
            // Reset form
            e.target.reset();
            document.querySelectorAll('.stress-option').forEach(opt => opt.classList.remove('selected'));
            
            // Show notification
            showNotification('Stress level logged successfully!', 'success');
            
            // Show stress recommendation
            showStressRecommendation(level);
        }

        function addQuickStress(level) {
            const stressEntry = {
                id: Date.now(),
                level: parseInt(level),
                description: '',
                triggers: '',
                category: 'other',
                time: '',
                timestamp: new Date()
            };
            
            stressData.push(stressEntry);
            saveStressData();
            updateDisplay();
            document.getElementById('quick-check-modal').style.display = 'none';
            showNotification('Quick stress check logged!', 'success');
            
            // Show stress recommendation
            showStressRecommendation(parseInt(level));
        }

        function showStressRecommendation(level) {
            const recommendations = {
                1: "Great job! You're managing stress well. Keep up the good work with your healthy habits.",
                2: "You're doing well overall. Consider taking a few deep breaths or doing a short mindfulness exercise.",
                3: "Moderate stress is normal, but try to incorporate some relaxation techniques like stretching or listening to calming music.",
                4: "You're experiencing high stress. Take a break, practice deep breathing, and consider talking to someone you trust.",
                5: "You're extremely stressed. Please prioritize self-care. Consider reaching out to a mental health professional if this continues."
            };
            
            const recommendation = document.createElement('div');
            recommendation.className = 'stress-recommendation';
            recommendation.innerHTML = `
                <div class="recommendation-title">Stress Management Recommendation</div>
                <div class="recommendation-content">${recommendations[level]}</div>
            `;
            
            // Insert recommendation after the form
            const form = document.querySelector('#stress-form, #stress-form-mobile');
            form.parentNode.insertBefore(recommendation, form.nextSibling);
            
            // Remove recommendation after 10 seconds
            setTimeout(() => {
                if (recommendation.parentNode) {
                    recommendation.parentNode.removeChild(recommendation);
                }
            }, 10000);
        }

        function deleteStress(id) {
            stressData = stressData.filter(stress => stress.id !== id);
            saveStressData();
            updateDisplay();
            showNotification('Stress entry deleted', 'success');
        }

        function editStress(id) {
            const stress = stressData.find(s => s.id === id);
            if (stress) {
                document.getElementById('edit-stress-id').value = stress.id;
                document.getElementById('edit-stress-level').value = stress.level;
                document.getElementById('edit-stress-description').value = stress.description || '';
                document.getElementById('edit-stress-category').value = stress.category || 'work';
                document.getElementById('edit-stress-time').value = stress.time || '';
                
                document.getElementById('edit-stress-modal').style.display = 'flex';
            }
        }

        function handleEditFormSubmit(e) {
            e.preventDefault();
            
            const id = parseInt(document.getElementById('edit-stress-id').value);
            const stress = stressData.find(s => s.id === id);
            
            if (stress) {
                stress.level = parseInt(document.getElementById('edit-stress-level').value);
                stress.description = document.getElementById('edit-stress-description').value;
                stress.category = document.getElementById('edit-stress-category').value;
                stress.time = document.getElementById('edit-stress-time').value;
                
                saveStressData();
                updateDisplay();
                document.getElementById('edit-stress-modal').style.display = 'none';
                showNotification('Stress entry updated successfully!', 'success');
            }
        }

        function saveStressData() {
            localStorage.setItem('stressTrackerData', JSON.stringify(stressData));
        }

        function loadStressData() {
            const data = localStorage.getItem('stressTrackerData');
            if (data) {
                stressData = JSON.parse(data);
                // Convert timestamp strings back to Date objects
                stressData.forEach(stress => {
                    if (stress.timestamp) stress.timestamp = new Date(stress.timestamp);
                });
            }
            updateDisplay();
        }

        function updateDisplay() {
            // Get active filter
            activeFilter = document.querySelector('.filter-btn.active-filter')?.getAttribute('data-filter') || 'all';
            
            // Filter stress entries based on active filter
            let filteredStress = [];
            if (activeFilter === 'all') {
                filteredStress = [...stressData];
            } else if (activeFilter === 'high') {
                filteredStress = stressData.filter(stress => stress.level >= 4);
            } else if (activeFilter === 'this-week') {
                const oneWeekAgo = new Date();
                oneWeekAgo.setDate(oneWeekAgo.getDate() - 7);
                filteredStress = stressData.filter(stress => new Date(stress.timestamp) >= oneWeekAgo);
            } else if (activeFilter === 'work') {
                filteredStress = stressData.filter(stress => stress.category === 'work');
            }
            
            // Sort by timestamp (newest first)
            filteredStress.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
            
            // Calculate statistics
            const totalEntries = stressData.length;
            
            // Average stress level (this week)
            const today = new Date();
            const oneWeekAgo = new Date(today);
            oneWeekAgo.setDate(oneWeekAgo.getDate() - 7);
            const thisWeekEntries = stressData.filter(stress => new Date(stress.timestamp) >= oneWeekAgo);
            const avgStressLevel = thisWeekEntries.length > 0 
                ? (thisWeekEntries.reduce((sum, stress) => sum + stress.level, 0) / thisWeekEntries.length).toFixed(1)
                : 0;
            
            // High stress count (level 4-5)
            const highStressCount = stressData.filter(stress => stress.level >= 4).length;
            
            // Most common category
            const categoryCounts = {};
            stressData.forEach(stress => {
                categoryCounts[stress.category] = (categoryCounts[stress.category] || 0) + 1;
            });
            let mostCommonCategory = '-';
            if (Object.keys(categoryCounts).length > 0) {
                mostCommonCategory = Object.keys(categoryCounts).reduce((a, b) => 
                    categoryCounts[a] > categoryCounts[b] ? a : b
                );
                mostCommonCategory = stressCategories[mostCommonCategory]?.label || mostCommonCategory;
            }
            
            // Today's entries
            const todayStr = today.toDateString();
            const todayEntries = stressData.filter(stress => 
                new Date(stress.timestamp).toDateString() === todayStr
            ).length;
            
            // Weekly average entries
            const weeklyAverage = thisWeekEntries.length > 0 ? (thisWeekEntries.length / 7).toFixed(1) : 0;
            
            // Active categories
            const activeCategories = [...new Set(stressData.map(stress => stress.category))].length;
            
            // Current streak (consecutive days with entries)
            let currentStreak = 0;
            if (stressData.length > 0) {
                const sortedStress = [...stressData].sort((a, b) => new Date(a.timestamp) - new Date(b.timestamp));
                const uniqueDates = [...new Set(sortedStress.map(stress => 
                    new Date(stress.timestamp).toDateString()
                ))].sort((a, b) => new Date(a) - new Date(b));
                
                // Count consecutive days from today backwards
                let currentDate = new Date();
                currentDate.setHours(0, 0, 0, 0);
                while (true) {
                    const dateStr = currentDate.toDateString();
                    if (uniqueDates.includes(dateStr)) {
                        currentStreak++;
                        currentDate.setDate(currentDate.getDate() - 1);
                    } else {
                        break;
                    }
                }
            }
            
            // Monthly entries
            const startOfMonth = new Date(today.getFullYear(), today.getMonth(), 1);
            const monthlyEntries = stressData.filter(stress => 
                new Date(stress.timestamp) >= startOfMonth
            ).length;
            
            // Low stress count (level 1-2)
            const lowStressCount = stressData.filter(stress => stress.level <= 2).length;
            
            // Improvement rate (compare this week to last week)
            const twoWeeksAgo = new Date(oneWeekAgo);
            twoWeeksAgo.setDate(twoWeeksAgo.getDate() - 7);
            const lastWeekEntries = stressData.filter(stress => 
                new Date(stress.timestamp) >= twoWeeksAgo && new Date(stress.timestamp) < oneWeekAgo
            );
            const lastWeekAvg = lastWeekEntries.length > 0 
                ? (lastWeekEntries.reduce((sum, stress) => sum + stress.level, 0) / lastWeekEntries.length)
                : 0;
            const improvementRate = lastWeekAvg > 0 
                ? Math.round(((lastWeekAvg - avgStressLevel) / lastWeekAvg) * 100)
                : 0;
            
            // Tracking consistency (percentage of days in the last week with entries)
            const daysInWeek = 7;
            const uniqueDaysThisWeek = [...new Set(thisWeekEntries.map(stress => 
                new Date(stress.timestamp).toDateString()
            ))].length;
            const trackingConsistency = Math.round((uniqueDaysThisWeek / daysInWeek) * 100);
            
            // Update progress bar (goal: 7 entries per week)
            const progressPercentage = Math.min(100, (thisWeekEntries.length / 7) * 100);
            
            // Update desktop stats
            document.getElementById('total-entries').textContent = totalEntries;
            document.getElementById('avg-stress-level').textContent = avgStressLevel;
            document.getElementById('high-stress-count').textContent = highStressCount;
            document.getElementById('most-common-category').textContent = mostCommonCategory;
            document.getElementById('today-entries').textContent = todayEntries;
            document.getElementById('weekly-average').textContent = weeklyAverage;
            document.getElementById('active-categories').textContent = activeCategories;
            document.getElementById('current-streak').textContent = currentStreak;
            document.getElementById('monthly-entries').textContent = monthlyEntries;
            document.getElementById('low-stress-count').textContent = lowStressCount;
            document.getElementById('improvement-rate').textContent = `${improvementRate >= 0 ? '+' : ''}${improvementRate}%`;
            document.getElementById('tracking-consistency').textContent = `${trackingConsistency}%`;
            document.getElementById('daily-progress-bar').style.width = `${progressPercentage}%`;
            document.getElementById('progress-text').textContent = `${Math.round(progressPercentage)}% of weekly goal completed`;
            
            // Update mobile stats
            document.getElementById('total-entries-mobile').textContent = totalEntries;
            document.getElementById('avg-stress-level-mobile').textContent = avgStressLevel;
            document.getElementById('high-stress-count-mobile').textContent = highStressCount;
            document.getElementById('most-common-category-mobile').textContent = mostCommonCategory;
            document.getElementById('today-entries-mobile').textContent = todayEntries;
            document.getElementById('weekly-average-mobile').textContent = weeklyAverage;
            document.getElementById('active-categories-mobile').textContent = activeCategories;
            document.getElementById('current-streak-mobile').textContent = currentStreak;
            document.getElementById('monthly-entries-mobile').textContent = monthlyEntries;
            document.getElementById('low-stress-count-mobile').textContent = lowStressCount;
            document.getElementById('improvement-rate-mobile').textContent = `${improvementRate >= 0 ? '+' : ''}${improvementRate}%`;
            document.getElementById('tracking-consistency-mobile').textContent = `${trackingConsistency}%`;
            document.getElementById('daily-progress-bar-mobile').style.width = `${progressPercentage}%`;
            document.getElementById('progress-text-mobile').textContent = `${Math.round(progressPercentage)}% completed`;
            
            // Update stress list for desktop
            const stressList = document.getElementById('stress-list');
            if (filteredStress.length === 0) {
                stressList.innerHTML = '<div class="empty-stress">No stress entries found for this filter</div>';
            } else {
                stressList.innerHTML = filteredStress.map(stress => `
                    <div class="stress-item">
                        <div class="stress-header">
                            <span>
                                ${stressLevelData[stress.level]?.emoji || '🤔'} 
                                ${stressLevelData[stress.level]?.label || `Level ${stress.level}`}
                                <span class="stress-category ${stressCategories[stress.category]?.class || 'category-work'}">
                                    ${stressCategories[stress.category]?.label || stress.category}
                                </span>
                            </span>
                            <div>
                                <button class="edit-btn" onclick="editStress(${stress.id})"><i class="fas fa-edit"></i> Edit</button>
                                <button class="delete-btn" onclick="deleteStress(${stress.id})"><i class="fas fa-trash"></i> Delete</button>
                            </div>
                        </div>
                        ${stress.description ? `<div class="stress-description">${stress.description}</div>` : ''}
                        ${stress.triggers ? `<div class="stress-description"><strong>Triggers:</strong> ${stress.triggers}</div>` : ''}
                        <div class="week-summary">
                            <span>${formatDateTime(new Date(stress.timestamp))}</span>
                            ${stress.time ? `<span>Time: ${stress.time}</span>` : ''}
                        </div>
                    </div>
                `).join('');
            }
            
            // Update stress list for mobile
            const stressListMobile = document.getElementById('stress-list-mobile');
            if (filteredStress.length === 0) {
                stressListMobile.innerHTML = '<div class="empty-stress">No entries for this filter</div>';
            } else {
                stressListMobile.innerHTML = filteredStress.map(stress => `
                    <div class="stress-item">
                        <div class="stress-header">
                            <span>
                                ${stressLevelData[stress.level]?.emoji || '🤔'} 
                                L${stress.level}
                            </span>
                            <div>
                                <button class="edit-btn" onclick="editStress(${stress.id})"><i class="fas fa-edit"></i></button>
                                <button class="delete-btn" onclick="deleteStress(${stress.id})"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                        ${stress.description ? `<div class="stress-description">${stress.description.substring(0, 50)}${stress.description.length > 50 ? '...' : ''}</div>` : ''}
                        <div class="week-summary">
                            ${formatDateTime(new Date(stress.timestamp))}
                        </div>
                    </div>
                `).join('');
            }
        }

        function formatDate(date) {
            return date.toLocaleDateString([], { month: 'short', day: 'numeric', year: 'numeric' });
        }

        function formatDateTime(date) {
            return date.toLocaleDateString([], { month: 'short', day: 'numeric' }) + ' ' + 
                   date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
        }

        function exportToCSV() {
            if (stressData.length === 0) {
                showNotification('No stress entries to export', 'warning');
                return;
            }
            
            let csv = 'ID,Stress Level,Description,Triggers,Category,Time,Timestamp\n';
            
            stressData.forEach(stress => {
                const levelLabel = stressLevelData[stress.level]?.label || `Level ${stress.level}`;
                const description = stress.description ? `"${stress.description.replace(/"/g, '""')}"` : '';
                const triggers = stress.triggers ? `"${stress.triggers.replace(/"/g, '""')}"` : '';
                const categoryLabel = stressCategories[stress.category]?.label || stress.category;
                const time = stress.time || '';
                const timestamp = `"${formatDateTime(new Date(stress.timestamp))}"`;
                
                csv += `${stress.id},${levelLabel},${description},${triggers},${categoryLabel},${time},${timestamp}\n`;
            });
            
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.setAttribute('hidden', '');
            a.setAttribute('href', url);
            a.setAttribute('download', 'stress_tracker.csv');
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            
            showNotification('Stress entries exported successfully', 'success');
        }

        function clearAllData() {
            if (confirm('Are you sure you want to clear all stress entries? This cannot be undone.')) {
                stressData = [];
                localStorage.removeItem('stressTrackerData');
                updateDisplay();
                showNotification('All stress entries cleared', 'success');
            }
        }

        function showNotification(message, type) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification ${type} show`;
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // Make functions available globally
        window.deleteStress = deleteStress;
        window.editStress = editStress;
    </script>
</body>
</html>
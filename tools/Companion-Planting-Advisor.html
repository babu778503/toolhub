<!DOCTYPE html>
<!-- Category: Environment -->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Companion Planting Advisor</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="Free companion planting advisor to help you choose the best plant combinations for your garden. Maximize growth and deter pests naturally.">
    <meta name="keywords" content="companion planting, garden planning, plant combinations, gardening tips, pest control, garden design, plant compatibility, gardening tool, companion plants, garden efficiency">
    <meta name="author" content="Garden Tools">
    <meta name="robots" content="index, follow">
    
    <!-- Open Graph Tags for Social Sharing -->
    <meta property="og:title" content="Companion Planting Advisor">
    <meta property="og:description" content="Discover the best plant combinations for your garden to maximize growth and deter pests naturally.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://toolshub365.com/companion-planting-advisor">
    
    <!-- Schema.org for SEO -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Companion Planting Advisor",
        "description": "A tool to find compatible plants for your garden",
        "url": "https://toolshub365.com/companion-planting-advisor",
        "applicationCategory": "UtilitiesApplication",
        "operatingSystem": "Web Browser",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        }
    }
    </script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #e0f7e0, #c8e6c9);
            min-height: 100vh;
            padding: 20px;
            color: #2e7d32;
        }

        /* Header Styles */
        header {
            background: linear-gradient(to right, #2e7d32, #4caf50);
            color: white;
            text-align: center;
            padding: 15px 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        h1 {
            font-size: 1.8rem;
            font-weight: 600;
            letter-spacing: 0.5px;
        }

        /* Mobile Header Override */
        @media (max-width: 768px) {
            header {
                height: 50px;
                padding: 0;
                align-items: center;
            }
            
            h1 {
                font-size: 1.4rem;
            }
        }

        /* Main Container */
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
        }

        /* Search Section */
        .search-section {
            background: #f1f8e9;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .input-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #2e7d32;
        }

        input, select {
            width: 100%;
            padding: 12px;
            border: 2px solid #a5d6a7;
            border-radius: 8px;
            font-size: 1rem;
            background: white;
        }

        input:focus, select:focus {
            outline: none;
            border-color: #4caf50;
        }

        button {
            padding: 12px 25px;
            border: none;
            border-radius: 50px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            background: #4caf50;
            color: white;
            width: 100%;
            margin-top: 10px;
        }

        button:hover {
            background: #43a047;
            transform: translateY(-2px);
        }

        /* Results Section */
        .results {
            background: #e8f5e9;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
        }

        .result-label {
            font-size: 1.2rem;
            color: #558b2f;
            margin-bottom: 15px;
        }

        .companion-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .companion-card {
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            text-align: center;
            transition: all 0.3s ease;
            position: relative;
        }

        .companion-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }

        .companion-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .companion-name {
            font-weight: 600;
            color: #2e7d32;
        }

        .companion-type {
            font-size: 0.8rem;
            color: #558b2f;
        }

        .benefit {
            font-size: 0.8rem;
            color: #4caf50;
            margin-top: 5px;
        }

        .compatibility {
            position: absolute;
            top: 5px;
            right: 5px;
            font-size: 0.8rem;
            padding: 2px 6px;
            border-radius: 10px;
        }

        .compatibility.good {
            background: #e8f5e9;
            color: #4caf50;
        }

        .compatibility.bad {
            background: #ffebee;
            color: #f44336;
        }

        /* Plant Selection */
        .plant-selection {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .plant-option {
            background: #f1f8e9;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            border: 2px solid #c8e6c9;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .plant-option:hover {
            background: #e8f5e9;
            border-color: #4caf50;
        }

        .plant-option.active {
            background: #c8e6a7;
            border-color: #4caf50;
            transform: translateY(-3px);
        }

        .plant-icon {
            font-size: 2rem;
            margin-bottom: 5px;
        }

        .plant-name {
            font-weight: 600;
            font-size: 0.9rem;
        }

        /* Benefits Section */
        .benefits-section {
            background: #f1f8e9;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .benefit-card {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .benefit-title {
            font-weight: 600;
            color: #2e7d32;
            margin-bottom: 5px;
        }

        .benefit-content {
            color: #558b2f;
        }

        /* Incompatibility Section */
        .incompatibility-section {
            background: #ffebee;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .incompatibility-card {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
        }

        .incompatibility-icon {
            font-size: 1.5rem;
            margin-right: 10px;
            color: #f44336;
        }

        .incompatibility-info {
            flex-grow: 1;
        }

        .incompatibility-name {
            font-weight: 600;
            color: #c62828;
        }

        .incompatibility-reason {
            font-size: 0.9rem;
            color: #d32f2f;
        }

        /* Garden Layout */
        .garden-layout {
            background: #e8f5e9;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
        }

        .layout-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 5px;
            margin: 20px auto;
            max-width: 400px;
        }

        .grid-item {
            height: 40px;
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            color: white;
            cursor: pointer;
        }

        .grid-item.empty {
            background: #c8e6c9;
        }

        .grid-item.tomato {
            background: #e53935;
        }

        .grid-item.basil {
            background: #4caf50;
        }

        .grid-item.carrot {
            background: #ff9800;
        }

        .grid-item.onion {
            background: #9c27b0;
        }

        /* Data Management Section */
        .data-management {
            background: #f1f8e9;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
        }

        .data-management button {
            background: #795548;
            color: white;
            margin: 10px 5px;
        }

        .data-management button:hover {
            background: #5d4037;
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            body {
                padding: 0;
            }
            
            .container {
                padding: 15px;
                border-radius: 0;
            }
            
            .plant-selection {
                grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            }
            
            .companion-grid {
                grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            }
            
            .layout-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>Companion Planting Advisor</h1>
    </header>

    <div class="container">
        <div class="search-section">
            <div class="input-group">
                <label for="plantSearch">Search Plants</label>
                <input type="text" id="plantSearch" placeholder="Type plant name...">
            </div>

            <button id="searchBtn">Find Companions</button>
        </div>

        <div class="results">
            <div class="result-label">Recommended Companions for <span id="currentPlant">Tomato</span></div>
            <div class="companion-grid" id="companionGrid">
                <div class="companion-card">
                    <div class="compatibility good">Good</div>
                    <div class="companion-icon">🌿</div>
                    <div class="companion-name">Basil</div>
                    <div class="companion-type">Herb</div>
                    <div class="benefit">Repels pests</div>
                </div>
                <div class="companion-card">
                    <div class="compatibility good">Good</div>
                    <div class="companion-icon">🌱</div>
                    <div class="companion-name">Marigold</div>
                    <div class="companion-type">Flower</div>
                    <div class="benefit">Deters nematodes</div>
                </div>
                <div class="companion-card">
                    <div class="compatibility good">Good</div>
                    <div class="companion-icon">🥕</div>
                    <div class="companion-name">Carrot</div>
                    <div class="companion-type">Vegetable</div>
                    <div class="benefit">Improves soil</div>
                </div>
                <div class="companion-card">
                    <div class="compatibility good">Good</div>
                    <div class="companion-icon"> Onion</div>
                    <div class="companion-name">Onion</div>
                    <div class="companion-type">Vegetable</div>
                    <div class="benefit">Pest deterrent</div>
                </div>
            </div>
        </div>

        <div class="incompatibility-section">
            <h3>Plants to Avoid</h3>
            <div class="incompatibility-card">
                <div class="incompatibility-icon">❌</div>
                <div class="incompatibility-info">
                    <div class="incompatibility-name">Cabbage</div>
                    <div class="incompatibility-reason">Inhibits growth of tomatoes</div>
                </div>
            </div>
            <div class="incompatibility-card">
                <div class="incompatibility-icon">❌</div>
                <div class="incompatibility-info">
                    <div class="incompatibility-name">Corn</div>
                    <div class="incompatibility-reason">Attracts tomato pests</div>
                </div>
            </div>
        </div>

        <div class="garden-layout">
            <h3>Garden Layout Visualization</h3>
            <div class="layout-grid" id="layoutGrid">
                <div class="grid-item tomato">T</div>
                <div class="grid-item empty"></div>
                <div class="grid-item basil">B</div>
                <div class="grid-item empty"></div>
                <div class="grid-item carrot">C</div>
                <div class="grid-item empty"></div>
                <div class="grid-item onion">O</div>
                <div class="grid-item empty"></div>
                <div class="grid-item empty"></div>
                <div class="grid-item empty"></div>
                <div class="grid-item empty"></div>
                <div class="grid-item empty"></div>
                <div class="grid-item empty"></div>
                <div class="grid-item empty"></div>
                <div class="grid-item empty"></div>
                <div class="grid-item empty"></div>
                <div class="grid-item empty"></div>
                <div class="grid-item empty"></div>
                <div class="grid-item empty"></div>
                <div class="grid-item empty"></div>
            </div>
            <p>Click on a grid cell to add/remove plants</p>
        </div>

        <div class="benefits-section">
            <h3>Benefits of Companion Planting</h3>
            <div class="benefit-card">
                <div class="benefit-title">Pest Control</div>
                <div class="benefit-content">Some plants naturally repel harmful insects and pests.</div>
            </div>
            <div class="benefit-card">
                <div class="benefit-title">Soil Improvement</div>
                <div class="benefit-content">Nitrogen-fixing plants enhance soil fertility for neighboring plants.</div>
            </div>
            <div class="benefit-card">
                <div class="benefit-title">Space Optimization</div>
                <div class="benefit-content">Tall plants can provide shade for smaller, shade-loving plants.</div>
            </div>
            <div class="benefit-card">
                <div class="benefit-title">Enhanced Flavor</div>
                <div class="benefit-content">Some companion plants can improve the taste of vegetables.</div>
            </div>
        </div>

        <div class="plant-selection">
            <div class="plant-option" data-name="Tomato">
                <div class="plant-icon">🍅</div>
                <div class="plant-name">Tomato</div>
            </div>
            <div class="plant-option" data-name="Lettuce">
                <div class="plant-icon">🥬</div>
                <div class="plant-name">Lettuce</div>
            </div>
            <div class="plant-option" data-name="Carrot">
                <div class="plant-icon">🥕</div>
                <div class="plant-name">Carrot</div>
            </div>
            <div class="plant-option" data-name="Basil">
                <div class="plant-icon">🌿</div>
                <div class="plant-name">Basil</div>
            </div>
            <div class="plant-option" data-name="Marigold">
                <div class="plant-icon">🌱</div>
                <div class="plant-name">Marigold</div>
            </div>
            <div class="plant-option" data-name="Cucumber">
                <div class="plant-icon">🥒</div>
                <div class="plant-name">Cucumber</div>
            </div>
            <div class="plant-option" data-name="Pepper">
                <div class="plant-icon">🌶️</div>
                <div class="plant-name">Pepper</div>
            </div>
            <div class="plant-option" data-name="Beans">
                <div class="plant-icon">🌱</div>
                <div class="plant-name">Beans</div>
            </div>
        </div>

        <div class="data-management">
            <h3>Settings & Data Management</h3>
            <button id="saveBtn">Save Settings</button>
            <button id="loadBtn">Load Settings</button>
            <button id="clearBtn">Clear Data</button>
            <p id="dataStatus" style="margin-top: 10px; font-style: italic;"></p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Elements
            const plantSearchInput = document.getElementById('plantSearch');
            const searchBtn = document.getElementById('searchBtn');
            const currentPlantElement = document.getElementById('currentPlant');
            const companionGrid = document.getElementById('companionGrid');
            const incompatibilitySection = document.querySelector('.incompatibility-section');
            const saveBtn = document.getElementById('saveBtn');
            const loadBtn = document.getElementById('loadBtn');
            const clearBtn = document.getElementById('clearBtn');
            const dataStatus = document.getElementById('dataStatus');
            const plantOptions = document.querySelectorAll('.plant-option');
            const layoutGrid = document.getElementById('layoutGrid');
            
            // Sample plant data
            const plants = [
                { 
                    name: "Tomato", 
                    companions: [
                        { name: "Basil", type: "Herb", benefit: "Repels pests", icon: "🌿", compatibility: "good" },
                        { name: "Marigold", type: "Flower", benefit: "Deters nematodes", icon: "🌱", compatibility: "good" },
                        { name: "Carrot", type: "Vegetable", benefit: "Improves soil", icon: "🥕", compatibility: "good" },
                        { name: "Onion", type: "Vegetable", benefit: "Pest deterrent", icon: " Onion", compatibility: "good" }
                    ],
                    incompatibles: [
                        { name: "Cabbage", reason: "Inhibits growth of tomatoes" },
                        { name: "Corn", reason: "Attracts tomato pests" }
                    ]
                },
                { 
                    name: "Lettuce", 
                    companions: [
                        { name: "Carrot", type: "Vegetable", benefit: "Complementary growth", icon: "🥕", compatibility: "good" },
                        { name: "Radish", type: "Vegetable", benefit: "Deters pests", icon: "🌱", compatibility: "good" },
                        { name: "Chives", type: "Herb", benefit: "Pest control", icon: "🌿", compatibility: "good" },
                        { name: "Strawberry", type: "Fruit", benefit: "Space efficient", icon: "🍓", compatibility: "good" }
                    ],
                    incompatibles: [
                        { name: "Cabbage", reason: "Competes for nutrients" },
                        { name: "Parsley", reason: "Stunts growth" }
                    ]
                },
                { 
                    name: "Carrot", 
                    companions: [
                        { name: "Tomato", type: "Vegetable", benefit: "Improves soil", icon: "🍅", compatibility: "good" },
                        { name: "Lettuce", type: "Vegetable", benefit: "Complementary growth", icon: "🥬", compatibility: "good" },
                        { name: "Onion", type: "Vegetable", benefit: "Pest deterrent", icon: " Onion", compatibility: "good" },
                        { name: "Rosemary", type: "Herb", benefit: "Repels carrot flies", icon: "🌿", compatibility: "good" }
                    ],
                    incompatibles: [
                        { name: "Dill", reason: "Attracts harmful insects" },
                        { name: "Parsnip", reason: "Competes for space" }
                    ]
                },
                { 
                    name: "Basil", 
                    companions: [
                        { name: "Tomato", type: "Vegetable", benefit: "Enhances flavor", icon: "🍅", compatibility: "good" },
                        { name: "Pepper", type: "Vegetable", benefit: "Repels pests", icon: "🌶️", compatibility: "good" },
                        { name: "Oregano", type: "Herb", benefit: "Complementary growth", icon: "🌿", compatibility: "good" },
                        { name: "Marigold", type: "Flower", benefit: "Deters aphids", icon: "🌱", compatibility: "good" }
                    ],
                    incompatibles: [
                        { name: "Cucumber", reason: "Reduces flavor" },
                        { name: "Sage", reason: "Competes for nutrients" }
                    ]
                },
                { 
                    name: "Marigold", 
                    companions: [
                        { name: "Tomato", type: "Vegetable", benefit: "Deters nematodes", icon: "🍅", compatibility: "good" },
                        { name: "Cucumber", type: "Vegetable", benefit: "Pest control", icon: "🥒", compatibility: "good" },
                        { name: "Rose", type: "Flower", benefit: "Deters aphids", icon: "🌱", compatibility: "good" },
                        { name: "Basil", type: "Herb", benefit: "Deters aphids", icon: "🌿", compatibility: "good" }
                    ],
                    incompatibles: [
                        { name: "Beans", reason: "Inhibits growth" },
                        { name: "Cabbage", reason: "Competes for nutrients" }
                    ]
                },
                { 
                    name: "Cucumber", 
                    companions: [
                        { name: "Beans", type: "Vegetable", benefit: "Nitrogen fixer", icon: "🌱", compatibility: "good" },
                        { name: "Corn", type: "Vegetable", benefit: "Support structure", icon: "🌽", compatibility: "good" },
                        { name: "Radish", type: "Vegetable", benefit: "Deters cucumber beetles", icon: "🌱", compatibility: "good" },
                        { name: "Nasturtium", type: "Flower", benefit: "Pest deterrent", icon: "🌱", compatibility: "good" }
                    ],
                    incompatibles: [
                        { name: "Basil", reason: "Reduces flavor" },
                        { name: "Potato", reason: "Attracts same pests" }
                    ]
                },
                { 
                    name: "Pepper", 
                    companions: [
                        { name: "Basil", type: "Herb", benefit: "Repels pests", icon: "🌿", compatibility: "good" },
                        { name: "Tomato", type: "Vegetable", benefit: "Complementary growth", icon: "🍅", compatibility: "good" },
                        { name: "Marigold", type: "Flower", benefit: "Deters aphids", icon: "🌱", compatibility: "good" },
                        { name: "Onion", type: "Vegetable", benefit: "Pest deterrent", icon: " Onion", compatibility: "good" }
                    ],
                    incompatibles: [
                        { name: "Fennel", reason: "Inhibits growth" },
                        { name: "Kohlrabi", reason: "Competes for nutrients" }
                    ]
                },
                { 
                    name: "Beans", 
                    companions: [
                        { name: "Corn", type: "Vegetable", benefit: "Nitrogen fixer", icon: "🌽", compatibility: "good" },
                        { name: "Squash", type: "Vegetable", benefit: "Three sisters", icon: " Squash", compatibility: "good" },
                        { name: "Cucumber", type: "Vegetable", benefit: "Complementary growth", icon: "🥒", compatibility: "good" },
                        { name: "Carrot", type: "Vegetable", benefit: "Complementary growth", icon: "🥕", compatibility: "good" }
                    ],
                    incompatibles: [
                        { name: "Onion", reason: "Inhibits growth" },
                        { name: "Garlic", reason: "Inhibits growth" }
                    ]
                }
            ];
            
            // Update companions display
            function updateCompanions(plantName) {
                currentPlantElement.textContent = plantName;
                
                // Find the plant in the data
                const plant = plants.find(p => p.name === plantName);
                
                if (plant) {
                    // Clear the grid
                    companionGrid.innerHTML = '';
                    
                    // Add companions
                    plant.companions.forEach(companion => {
                        const card = document.createElement('div');
                        card.className = 'companion-card';
                        card.innerHTML = `
                            <div class="compatibility ${companion.compatibility}">${companion.compatibility === 'good' ? 'Good' : 'Bad'}</div>
                            <div class="companion-icon">${companion.icon}</div>
                            <div class="companion-name">${companion.name}</div>
                            <div class="companion-type">${companion.type}</div>
                            <div class="benefit">${companion.benefit}</div>
                        `;
                        companionGrid.appendChild(card);
                    });
                    
                    // Update incompatibility section
                    updateIncompatibles(plant.incompatibles);
                } else {
                    companionGrid.innerHTML = '<div class="companion-card"><div class="companion-name">No companions found</div></div>';
                    incompatibilitySection.querySelector('.incompatibility-card').innerHTML = '<div class="incompatibility-info"><div class="incompatibility-name">No incompatibilities found</div></div>';
                }
            }
            
            // Update incompatibles display
            function updateIncompatibles(incompatibles) {
                const incompatibilityContainer = incompatibilitySection.querySelector('.incompatibility-card');
                
                if (incompatibles.length > 0) {
                    let html = '';
                    incompatibles.forEach(inc => {
                        html += `
                        <div class="incompatibility-card">
                            <div class="incompatibility-icon">❌</div>
                            <div class="incompatibility-info">
                                <div class="incompatibility-name">${inc.name}</div>
                                <div class="incompatibility-reason">${inc.reason}</div>
                            </div>
                        </div>
                        `;
                    });
                    incompatibilitySection.innerHTML = '<h3>Plants to Avoid</h3>' + html;
                } else {
                    incompatibilitySection.innerHTML = '<h3>Plants to Avoid</h3><div class="incompatibility-card"><div class="incompatibility-info"><div class="incompatibility-name">No incompatibilities found</div></div></div>';
                }
            }
            
            // Set plant based on selection
            function setPlant(plantName) {
                // Remove active class from all options
                plantOptions.forEach(option => {
                    option.classList.remove('active');
                });
                
                // Add active class to clicked option
                event.target.closest('.plant-option').classList.add('active');
                
                updateCompanions(plantName);
                
                // Save to localStorage
                saveSettings();
            }
            
            // Search for plants
            function searchPlants() {
                const searchTerm = plantSearchInput.value.toLowerCase();
                
                // Find matching plant
                const match = plants.find(plant => 
                    plant.name.toLowerCase().includes(searchTerm)
                );
                
                if (match) {
                    updateCompanions(match.name);
                    
                    // Find the corresponding plant option and activate it
                    plantOptions.forEach(option => {
                        if (option.dataset.name.toLowerCase() === match.name.toLowerCase()) {
                            // Remove active class from all options
                            plantOptions.forEach(opt => opt.classList.remove('active'));
                            option.classList.add('active');
                        }
                    });
                    
                    dataStatus.textContent = "Plant found!";
                    dataStatus.style.color = "#4caf50";
                } else {
                    dataStatus.textContent = "Plant not found. Please try another.";
                    dataStatus.style.color = "#f44336";
                }
            }
            
            // Garden layout interaction
            function setupGardenLayout() {
                const gridItems = layoutGrid.querySelectorAll('.grid-item');
                
                gridItems.forEach(item => {
                    item.addEventListener('click', function() {
                        if (this.classList.contains('empty')) {
                            // Add plant to empty spot
                            const activePlant = document.querySelector('.plant-option.active');
                            if (activePlant) {
                                const plantName = activePlant.dataset.name;
                                const plantInitial = plantName.charAt(0);
                                
                                this.textContent = plantInitial;
                                this.classList.remove('empty');
                                this.classList.add(plantName.toLowerCase());
                            }
                        } else {
                            // Remove plant from spot
                            this.textContent = '';
                            this.classList.add('empty');
                            
                            // Remove plant-specific class
                            const classes = this.classList;
                            for (let i = 0; i < classes.length; i++) {
                                if (classes[i] !== 'grid-item') {
                                    this.classList.remove(classes[i]);
                                }
                            }
                        }
                    });
                });
            }
            
            // Save settings to localStorage
            function saveSettings() {
                const activePlant = document.querySelector('.plant-option.active');
                
                if (activePlant) {
                    const settings = {
                        plantName: activePlant.dataset.name
                    };
                    
                    localStorage.setItem('companionPlantingSettings', JSON.stringify(settings));
                    dataStatus.textContent = "Settings saved successfully!";
                    dataStatus.style.color = "#4caf50";
                }
            }
            
            // Load settings from localStorage
            function loadSettings() {
                const saved = localStorage.getItem('companionPlantingSettings');
                
                if (saved) {
                    const settings = JSON.parse(saved);
                    
                    // Find the plant option with matching name and activate it
                    plantOptions.forEach(option => {
                        if (option.dataset.name.toLowerCase() === settings.plantName.toLowerCase()) {
                            option.classList.add('active');
                            updateCompanions(settings.plantName);
                        }
                    });
                    
                    dataStatus.textContent = "Settings loaded successfully!";
                    dataStatus.style.color = "#4caf50";
                } else {
                    dataStatus.textContent = "No saved settings found.";
                    dataStatus.style.color = "#f44336";
                }
            }
            
            // Clear all data from localStorage
            function clearData() {
                localStorage.removeItem('companionPlantingSettings');
                
                // Remove active class from all options
                plantOptions.forEach(option => {
                    option.classList.remove('active');
                });
                
                // Reset to first plant
                const firstPlant = plants[0];
                updateCompanions(firstPlant.name);
                
                dataStatus.textContent = "All data cleared!";
                dataStatus.style.color = "#f44336";
            }
            
            // Event listeners
            searchBtn.addEventListener('click', searchPlants);
            plantSearchInput.addEventListener('keyup', function(event) {
                if (event.key === 'Enter') {
                    searchPlants();
                }
            });
            
            saveBtn.addEventListener('click', saveSettings);
            loadBtn.addEventListener('click', loadSettings);
            clearBtn.addEventListener('click', clearData);
            
            // Plant selection event listeners
            plantOptions.forEach(option => {
                option.addEventListener('click', function() {
                    const plantName = this.dataset.name;
                    setPlant(plantName);
                });
            });
            
            // Initialize with first plant
            if (plants.length > 0) {
                const firstPlant = plants[0];
                updateCompanions(firstPlant.name);
                
                // Activate first plant option
                plantOptions[0].classList.add('active');
            }
            
            // Setup garden layout
            setupGardenLayout();
            
            // Load saved settings on page load
            loadSettings();
        });
    </script>
</body>
</html>

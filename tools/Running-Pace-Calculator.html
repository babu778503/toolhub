<!DOCTYPE html>
<!-- Category: Health & Fitness -->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Running Pace Calculator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #1a2a6c);
            color: white;
            min-height: 100vh;
            padding-top: 50px;
        }

        /* Desktop Styles */
        .desktop-view {
            display: block;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .mobile-view {
            display: none;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            position: relative;
        }

        h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            background: linear-gradient(to right, #4CAF50, #8BC34A, #03DAC6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50px;
            padding: 5px;
        }

        .tab-btn {
            padding: 12px 25px;
            background: transparent;
            border: none;
            color: white;
            cursor: pointer;
            border-radius: 50px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .tab-btn.active {
            background: linear-gradient(to right, #4CAF50, #8BC34A);
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.4);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .container {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
        }

        .calculator-section {
            flex: 1;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
        }

        .results-section {
            flex: 2;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
        }

        h2 {
            margin-bottom: 20px;
            font-size: 1.8rem;
            border-bottom: 2px solid rgba(255, 255, 255, 0.3);
            padding-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        h2 i {
            color: #8BC34A;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }

        input, select {
            width: 100%;
            padding: 12px;
            border-radius: 8px;
            border: none;
            background: rgba(255, 255, 255, 0.15);
            color: white;
            font-size: 1rem;
        }

        input:focus, select:focus {
            outline: 2px solid #4CAF50;
            background: rgba(255, 255, 255, 0.25);
        }

        .time-inputs {
            display: flex;
            gap: 10px;
        }

        .time-inputs input {
            flex: 1;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        button {
            background: linear-gradient(to right, #4CAF50, #8BC34A);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: transform 0.2s, box-shadow 0.2s;
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .btn-secondary {
            background: linear-gradient(to right, #2196F3, #03DAC6);
        }

        .btn-danger {
            background: linear-gradient(to right, #f44336, #e91e63);
        }

        .btn-warning {
            background: linear-gradient(to right, #FF9800, #FF5722);
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .result-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            transition: transform 0.3s;
            position: relative;
            overflow: hidden;
        }

        .result-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: linear-gradient(to bottom, #4CAF50, #8BC34A);
        }

        .result-card:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.15);
        }

        .result-value {
            font-size: 2rem;
            font-weight: bold;
            color: #8BC34A;
            margin: 10px 0;
        }

        .result-label {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .result-icon {
            font-size: 2rem;
            color: #8BC34A;
        }

        .conversion-section {
            margin-top: 30px;
        }

        .conversion-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .conversion-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
        }

        .conversion-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #03DAC6;
            margin: 10px 0;
        }

        .conversion-label {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .examples-section {
            margin-top: 30px;
        }

        .examples-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .example-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
            transition: transform 0.3s;
        }

        .example-card:hover {
            transform: translateY(-3px);
            background: rgba(255, 255, 255, 0.15);
        }

        .example-card h4 {
            color: #8BC34A;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .example-card p {
            font-size: 0.9rem;
            opacity: 0.9;
            margin: 5px 0;
        }

        .chart-container {
            height: 250px;
            margin: 20px 0;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 15px;
            display: flex;
            align-items: flex-end;
            justify-content: space-around;
        }

        .chart-bar {
            width: 40px;
            background: linear-gradient(to top, #4CAF50, #8BC34A);
            border-radius: 5px 5px 0 0;
            position: relative;
            transition: height 0.5s ease;
        }

        .chart-bar-label {
            position: absolute;
            bottom: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.7rem;
            white-space: nowrap;
        }

        .chart-bar-value {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.7rem;
            white-space: nowrap;
        }

        .race-times-section {
            margin-top: 30px;
        }

        .race-times-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .race-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
        }

        .race-distance {
            font-weight: bold;
            color: #8BC34A;
            margin-bottom: 5px;
        }

        .race-time {
            font-size: 1.2rem;
            font-weight: bold;
            color: #03DAC6;
        }

        .race-pace {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .training-section {
            margin-top: 30px;
        }

        .training-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .training-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
        }

        .training-card h4 {
            color: #8BC34A;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .training-card ul {
            padding-left: 20px;
        }

        .training-card li {
            margin-bottom: 5px;
            font-size: 0.9rem;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(76, 175, 80, 0.9);
            color: white;
            padding: 15px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            transform: translateX(200%);
            transition: transform 0.3s ease;
            z-index: 1000;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.error {
            background: rgba(244, 67, 54, 0.9);
        }

        /* Mobile Styles */
        @media (max-width: 768px) {
            body {
                padding-top: 0;
            }

            .desktop-view {
                display: none;
            }

            .mobile-view {
                display: block;
                padding: 15px;
            }

            h1 {
                font-size: 2rem;
                text-align: center;
                margin-bottom: 15px;
            }

            .tabs {
                border-radius: 25px;
                padding: 3px;
                overflow-x: auto;
                white-space: nowrap;
            }

            .tab-btn {
                padding: 10px 15px;
                font-size: 0.9rem;
                display: inline-block;
            }

            .mobile-card {
                background: rgba(255, 255, 255, 0.1);
                backdrop-filter: blur(10px);
                border-radius: 15px;
                padding: 20px;
                margin-bottom: 20px;
                box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            }

            .form-group {
                margin-bottom: 15px;
            }

            input, select {
                padding: 10px;
            }

            .time-inputs {
                flex-direction: column;
            }

            .btn-group {
                flex-direction: column;
            }

            .results-grid {
                grid-template-columns: 1fr;
            }

            .conversion-grid {
                grid-template-columns: 1fr 1fr;
            }

            .examples-grid {
                grid-template-columns: 1fr;
            }

            .race-times-grid {
                grid-template-columns: repeat(3, 1fr);
            }

            .training-grid {
                grid-template-columns: 1fr;
            }

            .chart-container {
                height: 180px;
            }

            .chart-bar {
                width: 20px;
            }
        }

        @media (max-width: 480px) {
            .btn-group {
                gap: 10px;
            }

            .conversion-grid {
                grid-template-columns: 1fr;
            }

            .race-times-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .chart-container {
                height: 150px;
            }
        }
    </style>
</head>
<body>
    <!-- Desktop View -->
    <div class="desktop-view">
        <header>
            <h1><i class="fas fa-running"></i> Running Pace Calculator</h1>
            <p class="subtitle">Calculate your running pace, time, and distance</p>
            
            <div class="tabs">
                <button class="tab-btn active" data-tab="calculator">Calculator</button>
                <button class="tab-btn" data-tab="analytics">Analytics</button>
                <button class="tab-btn" data-tab="training">Training Plans</button>
                <button class="tab-btn" data-tab="races">Race Times</button>
            </div>
        </header>

        <div class="tab-content active" id="calculator-tab">
            <div class="container">
                <section class="calculator-section">
                    <h2><i class="fas fa-calculator"></i> Pace Calculator</h2>
                    
                    <div class="form-group">
                        <label for="calcType">Calculation Type</label>
                        <select id="calcType">
                            <option value="pace">Calculate Pace</option>
                            <option value="time">Calculate Time</option>
                            <option value="distance">Calculate Distance</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="distance">Distance</label>
                        <div style="display: flex; gap: 10px;">
                            <input type="number" id="distance" placeholder="Enter distance" step="0.01">
                            <select id="distanceUnit">
                                <option value="km">Kilometers</option>
                                <option value="miles">Miles</option>
                                <option value="m">Meters</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="time">Time</label>
                        <div class="time-inputs">
                            <input type="number" id="hours" placeholder="Hours" min="0">
                            <input type="number" id="minutes" placeholder="Minutes" min="0" max="59">
                            <input type="number" id="seconds" placeholder="Seconds" min="0" max="59">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="pace">Pace</label>
                        <div class="time-inputs">
                            <input type="number" id="paceMinutes" placeholder="Minutes" min="0">
                            <input type="number" id="paceSeconds" placeholder="Seconds" min="0" max="59">
                            <select id="paceUnit">
                                <option value="km">per km</option>
                                <option value="mile">per mile</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="weight">Weight (kg)</label>
                        <input type="number" id="weight" placeholder="Enter your weight" value="70" min="1">
                    </div>
                    
                    <div class="btn-group">
                        <button id="calculateBtn">
                            <i class="fas fa-calculator"></i> Calculate
                        </button>
                        <button class="btn-secondary" id="resetBtn">
                            <i class="fas fa-redo"></i> Reset
                        </button>
                        <button class="btn-warning" id="saveBtn">
                            <i class="fas fa-save"></i> Save
                        </button>
                    </div>
                </section>

                <section class="results-section">
                    <h2><i class="fas fa-chart-bar"></i> Results</h2>
                    
                    <div class="results-grid">
                        <div class="result-card">
                            <div class="result-icon">
                                <i class="fas fa-tachometer-alt"></i>
                            </div>
                            <div class="result-value" id="paceResult">0:00</div>
                            <div class="result-label">Pace</div>
                        </div>
                        
                        <div class="result-card">
                            <div class="result-icon">
                                <i class="fas fa-clock"></i>
                            </div>
                            <div class="result-value" id="timeResult">0:00:00</div>
                            <div class="result-label">Time</div>
                        </div>
                        
                        <div class="result-card">
                            <div class="result-icon">
                                <i class="fas fa-route"></i>
                            </div>
                            <div class="result-value" id="distanceResult">0.00</div>
                            <div class="result-label">Distance</div>
                        </div>
                        
                        <div class="result-card">
                            <div class="result-icon">
                                <i class="fas fa-fire"></i>
                            </div>
                            <div class="result-value" id="caloriesResult">0</div>
                            <div class="result-label">Calories Burned</div>
                        </div>
                        
                        <div class="result-card">
                            <div class="result-icon">
                                <i class="fas fa-bolt"></i>
                            </div>
                            <div class="result-value" id="speedResult">0.00</div>
                            <div class="result-label">Speed (km/h)</div>
                        </div>
                        
                        <div class="result-card">
                            <div class="result-icon">
                                <i class="fas fa-heart"></i>
                            </div>
                            <div class="result-value" id="heartRateResult">0</div>
                            <div class="result-label">Est. Heart Rate</div>
                        </div>
                    </div>
                    
                    <div class="conversion-section">
                        <h2><i class="fas fa-exchange-alt"></i> Unit Conversions</h2>
                        
                        <div class="conversion-grid">
                            <div class="conversion-card">
                                <div class="conversion-value" id="kmToMiles">0.00</div>
                                <div class="conversion-label">km to miles</div>
                            </div>
                            
                            <div class="conversion-card">
                                <div class="conversion-value" id="milesToKm">0.00</div>
                                <div class="conversion-label">miles to km</div>
                            </div>
                            
                            <div class="conversion-card">
                                <div class="conversion-value" id="mpsToKmph">0.00</div>
                                <div class="conversion-label">m/s to km/h</div>
                            </div>
                            
                            <div class="conversion-card">
                                <div class="conversion-value" id="kmphToMph">0.00</div>
                                <div class="conversion-label">km/h to mph</div>
                            </div>
                            
                            <div class="conversion-card">
                                <div class="conversion-value" id="minPerKmToMinPerMile">0:00</div>
                                <div class="conversion-label">min/km to min/mile</div>
                            </div>
                            
                            <div class="conversion-card">
                                <div class="conversion-value" id="minPerMileToMinPerKm">0:00</div>
                                <div class="conversion-label">min/mile to min/km</div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>

        <div class="tab-content" id="analytics-tab">
            <div class="container">
                <section class="calculator-section">
                    <h2><i class="fas fa-chart-line"></i> Performance Analytics</h2>
                    
                    <div class="form-group">
                        <label for="savedRuns">Saved Runs</label>
                        <select id="savedRuns">
                            <option value="">Select a saved run</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="analysisType">Analysis Type</label>
                        <select id="analysisType">
                            <option value="pace">Pace Progression</option>
                            <option value="distance">Distance Progression</option>
                            <option value="time">Time Progression</option>
                        </select>
                    </div>
                    
                    <div class="btn-group">
                        <button id="analyzeBtn">
                            <i class="fas fa-chart-bar"></i> Analyze
                        </button>
                        <button class="btn-danger" id="clearHistoryBtn">
                            <i class="fas fa-trash"></i> Clear History
                        </button>
                    </div>
                </section>

                <section class="results-section">
                    <h2><i class="fas fa-chart-bar"></i> Performance Chart</h2>
                    
                    <div class="chart-container" id="performanceChart">
                        <!-- Chart will be generated here -->
                    </div>
                    
                    <div class="results-grid">
                        <div class="result-card">
                            <div class="result-icon">
                                <i class="fas fa-arrow-up"></i>
                            </div>
                            <div class="result-value" id="bestPerformance">0:00</div>
                            <div class="result-label">Best Performance</div>
                        </div>
                        
                        <div class="result-card">
                            <div class="result-icon">
                                <i class="fas fa-arrow-down"></i>
                            </div>
                            <div class="result-value" id="worstPerformance">0:00</div>
                            <div class="result-label">Worst Performance</div>
                        </div>
                        
                        <div class="result-card">
                            <div class="result-icon">
                                <i class="fas fa-divide"></i>
                            </div>
                            <div class="result-value" id="averagePerformance">0:00</div>
                            <div class="result-label">Average Performance</div>
                        </div>
                    </div>
                </section>
            </div>
        </div>

        <div class="tab-content" id="training-tab">
            <div class="container">
                <section class="calculator-section">
                    <h2><i class="fas fa-dumbbell"></i> Training Plans</h2>
                    
                    <div class="form-group">
                        <label for="trainingGoal">Training Goal</label>
                        <select id="trainingGoal">
                            <option value="5k">5K Run</option>
                            <option value="10k">10K Run</option>
                            <option value="half">Half Marathon</option>
                            <option value="full">Marathon</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="currentPace">Current Pace (min:sec per km)</label>
                        <div class="time-inputs">
                            <input type="number" id="currentPaceMinutes" placeholder="Minutes" min="0" value="5">
                            <input type="number" id="currentPaceSeconds" placeholder="Seconds" min="0" max="59" value="30">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="targetPace">Target Pace (min:sec per km)</label>
                        <div class="time-inputs">
                            <input type="number" id="targetPaceMinutes" placeholder="Minutes" min="0" value="4">
                            <input type="number" id="targetPaceSeconds" placeholder="Seconds" min="0" max="59" value="30">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="trainingWeeks">Training Weeks</label>
                        <input type="number" id="trainingWeeks" placeholder="Enter weeks" value="12" min="4" max="20">
                    </div>
                    
                    <button id="generatePlanBtn" style="width: 100%; padding: 15px;">
                        <i class="fas fa-clipboard-list"></i> Generate Training Plan
                    </button>
                </section>

                <section class="results-section">
                    <h2><i class="fas fa-clipboard-list"></i> Training Plan</h2>
                    
                    <div class="training-grid" id="trainingPlan">
                        <!-- Training plan will be generated here -->
                    </div>
                </section>
            </div>
        </div>

        <div class="tab-content" id="races-tab">
            <div class="container">
                <section class="calculator-section">
                    <h2><i class="fas fa-trophy"></i> Race Time Predictor</h2>
                    
                    <div class="form-group">
                        <label for="knownDistance">Known Distance</label>
                        <div style="display: flex; gap: 10px;">
                            <input type="number" id="knownDistance" placeholder="Distance" step="0.01" value="5">
                            <select id="knownDistanceUnit">
                                <option value="km">Kilometers</option>
                                <option value="miles">Miles</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="knownTime">Known Time</label>
                        <div class="time-inputs">
                            <input type="number" id="knownHours" placeholder="Hours" min="0" value="0">
                            <input type="number" id="knownMinutes" placeholder="Minutes" min="0" max="59" value="25">
                            <input type="number" id="knownSeconds" placeholder="Seconds" min="0" max="59" value="0">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="raceDistance">Race Distance</label>
                        <div style="display: flex; gap: 10px;">
                            <input type="number" id="raceDistance" placeholder="Distance" step="0.01" value="10">
                            <select id="raceDistanceUnit">
                                <option value="km">Kilometers</option>
                                <option value="miles">Miles</option>
                            </select>
                        </div>
                    </div>
                    
                    <button id="predictBtn" style="width: 100%; padding: 15px;">
                        <i class="fas fa-crystal-ball"></i> Predict Race Time
                    </button>
                </section>

                <section class="results-section">
                    <h2><i class="fas fa-tachometer-alt"></i> Predicted Race Times</h2>
                    
                    <div class="race-times-section">
                        <h3><i class="fas fa-bolt"></i> Standard Distances</h3>
                        
                        <div class="race-times-grid" id="raceTimes">
                            <!-- Race times will be generated here -->
                        </div>
                    </div>
                    
                    <div class="examples-section">
                        <h2><i class="fas fa-lightbulb"></i> Training Tips</h2>
                        
                        <div class="examples-grid">
                            <div class="example-card">
                                <h4><i class="fas fa-walking"></i> Easy Runs</h4>
                                <p>Pace: 1-2 min slower than race pace</p>
                                <p>Volume: 70-80% of weekly mileage</p>
                            </div>
                            
                            <div class="example-card">
                                <h4><i class="fas fa-fire"></i> Tempo Runs</h4>
                                <p>Pace: 15-30 sec slower than 5K pace</p>
                                <p>Volume: 10-15% of weekly mileage</p>
                            </div>
                            
                            <div class="example-card">
                                <h4><i class="fas fa-bolt"></i> Intervals</h4>
                                <p>Pace: 5K-3K race pace</p>
                                <p>Volume: 5-10% of weekly mileage</p>
                            </div>
                            
                            <div class="example-card">
                                <h4><i class="fas fa-moon"></i> Recovery</h4>
                                <p>Pace: Very easy, conversational</p>
                                <p>Volume: As needed for recovery</p>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </div>

    <!-- Mobile View -->
    <div class="mobile-view">
        <h1><i class="fas fa-running"></i> Running Pace Calculator</h1>
        
        <div class="tabs">
            <button class="tab-btn active" data-tab="calculator-mobile">Calculator</button>
            <button class="tab-btn" data-tab="analytics-mobile">Analytics</button>
            <button class="tab-btn" data-tab="training-mobile">Training</button>
            <button class="tab-btn" data-tab="races-mobile">Race Times</button>
        </div>
        
        <div class="tab-content active" id="calculator-mobile-tab">
            <div class="mobile-card">
                <h2><i class="fas fa-calculator"></i> Pace Calculator</h2>
                
                <div class="form-group">
                    <label for="calcTypeMobile">Calculation Type</label>
                    <select id="calcTypeMobile">
                        <option value="pace">Calculate Pace</option>
                        <option value="time">Calculate Time</option>
                        <option value="distance">Calculate Distance</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="distanceMobile">Distance</label>
                    <div style="display: flex; gap: 10px;">
                        <input type="number" id="distanceMobile" placeholder="Enter distance" step="0.01">
                        <select id="distanceUnitMobile">
                            <option value="km">Kilometers</option>
                            <option value="miles">Miles</option>
                            <option value="m">Meters</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="timeMobile">Time</label>
                    <div class="time-inputs">
                        <input type="number" id="hoursMobile" placeholder="Hours" min="0">
                        <input type="number" id="minutesMobile" placeholder="Minutes" min="0" max="59">
                        <input type="number" id="secondsMobile" placeholder="Seconds" min="0" max="59">
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="paceMobile">Pace</label>
                    <div class="time-inputs">
                        <input type="number" id="paceMinutesMobile" placeholder="Minutes" min="0">
                        <input type="number" id="paceSecondsMobile" placeholder="Seconds" min="0" max="59">
                        <select id="paceUnitMobile">
                            <option value="km">per km</option>
                            <option value="mile">per mile</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="weightMobile">Weight (kg)</label>
                    <input type="number" id="weightMobile" placeholder="Enter your weight" value="70" min="1">
                </div>
                
                <div class="btn-group">
                    <button id="calculateBtnMobile">
                        <i class="fas fa-calculator"></i> Calculate
                    </button>
                    <button class="btn-secondary" id="resetBtnMobile">
                        <i class="fas fa-redo"></i> Reset
                    </button>
                    <button class="btn-warning" id="saveBtnMobile">
                        <i class="fas fa-save"></i> Save
                    </button>
                </div>
            </div>
            
            <div class="mobile-card">
                <h2><i class="fas fa-chart-bar"></i> Results</h2>
                
                <div class="results-grid">
                    <div class="result-card">
                        <div class="result-icon">
                            <i class="fas fa-tachometer-alt"></i>
                        </div>
                        <div class="result-value" id="paceResultMobile">0:00</div>
                        <div class="result-label">Pace</div>
                    </div>
                    
                    <div class="result-card">
                        <div class="result-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="result-value" id="timeResultMobile">0:00:00</div>
                        <div class="result-label">Time</div>
                    </div>
                    
                    <div class="result-card">
                        <div class="result-icon">
                            <i class="fas fa-route"></i>
                        </div>
                        <div class="result-value" id="distanceResultMobile">0.00</div>
                        <div class="result-label">Distance</div>
                    </div>
                    
                    <div class="result-card">
                        <div class="result-icon">
                            <i class="fas fa-fire"></i>
                        </div>
                        <div class="result-value" id="caloriesResultMobile">0</div>
                        <div class="result-label">Calories</div>
                    </div>
                    
                    <div class="result-card">
                        <div class="result-icon">
                            <i class="fas fa-bolt"></i>
                        </div>
                        <div class="result-value" id="speedResultMobile">0.00</div>
                        <div class="result-label">Speed</div>
                    </div>
                    
                    <div class="result-card">
                        <div class="result-icon">
                            <i class="fas fa-heart"></i>
                        </div>
                        <div class="result-value" id="heartRateResultMobile">0</div>
                        <div class="result-label">Heart Rate</div>
                    </div>
                </div>
            </div>
            
            <div class="mobile-card">
                <h2><i class="fas fa-exchange-alt"></i> Conversions</h2>
                
                <div class="conversion-grid">
                    <div class="conversion-card">
                        <div class="conversion-value" id="kmToMilesMobile">0.00</div>
                        <div class="conversion-label">km to miles</div>
                    </div>
                    
                    <div class="conversion-card">
                        <div class="conversion-value" id="milesToKmMobile">0.00</div>
                        <div class="conversion-label">miles to km</div>
                    </div>
                    
                    <div class="conversion-card">
                        <div class="conversion-value" id="mpsToKmphMobile">0.00</div>
                        <div class="conversion-label">m/s to km/h</div>
                    </div>
                    
                    <div class="conversion-card">
                        <div class="conversion-value" id="kmphToMphMobile">0.00</div>
                        <div class="conversion-label">km/h to mph</div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="tab-content" id="analytics-mobile-tab">
            <div class="mobile-card">
                <h2><i class="fas fa-chart-line"></i> Performance Analytics</h2>
                
                <div class="form-group">
                    <label for="savedRunsMobile">Saved Runs</label>
                    <select id="savedRunsMobile">
                        <option value="">Select a saved run</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="analysisTypeMobile">Analysis Type</label>
                    <select id="analysisTypeMobile">
                        <option value="pace">Pace Progression</option>
                        <option value="distance">Distance Progression</option>
                        <option value="time">Time Progression</option>
                    </select>
                </div>
                
                <div class="btn-group">
                    <button id="analyzeBtnMobile">
                        <i class="fas fa-chart-bar"></i> Analyze
                    </button>
                    <button class="btn-danger" id="clearHistoryBtnMobile">
                        <i class="fas fa-trash"></i> Clear History
                    </button>
                </div>
            </div>
            
            <div class="mobile-card">
                <h2><i class="fas fa-chart-bar"></i> Performance Chart</h2>
                
                <div class="chart-container" id="performanceChartMobile">
                    <!-- Chart will be generated here -->
                </div>
                
                <div class="results-grid">
                    <div class="result-card">
                        <div class="result-icon">
                            <i class="fas fa-arrow-up"></i>
                        </div>
                        <div class="result-value" id="bestPerformanceMobile">0:00</div>
                        <div class="result-label">Best</div>
                    </div>
                    
                    <div class="result-card">
                        <div class="result-icon">
                            <i class="fas fa-arrow-down"></i>
                        </div>
                        <div class="result-value" id="worstPerformanceMobile">0:00</div>
                        <div class="result-label">Worst</div>
                    </div>
                    
                    <div class="result-card">
                        <div class="result-icon">
                            <i class="fas fa-divide"></i>
                        </div>
                        <div class="result-value" id="averagePerformanceMobile">0:00</div>
                        <div class="result-label">Average</div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="tab-content" id="training-mobile-tab">
            <div class="mobile-card">
                <h2><i class="fas fa-dumbbell"></i> Training Plans</h2>
                
                <div class="form-group">
                    <label for="trainingGoalMobile">Training Goal</label>
                    <select id="trainingGoalMobile">
                        <option value="5k">5K Run</option>
                        <option value="10k">10K Run</option>
                        <option value="half">Half Marathon</option>
                        <option value="full">Marathon</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="currentPaceMobile">Current Pace (min:sec per km)</label>
                    <div class="time-inputs">
                        <input type="number" id="currentPaceMinutesMobile" placeholder="Minutes" min="0" value="5">
                        <input type="number" id="currentPaceSecondsMobile" placeholder="Seconds" min="0" max="59" value="30">
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="targetPaceMobile">Target Pace (min:sec per km)</label>
                    <div class="time-inputs">
                        <input type="number" id="targetPaceMinutesMobile" placeholder="Minutes" min="0" value="4">
                        <input type="number" id="targetPaceSecondsMobile" placeholder="Seconds" min="0" max="59" value="30">
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="trainingWeeksMobile">Training Weeks</label>
                    <input type="number" id="trainingWeeksMobile" placeholder="Enter weeks" value="12" min="4" max="20">
                </div>
                
                <button id="generatePlanBtnMobile" style="width: 100%; padding: 15px;">
                    <i class="fas fa-clipboard-list"></i> Generate Training Plan
                </button>
            </div>
            
            <div class="mobile-card">
                <h2><i class="fas fa-clipboard-list"></i> Training Plan</h2>
                
                <div class="training-grid" id="trainingPlanMobile">
                    <!-- Training plan will be generated here -->
                </div>
            </div>
        </div>
        
        <div class="tab-content" id="races-mobile-tab">
            <div class="mobile-card">
                <h2><i class="fas fa-trophy"></i> Race Time Predictor</h2>
                
                <div class="form-group">
                    <label for="knownDistanceMobile">Known Distance</label>
                    <div style="display: flex; gap: 10px;">
                        <input type="number" id="knownDistanceMobile" placeholder="Distance" step="0.01" value="5">
                        <select id="knownDistanceUnitMobile">
                            <option value="km">Kilometers</option>
                            <option value="miles">Miles</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="knownTimeMobile">Known Time</label>
                    <div class="time-inputs">
                        <input type="number" id="knownHoursMobile" placeholder="Hours" min="0" value="0">
                        <input type="number" id="knownMinutesMobile" placeholder="Minutes" min="0" max="59" value="25">
                        <input type="number" id="knownSecondsMobile" placeholder="Seconds" min="0" max="59" value="0">
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="raceDistanceMobile">Race Distance</label>
                    <div style="display: flex; gap: 10px;">
                        <input type="number" id="raceDistanceMobile" placeholder="Distance" step="0.01" value="10">
                        <select id="raceDistanceUnitMobile">
                            <option value="km">Kilometers</option>
                            <option value="miles">Miles</option>
                        </select>
                    </div>
                </div>
                
                <button id="predictBtnMobile" style="width: 100%; padding: 15px;">
                    <i class="fas fa-crystal-ball"></i> Predict Race Time
                </button>
            </div>
            
            <div class="mobile-card">
                <h2><i class="fas fa-tachometer-alt"></i> Predicted Race Times</h2>
                
                <div class="race-times-grid" id="raceTimesMobile">
                    <!-- Race times will be generated here -->
                </div>
            </div>
            
            <div class="mobile-card">
                <h2><i class="fas fa-lightbulb"></i> Training Tips</h2>
                
                <div class="examples-grid">
                    <div class="example-card">
                        <h4><i class="fas fa-walking"></i> Easy Runs</h4>
                        <p>Pace: 1-2 min slower</p>
                        <p>Volume: 70-80%</p>
                    </div>
                    
                    <div class="example-card">
                        <h4><i class="fas fa-fire"></i> Tempo Runs</h4>
                        <p>Pace: 15-30 sec slower</p>
                        <p>Volume: 10-15%</p>
                    </div>
                    
                    <div class="example-card">
                        <h4><i class="fas fa-bolt"></i> Intervals</h4>
                        <p>Pace: 5K-3K pace</p>
                        <p>Volume: 5-10%</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="notification" id="notification">
        Calculation completed successfully!
    </div>

    <script>
        // DOM Elements
        const calcType = document.getElementById('calcType');
        const calcTypeMobile = document.getElementById('calcTypeMobile');
        const distance = document.getElementById('distance');
        const distanceMobile = document.getElementById('distanceMobile');
        const distanceUnit = document.getElementById('distanceUnit');
        const distanceUnitMobile = document.getElementById('distanceUnitMobile');
        const hours = document.getElementById('hours');
        const hoursMobile = document.getElementById('hoursMobile');
        const minutes = document.getElementById('minutes');
        const minutesMobile = document.getElementById('minutesMobile');
        const seconds = document.getElementById('seconds');
        const secondsMobile = document.getElementById('secondsMobile');
        const paceMinutes = document.getElementById('paceMinutes');
        const paceMinutesMobile = document.getElementById('paceMinutesMobile');
        const paceSeconds = document.getElementById('paceSeconds');
        const paceSecondsMobile = document.getElementById('paceSecondsMobile');
        const paceUnit = document.getElementById('paceUnit');
        const paceUnitMobile = document.getElementById('paceUnitMobile');
        const weight = document.getElementById('weight');
        const weightMobile = document.getElementById('weightMobile');
        const calculateBtn = document.getElementById('calculateBtn');
        const calculateBtnMobile = document.getElementById('calculateBtnMobile');
        const resetBtn = document.getElementById('resetBtn');
        const resetBtnMobile = document.getElementById('resetBtnMobile');
        const saveBtn = document.getElementById('saveBtn');
        const saveBtnMobile = document.getElementById('saveBtnMobile');
        const notification = document.getElementById('notification');
        
        // Result elements
        const paceResult = document.getElementById('paceResult');
        const timeResult = document.getElementById('timeResult');
        const distanceResult = document.getElementById('distanceResult');
        const caloriesResult = document.getElementById('caloriesResult');
        const speedResult = document.getElementById('speedResult');
        const heartRateResult = document.getElementById('heartRateResult');
        const paceResultMobile = document.getElementById('paceResultMobile');
        const timeResultMobile = document.getElementById('timeResultMobile');
        const distanceResultMobile = document.getElementById('distanceResultMobile');
        const caloriesResultMobile = document.getElementById('caloriesResultMobile');
        const speedResultMobile = document.getElementById('speedResultMobile');
        const heartRateResultMobile = document.getElementById('heartRateResultMobile');
        
        // Conversion elements
        const kmToMiles = document.getElementById('kmToMiles');
        const milesToKm = document.getElementById('milesToKm');
        const mpsToKmph = document.getElementById('mpsToKmph');
        const kmphToMph = document.getElementById('kmphToMph');
        const minPerKmToMinPerMile = document.getElementById('minPerKmToMinPerMile');
        const minPerMileToMinPerKm = document.getElementById('minPerMileToMinPerKm');
        const kmToMilesMobile = document.getElementById('kmToMilesMobile');
        const milesToKmMobile = document.getElementById('milesToKmMobile');
        const mpsToKmphMobile = document.getElementById('mpsToKmphMobile');
        const kmphToMphMobile = document.getElementById('kmphToMphMobile');
        
        // Analytics elements
        const savedRuns = document.getElementById('savedRuns');
        const savedRunsMobile = document.getElementById('savedRunsMobile');
        const analyzeBtn = document.getElementById('analyzeBtn');
        const analyzeBtnMobile = document.getElementById('analyzeBtnMobile');
        const clearHistoryBtn = document.getElementById('clearHistoryBtn');
        const clearHistoryBtnMobile = document.getElementById('clearHistoryBtnMobile');
        const bestPerformance = document.getElementById('bestPerformance');
        const worstPerformance = document.getElementById('worstPerformance');
        const averagePerformance = document.getElementById('averagePerformance');
        const bestPerformanceMobile = document.getElementById('bestPerformanceMobile');
        const worstPerformanceMobile = document.getElementById('worstPerformanceMobile');
        const averagePerformanceMobile = document.getElementById('averagePerformanceMobile');
        
        // Training elements
        const trainingGoal = document.getElementById('trainingGoal');
        const trainingGoalMobile = document.getElementById('trainingGoalMobile');
        const currentPaceMinutes = document.getElementById('currentPaceMinutes');
        const currentPaceSeconds = document.getElementById('currentPaceSeconds');
        const currentPaceMinutesMobile = document.getElementById('currentPaceMinutesMobile');
        const currentPaceSecondsMobile = document.getElementById('currentPaceSecondsMobile');
        const targetPaceMinutes = document.getElementById('targetPaceMinutes');
        const targetPaceSeconds = document.getElementById('targetPaceSeconds');
        const targetPaceMinutesMobile = document.getElementById('targetPaceMinutesMobile');
        const targetPaceSecondsMobile = document.getElementById('targetPaceSecondsMobile');
        const trainingWeeks = document.getElementById('trainingWeeks');
        const trainingWeeksMobile = document.getElementById('trainingWeeksMobile');
        const generatePlanBtn = document.getElementById('generatePlanBtn');
        const generatePlanBtnMobile = document.getElementById('generatePlanBtnMobile');
        const trainingPlan = document.getElementById('trainingPlan');
        const trainingPlanMobile = document.getElementById('trainingPlanMobile');
        
        // Race elements
        const knownDistance = document.getElementById('knownDistance');
        const knownDistanceMobile = document.getElementById('knownDistanceMobile');
        const knownDistanceUnit = document.getElementById('knownDistanceUnit');
        const knownDistanceUnitMobile = document.getElementById('knownDistanceUnitMobile');
        const knownHours = document.getElementById('knownHours');
        const knownHoursMobile = document.getElementById('knownHoursMobile');
        const knownMinutes = document.getElementById('knownMinutes');
        const knownMinutesMobile = document.getElementById('knownMinutesMobile');
        const knownSeconds = document.getElementById('knownSeconds');
        const knownSecondsMobile = document.getElementById('knownSecondsMobile');
        const raceDistance = document.getElementById('raceDistance');
        const raceDistanceMobile = document.getElementById('raceDistanceMobile');
        const raceDistanceUnit = document.getElementById('raceDistanceUnit');
        const raceDistanceUnitMobile = document.getElementById('raceDistanceUnitMobile');
        const predictBtn = document.getElementById('predictBtn');
        const predictBtnMobile = document.getElementById('predictBtnMobile');
        const raceTimes = document.getElementById('raceTimes');
        const raceTimesMobile = document.getElementById('raceTimesMobile');
        
        // Saved runs
        let savedRunsData = JSON.parse(localStorage.getItem('runningPaceCalculatorRuns')) || [];
        
        // Initialize the app
        function init() {
            setupTabs();
            setupEventListeners();
            updateInputVisibility();
            updateConversions();
            populateSavedRuns();
        }
        
        // Setup tab switching
        function setupTabs() {
            const tabBtns = document.querySelectorAll('.tab-btn');
            tabBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    // Remove active class from all buttons and content
                    document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                    
                    // Add active class to clicked button
                    btn.classList.add('active');
                    
                    // Show corresponding content
                    const tabName = btn.getAttribute('data-tab');
                    document.getElementById(`${tabName}-tab`).classList.add('active');
                });
            });
        }
        
        // Setup event listeners
        function setupEventListeners() {
            // Calculator tab
            calcType.addEventListener('change', updateInputVisibility);
            calcTypeMobile.addEventListener('change', updateInputVisibility);
            calculateBtn.addEventListener('click', calculate);
            calculateBtnMobile.addEventListener('click', calculate);
            resetBtn.addEventListener('click', resetForm);
            resetBtnMobile.addEventListener('click', resetForm);
            saveBtn.addEventListener('click', saveRun);
            saveBtnMobile.addEventListener('click', saveRun);
            
            // Analytics tab
            analyzeBtn.addEventListener('click', analyzePerformance);
            analyzeBtnMobile.addEventListener('click', analyzePerformance);
            clearHistoryBtn.addEventListener('click', clearHistory);
            clearHistoryBtnMobile.addEventListener('click', clearHistory);
            
            // Training tab
            generatePlanBtn.addEventListener('click', generateTrainingPlan);
            generatePlanBtnMobile.addEventListener('click', generateTrainingPlan);
            
            // Race tab
            predictBtn.addEventListener('click', predictRaceTimes);
            predictBtnMobile.addEventListener('click', predictRaceTimes);
        }
        
        // Update input visibility based on calculation type
        function updateInputVisibility() {
            const type = calcType.value || calcTypeMobile.value;
            
            // Hide all inputs first
            document.getElementById('distance').closest('.form-group').style.display = 'block';
            document.getElementById('distanceMobile').closest('.form-group').style.display = 'block';
            document.querySelector('.time-inputs').closest('.form-group').style.display = 'block';
            document.querySelector('#timeMobile').closest('.form-group').style.display = 'block';
            document.querySelector('#paceMinutes').closest('.form-group').style.display = 'block';
            document.querySelector('#paceMobile').closest('.form-group').style.display = 'block';
            
            // Show relevant inputs based on calculation type
            if (type === 'pace') {
                // Hide pace inputs
                document.querySelector('#paceMinutes').closest('.form-group').style.display = 'none';
                document.querySelector('#paceMobile').closest('.form-group').style.display = 'none';
            } else if (type === 'time') {
                // Hide time inputs
                document.querySelector('.time-inputs').closest('.form-group').style.display = 'none';
                document.querySelector('#timeMobile').closest('.form-group').style.display = 'none';
            } else if (type === 'distance') {
                // Hide distance inputs
                document.getElementById('distance').closest('.form-group').style.display = 'none';
                document.getElementById('distanceMobile').closest('.form-group').style.display = 'none';
            }
        }
        
        // Calculate results
        function calculate() {
            const type = calcType.value || calcTypeMobile.value;
            const dist = parseFloat(distance.value || distanceMobile.value) || 0;
            const distUnit = distanceUnit.value || distanceUnitMobile.value;
            const hrs = parseInt(hours.value || hoursMobile.value) || 0;
            const mins = parseInt(minutes.value || minutesMobile.value) || 0;
            const secs = parseInt(seconds.value || secondsMobile.value) || 0;
            const paceMins = parseInt(paceMinutes.value || paceMinutesMobile.value) || 0;
            const paceSecs = parseInt(paceSeconds.value || paceSecondsMobile.value) || 0;
            const paceUnitVal = paceUnit.value || paceUnitMobile.value;
            const userWeight = parseFloat(weight.value || weightMobile.value) || 70;
            
            // Convert time to seconds
            const totalTimeSecs = hrs * 3600 + mins * 60 + secs;
            
            // Convert distance to kilometers
            let distanceKm = dist;
            if (distUnit === 'miles') {
                distanceKm = dist * 1.60934;
            } else if (distUnit === 'm') {
                distanceKm = dist / 1000;
            }
            
            let pace, time, distanceVal, calories, speed, heartRate;
            
            if (type === 'pace') {
                // Calculate pace
                if (distanceKm > 0 && totalTimeSecs > 0) {
                    const paceSecsPerKm = totalTimeSecs / distanceKm;
                    const paceMinsPart = Math.floor(paceSecsPerKm / 60);
                    const paceSecsPart = Math.round(paceSecsPerKm % 60);
                    pace = `${paceMinsPart}:${paceSecsPart.toString().padStart(2, '0')}`;
                } else {
                    pace = '0:00';
                }
                
                time = formatTime(totalTimeSecs);
                distanceVal = dist.toFixed(2);
                calories = calculateCalories(distanceKm, totalTimeSecs, userWeight);
                speed = calculateSpeed(distanceKm, totalTimeSecs);
                heartRate = calculateHeartRate(pace);
            } else if (type === 'time') {
                // Calculate time
                const paceTotalSecs = paceMins * 60 + paceSecs;
                
                if (paceTotalSecs > 0 && distanceKm > 0) {
                    let timeSecs;
                    if (paceUnitVal === 'mile') {
                        // Convert pace per mile to pace per km
                        const pacePerMileSecs = paceTotalSecs;
                        const pacePerKmSecs = pacePerMileSecs / 1.60934;
                        timeSecs = pacePerKmSecs * distanceKm;
                    } else {
                        timeSecs = paceTotalSecs * distanceKm;
                    }
                    
                    time = formatTime(timeSecs);
                    pace = `${paceMins}:${paceSecs.toString().padStart(2, '0')}`;
                    distanceVal = dist.toFixed(2);
                    calories = calculateCalories(distanceKm, timeSecs, userWeight);
                    speed = calculateSpeed(distanceKm, timeSecs);
                    heartRate = calculateHeartRate(pace);
                } else {
                    time = '0:00:00';
                    pace = '0:00';
                    distanceVal = '0.00';
                    calories = 0;
                    speed = 0;
                    heartRate = 0;
                }
            } else if (type === 'distance') {
                // Calculate distance
                const paceTotalSecs = paceMins * 60 + paceSecs;
                
                if (paceTotalSecs > 0 && totalTimeSecs > 0) {
                    let distanceKmVal;
                    if (paceUnitVal === 'mile') {
                        // Convert pace per mile to pace per km
                        const pacePerMileSecs = paceTotalSecs;
                        const pacePerKmSecs = pacePerMileSecs / 1.60934;
                        distanceKmVal = totalTimeSecs / pacePerKmSecs;
                    } else {
                        distanceKmVal = totalTimeSecs / paceTotalSecs;
                    }
                    
                    // Convert back to original unit
                    if (distUnit === 'miles') {
                        distanceVal = (distanceKmVal / 1.60934).toFixed(2);
                    } else if (distUnit === 'm') {
                        distanceVal = (distanceKmVal * 1000).toFixed(0);
                    } else {
                        distanceVal = distanceKmVal.toFixed(2);
                    }
                    
                    pace = `${paceMins}:${paceSecs.toString().padStart(2, '0')}`;
                    time = formatTime(totalTimeSecs);
                    calories = calculateCalories(distanceKmVal, totalTimeSecs, userWeight);
                    speed = calculateSpeed(distanceKmVal, totalTimeSecs);
                    heartRate = calculateHeartRate(pace);
                } else {
                    distanceVal = '0.00';
                    pace = '0:00';
                    time = '0:00:00';
                    calories = 0;
                    speed = 0;
                    heartRate = 0;
                }
            }
            
            // Update results
            paceResult.textContent = pace;
            timeResult.textContent = time;
            distanceResult.textContent = distanceVal;
            caloriesResult.textContent = Math.round(calories);
            speedResult.textContent = speed.toFixed(2);
            heartRateResult.textContent = Math.round(heartRate);
            
            // Update mobile results
            paceResultMobile.textContent = pace;
            timeResultMobile.textContent = time;
            distanceResultMobile.textContent = distanceVal;
            caloriesResultMobile.textContent = Math.round(calories);
            speedResultMobile.textContent = speed.toFixed(2);
            heartRateResultMobile.textContent = Math.round(heartRate);
            
            // Update conversions
            updateConversions();
            
            showNotification('Calculation completed successfully!');
        }
        
        // Format time as HH:MM:SS
        function formatTime(seconds) {
            const hrs = Math.floor(seconds / 3600);
            const mins = Math.floor((seconds % 3600) / 60);
            const secs = Math.floor(seconds % 60);
            
            if (hrs > 0) {
                return `${hrs}:${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
            } else {
                return `${mins}:${secs.toString().padStart(2, '0')}`;
            }
        }
        
        // Calculate calories burned
        function calculateCalories(distanceKm, timeSecs, weight) {
            // MET value for running (approximate)
            const paceSecsPerKm = timeSecs / distanceKm;
            let met;
            
            if (paceSecsPerKm < 300) { // Under 5 min/km
                met = 12;
            } else if (paceSecsPerKm < 360) { // Under 6 min/km
                met = 10;
            } else if (paceSecsPerKm < 420) { // Under 7 min/km
                met = 9;
            } else if (paceSecsPerKm < 480) { // Under 8 min/km
                met = 8;
            } else {
                met = 7;
            }
            
            // Calories = MET * weight(kg) * time(hours)
            const timeHours = timeSecs / 3600;
            return met * weight * timeHours;
        }
        
        // Calculate speed in km/h
        function calculateSpeed(distanceKm, timeSecs) {
            if (timeSecs <= 0) return 0;
            const timeHours = timeSecs / 3600;
            return distanceKm / timeHours;
        }
        
        // Estimate heart rate based on pace
        function calculateHeartRate(pace) {
            // Simple estimation based on pace
            const [mins, secs] = pace.split(':').map(Number);
            const totalSecs = mins * 60 + secs;
            
            // Assume max heart rate of 220 - age (assume 30 years old)
            const maxHR = 190;
            const restingHR = 60;
            
            // Estimate based on pace (faster = higher % of max HR)
            let intensity;
            if (totalSecs < 240) { // Under 4 min/km
                intensity = 0.85;
            } else if (totalSecs < 300) { // Under 5 min/km
                intensity = 0.75;
            } else if (totalSecs < 360) { // Under 6 min/km
                intensity = 0.65;
            } else {
                intensity = 0.55;
            }
            
            return restingHR + (maxHR - restingHR) * intensity;
        }
        
        // Update conversions
        function updateConversions() {
            // Get values for conversions
            const dist = parseFloat(distance.value || distanceMobile.value) || 1;
            const distUnit = distanceUnit.value || distanceUnitMobile.value;
            const hrs = parseInt(hours.value || hoursMobile.value) || 0;
            const mins = parseInt(minutes.value || minutesMobile.value) || 0;
            const secs = parseInt(seconds.value || secondsMobile.value) || 0;
            const paceMins = parseInt(paceMinutes.value || paceMinutesMobile.value) || 5;
            const paceSecs = parseInt(paceSeconds.value || paceSecondsMobile.value) || 0;
            
            // Convert distance
            let distanceKm = dist;
            if (distUnit === 'miles') {
                distanceKm = dist * 1.60934;
            } else if (distUnit === 'm') {
                distanceKm = dist / 1000;
            }
            
            // Convert time to seconds
            const totalTimeSecs = hrs * 3600 + mins * 60 + secs;
            
            // Calculate conversions
            const miles = distanceKm / 1.60934;
            const km = distanceKm;
            const mps = totalTimeSecs > 0 ? (distanceKm * 1000) / totalTimeSecs : 0;
            const kmph = mps * 3.6;
            const mph = kmph / 1.60934;
            
            // Pace conversions
            const paceTotalSecs = paceMins * 60 + paceSecs;
            const pacePerMileSecs = paceTotalSecs * 1.60934;
            const pacePerMileMins = Math.floor(pacePerMileSecs / 60);
            const pacePerMileSecsRem = Math.round(pacePerMileSecs % 60);
            const pacePerKmFromMile = paceTotalSecs / 1.60934;
            const pacePerKmMins = Math.floor(pacePerKmFromMile / 60);
            const pacePerKmSecsRem = Math.round(pacePerKmFromMile % 60);
            
            // Update conversion displays
            kmToMiles.textContent = miles.toFixed(2);
            milesToKm.textContent = km.toFixed(2);
            mpsToKmph.textContent = kmph.toFixed(2);
            kmphToMph.textContent = mph.toFixed(2);
            minPerKmToMinPerMile.textContent = `${pacePerMileMins}:${pacePerMileSecsRem.toString().padStart(2, '0')}`;
            minPerMileToMinPerKm.textContent = `${pacePerKmMins}:${pacePerKmSecsRem.toString().padStart(2, '0')}`;
            
            // Update mobile conversions
            kmToMilesMobile.textContent = miles.toFixed(2);
            milesToKmMobile.textContent = km.toFixed(2);
            mpsToKmphMobile.textContent = kmph.toFixed(2);
            kmphToMphMobile.textContent = mph.toFixed(2);
        }
        
        // Reset form
        function resetForm() {
            distance.value = '';
            distanceMobile.value = '';
            hours.value = '';
            hoursMobile.value = '';
            minutes.value = '';
            minutesMobile.value = '';
            seconds.value = '';
            secondsMobile.value = '';
            paceMinutes.value = '';
            paceMinutesMobile.value = '';
            paceSeconds.value = '';
            paceSecondsMobile.value = '';
            weight.value = '70';
            weightMobile.value = '70';
            
            // Reset results
            paceResult.textContent = '0:00';
            timeResult.textContent = '0:00:00';
            distanceResult.textContent = '0.00';
            caloriesResult.textContent = '0';
            speedResult.textContent = '0.00';
            heartRateResult.textContent = '0';
            
            // Reset mobile results
            paceResultMobile.textContent = '0:00';
            timeResultMobile.textContent = '0:00:00';
            distanceResultMobile.textContent = '0.00';
            caloriesResultMobile.textContent = '0';
            speedResultMobile.textContent = '0.00';
            heartRateResultMobile.textContent = '0';
            
            showNotification('Form reset successfully!');
        }
        
        // Save run
        function saveRun() {
            const run = {
                id: Date.now(),
                date: new Date().toISOString(),
                distance: distance.value || distanceMobile.value,
                distanceUnit: distanceUnit.value || distanceUnitMobile.value,
                time: `${hours.value || hoursMobile.value}:${minutes.value || minutesMobile.value}:${seconds.value || secondsMobile.value}`,
                pace: paceResult.textContent,
                calories: caloriesResult.textContent,
                speed: speedResult.textContent
            };
            
            savedRunsData.push(run);
            localStorage.setItem('runningPaceCalculatorRuns', JSON.stringify(savedRunsData));
            populateSavedRuns();
            
            showNotification('Run saved successfully!');
        }
        
        // Populate saved runs dropdown
        function populateSavedRuns() {
            savedRuns.innerHTML = '<option value="">Select a saved run</option>';
            savedRunsMobile.innerHTML = '<option value="">Select a saved run</option>';
            
            savedRunsData.forEach(run => {
                const date = new Date(run.date).toLocaleDateString();
                const option = document.createElement('option');
                option.value = run.id;
                option.textContent = `${date} - ${run.distance} ${run.distanceUnit} at ${run.pace} pace`;
                savedRuns.appendChild(option.cloneNode(true));
                savedRunsMobile.appendChild(option);
            });
        }
        
        // Analyze performance
        function analyzePerformance() {
            if (savedRunsData.length === 0) {
                showNotification('No saved runs to analyze!', 'error');
                return;
            }
            
            // Generate performance chart
            generatePerformanceChart();
            
            // Calculate performance stats
            const paces = savedRunsData.map(run => {
                const [mins, secs] = run.pace.split(':').map(Number);
                return mins * 60 + secs;
            });
            
            const bestPace = Math.min(...paces);
            const worstPace = Math.max(...paces);
            const avgPace = paces.reduce((sum, pace) => sum + pace, 0) / paces.length;
            
            // Update stats
            bestPerformance.textContent = formatPace(bestPace);
            worstPerformance.textContent = formatPace(worstPace);
            averagePerformance.textContent = formatPace(avgPace);
            
            // Update mobile stats
            bestPerformanceMobile.textContent = formatPace(bestPace);
            worstPerformanceMobile.textContent = formatPace(worstPace);
            averagePerformanceMobile.textContent = formatPace(avgPace);
            
            showNotification('Performance analysis completed!');
        }
        
        // Generate performance chart
        function generatePerformanceChart() {
            const chartContainer = document.getElementById('performanceChart');
            const chartContainerMobile = document.getElementById('performanceChartMobile');
            
            // Clear existing chart
            chartContainer.innerHTML = '';
            chartContainerMobile.innerHTML = '';
            
            if (savedRunsData.length === 0) {
                chartContainer.innerHTML = '<div style="text-align: center; width: 100%; color: rgba(255,255,255,0.5);">No data available</div>';
                chartContainerMobile.innerHTML = '<div style="text-align: center; width: 100%; color: rgba(255,255,255,0.5);">No data available</div>';
                return;
            }
            
            // Get last 10 runs
            const recentRuns = savedRunsData.slice(-10);
            
            // Calculate max pace for scaling
            const paces = recentRuns.map(run => {
                const [mins, secs] = run.pace.split(':').map(Number);
                return mins * 60 + secs;
            });
            
            const maxPace = Math.max(...paces);
            
            // Create chart bars
            recentRuns.forEach((run, index) => {
                const [mins, secs] = run.pace.split(':').map(Number);
                const paceSecs = mins * 60 + secs;
                const height = maxPace > 0 ? ((maxPace - paceSecs) / maxPace) * 100 : 0;
                
                const bar = document.createElement('div');
                bar.className = 'chart-bar';
                bar.style.height = `${height}%`;
                bar.innerHTML = `
                    <div class="chart-bar-value">${run.pace}</div>
                    <div class="chart-bar-label">${index + 1}</div>
                `;
                
                chartContainer.appendChild(bar.cloneNode(true));
                chartContainerMobile.appendChild(bar);
            });
        }
        
        // Format pace from seconds
        function formatPace(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = Math.round(seconds % 60);
            return `${mins}:${secs.toString().padStart(2, '0')}`;
        }
        
        // Clear history
        function clearHistory() {
            if (confirm('Are you sure you want to clear all saved runs?')) {
                savedRunsData = [];
                localStorage.removeItem('runningPaceCalculatorRuns');
                populateSavedRuns();
                generatePerformanceChart();
                showNotification('History cleared successfully!');
            }
        }
        
        // Generate training plan
        function generateTrainingPlan() {
            const goal = trainingGoal.value || trainingGoalMobile.value;
            const currentPaceMins = parseInt(currentPaceMinutes.value || currentPaceMinutesMobile.value) || 5;
            const currentPaceSecs = parseInt(currentPaceSeconds.value || currentPaceSecondsMobile.value) || 30;
            const targetPaceMins = parseInt(targetPaceMinutes.value || targetPaceMinutesMobile.value) || 4;
            const targetPaceSecs = parseInt(targetPaceSeconds.value || targetPaceSecondsMobile.value) || 30;
            const weeks = parseInt(trainingWeeks.value || trainingWeeksMobile.value) || 12;
            
            const currentPace = currentPaceMins * 60 + currentPaceSecs;
            const targetPace = targetPaceMins * 60 + targetPaceSecs;
            
            const trainingPlanContainer = trainingPlan;
            const trainingPlanContainerMobile = trainingPlanMobile;
            
            trainingPlanContainer.innerHTML = '';
            trainingPlanContainerMobile.innerHTML = '';
            
            // Generate weekly plan
            for (let week = 1; week <= weeks; week++) {
                // Calculate progression
                const progress = (week - 1) / (weeks - 1);
                const weeklyPace = currentPace - (currentPace - targetPace) * progress;
                
                const card = document.createElement('div');
                card.className = 'training-card';
                card.innerHTML = `
                    <h4><i class="fas fa-calendar-alt"></i> Week ${week}</h4>
                    <ul>
                        <li>Easy runs: ${formatPace(weeklyPace + 90)} pace</li>
                        <li>Tempo run: ${formatPace(weeklyPace + 30)} pace</li>
                        <li>Intervals: ${formatPace(weeklyPace)} pace</li>
                        <li>Total volume: ${Math.round(20 + (week * 5))} km</li>
                    </ul>
                `;
                
                trainingPlanContainer.appendChild(card.cloneNode(true));
                trainingPlanContainerMobile.appendChild(card);
            }
            
            showNotification('Training plan generated successfully!');
        }
        
        // Predict race times
        function predictRaceTimes() {
            const knownDist = parseFloat(knownDistance.value || knownDistanceMobile.value) || 5;
            const knownDistUnit = knownDistanceUnit.value || knownDistanceUnitMobile.value;
            const knownHrs = parseInt(knownHours.value || knownHoursMobile.value) || 0;
            const knownMins = parseInt(knownMinutes.value || knownMinutesMobile.value) || 25;
            const knownSecs = parseInt(knownSeconds.value || knownSecondsMobile.value) || 0;
            const raceDist = parseFloat(raceDistance.value || raceDistanceMobile.value) || 10;
            const raceDistUnit = raceDistanceUnit.value || raceDistanceUnitMobile.value;
            
            // Convert to kilometers
            const knownDistanceKm = knownDistUnit === 'miles' ? knownDist * 1.60934 : knownDist;
            const raceDistanceKm = raceDistUnit === 'miles' ? raceDist * 1.60934 : raceDist;
            
            // Convert time to seconds
            const knownTimeSecs = knownHrs * 3600 + knownMins * 60 + knownSecs;
            
            // Calculate pace per km
            const pacePerKm = knownTimeSecs / knownDistanceKm;
            
            // Predict race time using Riegel formula: T2 = T1 * (D2/D1)^1.06
            const predictedTimeSecs = knownTimeSecs * Math.pow(raceDistanceKm / knownDistanceKm, 1.06);
            
            // Generate race times for standard distances
            const standardDistances = [
                { name: '5K', distance: 5 },
                { name: '10K', distance: 10 },
                { name: 'Half Marathon', distance: 21.0975 },
                { name: 'Marathon', distance: 42.195 }
            ];
            
            const raceTimesContainer = raceTimes;
            const raceTimesContainerMobile = raceTimesMobile;
            
            raceTimesContainer.innerHTML = '';
            raceTimesContainerMobile.innerHTML = '';
            
            standardDistances.forEach(dist => {
                const timeSecs = pacePerKm * dist.distance * Math.pow(dist.distance / knownDistanceKm, 0.06);
                const paceSecs = timeSecs / dist.distance;
                
                const card = document.createElement('div');
                card.className = 'race-card';
                card.innerHTML = `
                    <div class="race-distance">${dist.name}</div>
                    <div class="race-time">${formatTime(timeSecs)}</div>
                    <div class="race-pace">${formatPace(paceSecs)}/km</div>
                `;
                
                raceTimesContainer.appendChild(card.cloneNode(true));
                raceTimesContainerMobile.appendChild(card);
            });
            
            showNotification('Race times predicted successfully!');
        }
        
        // Show notification
        function showNotification(message, type = 'success') {
            notification.textContent = message;
            notification.className = `notification ${type === 'error' ? 'error' : ''}`;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }
        
        // Initialize the app when DOM is loaded
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
<!DOCTYPE html>
<!-- Category: Environment -->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Water Purification Timer</title>
    <meta name="description" content="Water Purification Timer helps you track boiling time and chemical treatment duration for safe drinking water. Essential for camping, hiking, and emergency situations.">
    <meta name="keywords" content="water purification timer, water boiling timer, water treatment timer, camping water safety, hiking water purification, emergency water treatment, water purification methods, boil water timer, water safety timer, outdoor water purification">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #e1f5fe, #b3e5fc);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            margin: 0;
        }
        
        .container {
            width: 100%;
            max-width: 800px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            overflow: hidden;
            margin: 0;
        }
        
        header {
            background: linear-gradient(90deg, #0288d1, #03a9f4);
            color: white;
            text-align: center;
            padding: 15px 10px;
            margin: 0;
        }
        
        h1 {
            font-size: 1.8rem;
            margin: 0;
            line-height: 1.2;
        }
        
        .timer {
            padding: 25px 20px;
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #0288d1;
        }
        
        input, select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        input:focus, select:focus {
            border-color: #03a9f4;
            outline: none;
            box-shadow: 0 0 0 2px rgba(3, 169, 244, 0.2);
        }
        
        .btn {
            background: linear-gradient(90deg, #0288d1, #03a9f4);
            color: white;
            border: none;
            padding: 14px 20px;
            font-size: 18px;
            border-radius: 8px;
            cursor: pointer;
            width: 100%;
            font-weight: 600;
            transition: transform 0.2s, box-shadow 0.2s;
            margin-bottom: 10px;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(2, 136, 209, 0.3);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .timer-display {
            margin-top: 25px;
            padding: 20px;
            background: #e1f5fe;
            border-radius: 8px;
            text-align: center;
        }
        
        .timer-display h3 {
            color: #0288d1;
            margin-bottom: 15px;
        }
        
        .time {
            font-size: 4rem;
            font-weight: 700;
            color: #03a9f4;
            margin: 20px 0;
        }
        
        .controls {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        .btn-clear {
            background: linear-gradient(90deg, #5d4037, #795548);
            color: white;
            border: none;
            padding: 10px 15px;
            font-size: 14px;
            border-radius: 8px;
            cursor: pointer;
            flex: 1;
            font-weight: 600;
        }
        
        .btn-export {
            background: linear-gradient(90deg, #388e3c, #4caf50);
            color: white;
            border: none;
            padding: 10px 15px;
            font-size: 14px;
            border-radius: 8px;
            cursor: pointer;
            flex: 1;
            font-weight: 600;
        }
        
        .water-stats {
            display: flex;
            justify-content: space-around;
            margin: 15px 0;
            text-align: center;
        }
        
        .stat-box {
            background: #e1f5fe;
            padding: 10px;
            border-radius: 8px;
            flex: 1;
            margin: 0 5px;
        }
        
        .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #0288d1;
        }
        
        .stat-label {
            font-size: 0.8rem;
            color: #555;
        }
        
        .method-category {
            background: #b3e5fc;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.8rem;
            color: #0288d1;
            margin-left: 10px;
        }
        
        .timer-info {
            margin-top: 15px;
            padding: 15px;
            background: #b3e5fc;
            border-radius: 8px;
        }
        
        .info-title {
            color: #0288d1;
            font-weight: 600;
            margin-bottom: 10px;
        }
        
        .info-content {
            font-size: 0.9rem;
        }
        
        .water-icon {
            font-size: 2rem;
            color: #03a9f4;
            text-align: center;
            margin: 10px 0;
        }
        
        .progress-container {
            height: 20px;
            background: #b3e5fc;
            border-radius: 10px;
            margin: 15px 0;
            overflow: hidden;
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #0288d1, #03a9f4);
            width: 0%;
            transition: width 1s linear;
        }
        
        .timer-history {
            margin-top: 15px;
            padding: 15px;
            background: #e1f5fe;
            border-radius: 8px;
        }
        
        .history-title {
            color: #0288d1;
            font-weight: 600;
            margin-bottom: 10px;
        }
        
        .history-list {
            max-height: 150px;
            overflow-y: auto;
        }
        
        .history-item {
            padding: 8px;
            background: white;
            border-radius: 5px;
            margin-bottom: 5px;
            font-size: 0.8rem;
        }
        
        .timer-controls {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        .control-btn {
            flex: 1;
            padding: 10px;
            border-radius: 8px;
            border: none;
            font-weight: 600;
            cursor: pointer;
        }
        
        .pause-btn {
            background: #ff9800;
            color: white;
        }
        
        .reset-btn {
            background: #f44336;
            color: white;
        }
        
        @media (max-width: 600px) {
            .container {
                border-radius: 0;
                margin: 0;
                width: 100%;
                max-width: 100%;
                padding: 0;
            }
            
            header {
                height: 50px;
                display: flex;
                align-items: center;
                justify-content: center;
                padding: 0;
            }
            
            h1 {
                font-size: 1.4rem;
                padding: 0 10px;
            }
            
            .timer {
                padding: 20px 0;
            }
            
            .time {
                font-size: 3rem;
            }
            
            .water-stats {
                flex-direction: column;
                gap: 10px;
            }
            
            .stat-box {
                margin: 5px 0;
            }
            
            .input-group {
                padding: 0 15px;
            }
            
            .btn {
                margin: 0 15px;
            }
            
            .controls {
                padding: 0 15px;
            }
            
            .timer-display {
                padding: 20px 0;
            }
            
            .timer-controls {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Water Purification Timer</h1>
        </header>
        
        <div class="timer">
            <div class="input-group">
                <label for="method">Purification Method</label>
                <select id="method">
                    <option value="boiling">Boiling</option>
                    <option value="iodine">Iodine Treatment</option>
                    <option value="chlorine">Chlorine Treatment</option>
                    <option value="uv">UV Light</option>
                    <option value="filter">Water Filter</option>
                    <option value="chlorine_dioxide">Chlorine Dioxide</option>
                    <option value="bleach">Bleach Treatment</option>
                </select>
            </div>
            
            <div class="input-group">
                <label for="volume">Water Volume (liters)</label>
                <input type="number" id="volume" placeholder="Enter volume" min="0.1" step="0.1" value="1">
            </div>
            
            <div class="input-group">
                <label for="altitude">Altitude (ft)</label>
                <input type="number" id="altitude" placeholder="Enter altitude if above 6500ft" min="0" value="0">
            </div>
            
            <div class="input-group">
                <label for="temperature">Water Temperature (°F)</label>
                <input type="number" id="temperature" placeholder="Enter current temperature" min="32" max="212" value="70">
            </div>
            
            <button class="btn" onclick="startTimer()">Start Timer</button>
            
            <div class="timer-controls">
                <button class="control-btn pause-btn" onclick="pauseTimer()">Pause</button>
                <button class="control-btn reset-btn" onclick="resetTimer()">Reset</button>
            </div>
            
            <div class="controls">
                <button class="btn-export" onclick="exportTimer()">Export Timer</button>
                <button class="btn-clear" onclick="clearTimer()">Clear Timer</button>
            </div>
            
            <div class="timer-display">
                <div class="water-icon">💧</div>
                <h3>Water Purification Timer</h3>
                
                <div class="water-stats">
                    <div class="stat-box">
                        <div class="stat-value" id="timeRemaining">00:00</div>
                        <div class="stat-label">Time Remaining</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value" id="methodType">Boiling</div>
                        <div class="stat-label">Method</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value" id="volumeValue">1 L</div>
                        <div class="stat-label">Volume</div>
                    </div>
                </div>
                
                <div class="progress-container">
                    <div class="progress-bar" id="progressBar"></div>
                </div>
                
                <div class="time" id="timer">00:00</div>
                
                <div class="timer-info">
                    <div class="info-title">Purification Information</div>
                    <div class="info-content" id="infoContent">
                        Boiling: 1 minute at sea level, 3 minutes at altitudes above 6500 ft. Iodine: 30 minutes contact time. Chlorine: 30 minutes contact time.
                    </div>
                </div>
                
                <div class="timer-history">
                    <div class="history-title">Recent Purifications</div>
                    <div class="history-list" id="historyList">
                        <!-- History items will be added here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let timerInterval = null;
        let timeLeft = 0;
        let originalTime = 0;
        let isPaused = false;

        // Load saved timer on page load
        window.onload = function() {
            const savedMethod = localStorage.getItem('method');
            const savedVolume = localStorage.getItem('volume');
            const savedAltitude = localStorage.getItem('altitude');
            const savedTemperature = localStorage.getItem('temperature');
            const savedTime = localStorage.getItem('timeLeft');
            const savedOriginalTime = localStorage.getItem('originalTime');
            const savedRunning = localStorage.getItem('timerRunning') === 'true';
            const savedHistory = localStorage.getItem('timerHistory');
            
            if (savedMethod) document.getElementById('method').value = savedMethod;
            if (savedVolume) document.getElementById('volume').value = savedVolume;
            if (savedAltitude) document.getElementById('altitude').value = savedAltitude;
            if (savedTemperature) document.getElementById('temperature').value = savedTemperature;
            
            if (savedTime) {
                timeLeft = parseInt(savedTime);
                originalTime = parseInt(savedOriginalTime);
                updateDisplay();
                
                if (savedRunning) {
                    startTimer();
                }
            }
            
            if (savedHistory) {
                const history = JSON.parse(savedHistory);
                renderHistory(history);
            }
        }

        function startTimer() {
            const method = document.getElementById('method').value;
            const volume = parseFloat(document.getElementById('volume').value) || 1;
            const altitude = parseFloat(document.getElementById('altitude').value) || 0;
            const temperature = parseFloat(document.getElementById('temperature').value) || 70;
            
            // Calculate time based on method
            let seconds = 0;
            
            switch(method) {
                case 'boiling':
                    // 1 minute at sea level, 3 minutes at altitudes above 6500 ft
                    seconds = altitude > 6500 ? 180 : 60;
                    break;
                case 'iodine':
                    // 30 minutes contact time
                    seconds = 1800;
                    break;
                case 'chlorine':
                    // 30 minutes contact time
                    seconds = 1800;
                    break;
                case 'uv':
                    // UV treatment takes about 1 minute
                    seconds = 60;
                    break;
                case 'filter':
                    // Filter time depends on volume, approximately 1 minute per liter
                    seconds = volume * 60;
                    break;
                case 'chlorine_dioxide':
                    // 30 minutes contact time
                    seconds = 1800;
                    break;
                case 'bleach':
                    // 30 minutes contact time
                    seconds = 1800;
                    break;
            }
            
            // Adjust for temperature (colder water may need longer)
            if (temperature < 50) {
                seconds = Math.ceil(seconds * 1.2); // 20% more time for cold water
            }
            
            // Save settings to localStorage
            localStorage.setItem('method', method);
            localStorage.setItem('volume', volume);
            localStorage.setItem('altitude', altitude);
            localStorage.setItem('temperature', temperature);
            localStorage.setItem('timeLeft', seconds);
            localStorage.setItem('originalTime', seconds);
            localStorage.setItem('timerRunning', 'true');
            
            // Set timer values
            timeLeft = seconds;
            originalTime = seconds;
            isPaused = false;
            
            // Update display
            updateDisplay();
            
            // Clear any existing interval
            if (timerInterval) {
                clearInterval(timerInterval);
            }
            
            // Start timer
            timerInterval = setInterval(updateTimer, 1000);
        }
        
        function pauseTimer() {
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
                isPaused = true;
                localStorage.setItem('timerRunning', 'false');
            } else if (isPaused) {
                // Resume timer
                isPaused = false;
                localStorage.setItem('timerRunning', 'true');
                timerInterval = setInterval(updateTimer, 1000);
            }
        }
        
        function resetTimer() {
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
            
            timeLeft = originalTime;
            isPaused = false;
            localStorage.setItem('timeLeft', originalTime);
            localStorage.setItem('timerRunning', 'false');
            updateDisplay();
        }
        
        function updateTimer() {
            if (timeLeft <= 0) {
                clearInterval(timerInterval);
                timerInterval = null;
                document.getElementById('timer').textContent = '00:00';
                document.getElementById('timeRemaining').textContent = '00:00';
                document.getElementById('progressBar').style.width = '100%';
                localStorage.setItem('timerRunning', 'false');
                
                // Add to history
                addToHistory();
                
                alert('Water purification complete! Your water is now safe to drink.');
                return;
            }
            
            timeLeft--;
            updateDisplay();
            
            // Save time to localStorage
            localStorage.setItem('timeLeft', timeLeft);
        }
        
        function updateDisplay() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            const timeString = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            document.getElementById('timer').textContent = timeString;
            document.getElementById('timeRemaining').textContent = timeString;
            
            const method = document.getElementById('method').value;
            document.getElementById('methodType').textContent = getMethodName(method);
            
            const volume = parseFloat(document.getElementById('volume').value) || 1;
            document.getElementById('volumeValue').textContent = volume + ' L';
            
            // Update progress bar
            if (originalTime > 0) {
                const progress = ((originalTime - timeLeft) / originalTime) * 100;
                document.getElementById('progressBar').style.width = progress + '%';
            }
            
            // Update information based on method
            let info = '';
            switch(method) {
                case 'boiling':
                    const altitude = parseFloat(document.getElementById('altitude').value) || 0;
                    if (altitude > 6500) {
                        info = 'Boiling: 3 minutes required at altitudes above 6500 ft. This water is now safe to drink.';
                    } else {
                        info = 'Boiling: 1 minute required at sea level. This water is now safe to drink.';
                    }
                    break;
                case 'iodine':
                    info = 'Iodine Treatment: 30 minutes contact time required. Effective against viruses and bacteria.';
                    break;
                case 'chlorine':
                    info = 'Chlorine Treatment: 30 minutes contact time required. Effective against most pathogens.';
                    break;
                case 'uv':
                    info = 'UV Light: 1 minute treatment required. Effective against bacteria, viruses, and protozoa.';
                    break;
                case 'filter':
                    info = 'Water Filter: 1 minute per liter. Effective against bacteria, protozoa, and sediment.';
                    break;
                case 'chlorine_dioxide':
                    info = 'Chlorine Dioxide: 30 minutes contact time required. Effective against bacteria, viruses, and protozoa.';
                    break;
                case 'bleach':
                    info = 'Bleach Treatment: 30 minutes contact time required. Use 8 drops per gallon of clear water.';
                    break;
            }
            
            document.getElementById('infoContent').textContent = info;
        }
        
        function getMethodName(method) {
            switch(method) {
                case 'boiling': return 'Boiling';
                case 'iodine': return 'Iodine';
                case 'chlorine': return 'Chlorine';
                case 'uv': return 'UV Light';
                case 'filter': return 'Water Filter';
                case 'chlorine_dioxide': return 'Chlorine Dioxide';
                case 'bleach': return 'Bleach';
                default: return 'Unknown';
            }
        }
        
        function addToHistory() {
            const method = getMethodName(document.getElementById('method').value);
            const volume = parseFloat(document.getElementById('volume').value) || 1;
            const altitude = parseFloat(document.getElementById('altitude').value) || 0;
            const timestamp = new Date().toLocaleString();
            
            const historyItem = {
                method: method,
                volume: volume,
                altitude: altitude,
                timestamp: timestamp
            };
            
            let history = JSON.parse(localStorage.getItem('timerHistory')) || [];
            history.unshift(historyItem); // Add to beginning of array
            
            // Keep only last 5 items
            if (history.length > 5) {
                history = history.slice(0, 5);
            }
            
            localStorage.setItem('timerHistory', JSON.stringify(history));
            renderHistory(history);
        }
        
        function renderHistory(history) {
            const historyList = document.getElementById('historyList');
            historyList.innerHTML = '';
            
            if (history.length === 0) {
                historyList.innerHTML = '<div class="history-item">No purification history yet</div>';
                return;
            }
            
            history.forEach(item => {
                const historyElement = document.createElement('div');
                historyElement.className = 'history-item';
                historyElement.textContent = `${item.timestamp} - ${item.method} (${item.volume}L, ${item.altitude}ft)`;
                historyList.appendChild(historyElement);
            });
        }
        
        function exportTimer() {
            const method = document.getElementById('method').value;
            const volume = parseFloat(document.getElementById('volume').value) || 1;
            const altitude = parseFloat(document.getElementById('altitude').value) || 0;
            const temperature = parseFloat(document.getElementById('temperature').value) || 70;
            const timeRemaining = document.getElementById('timeRemaining').textContent;
            
            let exportText = `Water Purification Timer\nMethod: ${getMethodName(method)}\nVolume: ${volume} L\nAltitude: ${altitude} ft\nTemperature: ${temperature}°F\nTime Remaining: ${timeRemaining}\n\n`;
            exportText += 'Purification Information:\n';
            
            switch(method) {
                case 'boiling':
                    if (altitude > 6500) {
                        exportText += 'Boiling: 3 minutes required at altitudes above 6500 ft. This water is now safe to drink.';
                    } else {
                        exportText += 'Boiling: 1 minute required at sea level. This water is now safe to drink.';
                    }
                    break;
                case 'iodine':
                    exportText += 'Iodine Treatment: 30 minutes contact time required. Effective against viruses and bacteria.';
                    break;
                case 'chlorine':
                    exportText += 'Chlorine Treatment: 30 minutes contact time required. Effective against most pathogens.';
                    break;
                case 'uv':
                    exportText += 'UV Light: 1 minute treatment required. Effective against bacteria, viruses, and protozoa.';
                    break;
                case 'filter':
                    exportText += 'Water Filter: 1 minute per liter. Effective against bacteria, protozoa, and sediment.';
                    break;
                case 'chlorine_dioxide':
                    exportText += 'Chlorine Dioxide: 30 minutes contact time required. Effective against bacteria, viruses, and protozoa.';
                    break;
                case 'bleach':
                    exportText += 'Bleach Treatment: 30 minutes contact time required. Use 8 drops per gallon of clear water.';
                    break;
            }
            
            // Add history if available
            const history = JSON.parse(localStorage.getItem('timerHistory')) || [];
            if (history.length > 0) {
                exportText += '\nRecent Purifications:\n';
                history.forEach(item => {
                    exportText += `- ${item.timestamp}: ${item.method} (${item.volume}L, ${item.altitude}ft)\n`;
                });
            }
            
            // Create a temporary textarea to copy text
            const textArea = document.createElement('textarea');
            textArea.value = exportText;
            document.body.appendChild(textArea);
            textArea.select();
            document.execCommand('copy');
            document.body.removeChild(textArea);
            
            alert('Water purification timer exported to clipboard!');
        }
        
        function clearTimer() {
            if (confirm('Are you sure you want to clear the timer and all history?')) {
                clearInterval(timerInterval);
                timerInterval = null;
                timeLeft = 0;
                originalTime = 0;
                isPaused = false;
                
                // Clear localStorage
                localStorage.removeItem('timeLeft');
                localStorage.removeItem('originalTime');
                localStorage.removeItem('timerRunning');
                localStorage.removeItem('timerHistory');
                
                // Reset display
                document.getElementById('timer').textContent = '00:00';
                document.getElementById('timeRemaining').textContent = '00:00';
                document.getElementById('progressBar').style.width = '0%';
                document.getElementById('infoContent').textContent = 'Boiling: 1 minute at sea level, 3 minutes at altitudes above 6500 ft. Iodine: 30 minutes contact time. Chlorine: 30 minutes contact time.';
                document.getElementById('historyList').innerHTML = '<div class="history-item">No purification history yet</div>';
            }
        }
    </script>
</body>
</html>
<!DOCTYPE html>
<!-- Category: Environment -->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Pollen Count Tracker - Monitor daily pollen counts and allergen levels with this easy-to-use environmental tool. Track tree, grass, and weed pollen in your area.">
    <meta name="keywords" content="pollen count tracker, pollen monitor, allergen tracker, pollen levels, tree pollen, grass pollen, weed pollen, environmental health, allergy tracker">
    <title>Pollen Count Tracker</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        /* Desktop Styles */
        header {
            background: linear-gradient(to right, #27ae60, #2ecc71);
            color: white;
            padding: 0 20px;
            height: 70px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }

        h1 {
            font-size: 28px;
            font-weight: 600;
            text-align: center;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 1px solid #eee;
        }

        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            font-weight: 500;
            color: #6c757d;
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
        }

        .tab.active {
            color: #27ae60;
            border-bottom: 3px solid #27ae60;
            background: white;
        }

        .tab-content {
            display: none;
            padding: 30px;
        }

        .tab-content.active {
            display: block;
        }

        .input-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        .input-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #2c3e50;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        input, select {
            width: 100%;
            padding: 14px;
            border: 2px solid #e1e5eb;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        input:focus, select:focus {
            outline: none;
            border-color: #27ae60;
            box-shadow: 0 0 0 3px rgba(39, 174, 96, 0.1);
        }

        .button-group {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        button {
            background: linear-gradient(to right, #27ae60, #219653);
            color: white;
            border: none;
            padding: 14px 25px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            flex: 1;
            min-width: 150px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(39, 174, 96, 0.3);
        }

        .reset-btn {
            background: linear-gradient(to right, #3498db, #2c3e50);
        }

        .reset-btn:hover {
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .export-btn {
            background: linear-gradient(to right, #9b59b6, #8e44ad);
        }

        .export-btn:hover {
            box-shadow: 0 5px 15px rgba(155, 89, 182, 0.3);
        }

        .pollen-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        .pollen-card {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s;
            border-top: 4px solid #27ae60;
        }

        .pollen-card:hover {
            transform: translateY(-5px);
        }

        .pollen-card.tree {
            border-top-color: #27ae60;
        }

        .pollen-card.grass {
            border-top-color: #f39c12;
        }

        .pollen-card.weed {
            border-top-color: #8e44ad;
        }

        .pollen-card.mold {
            border-top-color: #3498db;
        }

        .pollen-card.indoor {
            border-top-color: #e74c3c;
        }

        .pollen-card h3 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 18px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .pollen-value {
            font-size: 28px;
            font-weight: 700;
            color: #27ae60;
            margin: 10px 0;
        }

        .pollen-status {
            font-size: 16px;
            font-weight: 600;
            padding: 6px 12px;
            border-radius: 20px;
            display: inline-block;
            margin-top: 8px;
        }

        .low { background-color: #d4edda; color: #155724; }
        .moderate { background-color: #fff3cd; color: #856404; }
        .high { background-color: #ffeaa7; color: #856404; }
        .very-high { background-color: #f8d7da; color: #721c24; }
        .extreme { background-color: #e74c3c; color: white; }

        .interpretation {
            background: #e8f5e9;
            border-left: 4px solid #27ae60;
            padding: 20px;
            border-radius: 0 8px 8px 0;
            margin: 25px 0;
            text-align: left;
        }

        .interpretation h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .interpretation ul {
            padding-left: 20px;
        }

        .interpretation li {
            margin-bottom: 10px;
            color: #27663a;
        }

        .chart-container {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 25px;
            margin: 25px 0;
        }

        .chart-title {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .chart-bars {
            display: flex;
            justify-content: space-around;
            align-items: flex-end;
            height: 200px;
            padding: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .chart-bar {
            width: 50px;
            background: linear-gradient(to top, #27ae60, #219653);
            border-radius: 5px 5px 0 0;
            position: relative;
            transition: height 1s ease-in-out;
        }

        .chart-bar.grass-bar {
            background: linear-gradient(to top, #f39c12, #e67e22);
        }

        .chart-bar.weed-bar {
            background: linear-gradient(to top, #8e44ad, #9b59b6);
        }

        .chart-bar.mold-bar {
            background: linear-gradient(to top, #3498db, #2c3e50);
        }

        .chart-bar.indoor-bar {
            background: linear-gradient(to top, #e74c3c, #c0392b);
        }

        .chart-label {
            text-align: center;
            margin-top: 10px;
            font-weight: 500;
            color: #2c3e50;
        }

        .chart-value {
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-weight: bold;
            color: #2c3e50;
        }

        .data-actions {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .data-actions button {
            flex: 1;
            min-width: 150px;
        }

        .clear-btn {
            background: linear-gradient(to right, #e74c3c, #c0392b);
        }

        .clear-btn:hover {
            box-shadow: 0 5px 15px rgba(231, 76, 60, 0.3);
        }

        .health-tip {
            background: linear-gradient(135deg, #e8f5e9, #d4edda);
            border-radius: 8px;
            padding: 20px;
            margin-top: 25px;
            font-size: 15px;
            color: #2c3e50;
            border-left: 4px solid #27ae60;
        }

        .health-tip h3 {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
            color: #2c3e50;
        }

        .history-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: white;
            border-radius: 15px;
            width: 90%;
            max-width: 700px;
            max-height: 80vh;
            overflow-y: auto;
            padding: 25px;
            position: relative;
        }

        .close-modal {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 24px;
            cursor: pointer;
            color: #777;
        }

        .history-title {
            text-align: center;
            margin-bottom: 20px;
            color: #2c3e50;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .history-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .history-item {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            border-left: 4px solid #27ae60;
        }

        .history-item-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-weight: 600;
            color: #2c3e50;
        }

        .history-item-values {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
        }

        .history-value {
            text-align: center;
            font-size: 14px;
        }

        .history-value-label {
            font-weight: 500;
            color: #777;
        }

        .history-value-data {
            font-weight: 600;
            color: #27ae60;
        }

        .delete-history {
            background: #e74c3c;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            margin-top: 10px;
        }

        .no-history {
            text-align: center;
            color: #777;
            font-style: italic;
            padding: 20px;
        }

        .risk-indicator {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-top: 15px;
            padding: 15px;
            border-radius: 8px;
            background: #fff3cd;
        }

        .risk-icon {
            font-size: 24px;
            color: #856404;
        }

        .risk-text {
            font-weight: 500;
            color: #856404;
        }

        .recommendations {
            background: #fce4ec;
            border-radius: 8px;
            padding: 20px;
            margin-top: 25px;
            border-left: 4px solid #e74c3c;
        }

        .recommendations h3 {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            color: #2c3e50;
        }

        .recommendation-list {
            padding-left: 20px;
        }

        .recommendation-list li {
            margin-bottom: 10px;
            color: #c0392b;
        }

        .progress-tracker {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 25px;
            margin: 25px 0;
        }

        .progress-title {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .progress-charts {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .progress-chart {
            background: white;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .progress-chart h4 {
            text-align: center;
            margin-bottom: 15px;
            color: #2c3e50;
        }

        .progress-line {
            height: 30px;
            background: #e9ecef;
            border-radius: 15px;
            overflow: hidden;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, #27ae60, #219653);
            border-radius: 15px;
            transition: width 1s ease-in-out;
        }

        .progress-target {
            position: absolute;
            top: 0;
            height: 100%;
            width: 2px;
            background: #e74c3c;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            font-size: 14px;
            color: #6c757d;
        }

        /* Mobile Styles */
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            header {
                height: 50px;
                padding: 0 15px;
                margin-bottom: 20px;
                justify-content: center;
            }

            h1 {
                font-size: 18px;
                gap: 8px;
            }

            .tab-content {
                padding: 20px;
            }

            .input-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            input, select {
                padding: 12px;
                font-size: 16px;
            }

            .button-group {
                flex-direction: column;
                gap: 10px;
            }

            button {
                padding: 12px 20px;
                font-size: 14px;
                min-width: auto;
            }

            .pollen-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .pollen-value {
                font-size: 24px;
            }

            .chart-bars {
                flex-direction: column;
                height: auto;
                gap: 20px;
                padding: 20px;
            }

            .chart-bar {
                width: 100%;
                height: 40px !important;
                border-radius: 0 5px 5px 0;
            }

            .chart-value {
                top: 50%;
                left: auto;
                right: -50px;
                transform: translateY(-50%);
            }

            .data-actions {
                flex-direction: column;
            }

            .modal-content {
                width: 95%;
                padding: 20px 15px;
            }

            .history-item-values {
                grid-template-columns: 1fr 1fr;
            }

            .tabs {
                flex-wrap: wrap;
            }

            .tab {
                min-width: 50%;
            }

            .progress-charts {
                grid-template-columns: 1fr;
            }
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 8px;
            color: white;
            font-weight: 500;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 1001;
            transform: translateX(200%);
            transition: transform 0.3s ease-in-out;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
            background: linear-gradient(to right, #27ae60, #219653);
        }

        .notification.error {
            background: linear-gradient(to right, #e74c3c, #c0392b);
        }

        .notification.info {
            background: linear-gradient(to right, #3498db, #2c3e50);
        }

        .allergen-list {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 15px 0;
        }

        .allergen-tag {
            background: #e8f5e9;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .allergen-tag.tree { background: #d4edda; }
        .allergen-tag.grass { background: #fff3cd; }
        .allergen-tag.weed { background: #e8daef; }
        .allergen-tag.mold { background: #e3f2fd; }

        .weather-info {
            display: flex;
            align-items: center;
            gap: 15px;
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .weather-icon {
            font-size: 32px;
            color: #27ae60;
        }

        .weather-details {
            flex: 1;
        }

        .weather-details h4 {
            margin-bottom: 5px;
            color: #2c3e50;
        }

        .weather-details p {
            color: #6c757d;
            margin: 0;
        }

        .season-indicator {
            background: #e3f2fd;
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
            text-align: center;
            font-weight: 500;
            color: #2c3e50;
        }

        .season-indicator i {
            margin-right: 10px;
            color: #3498db;
        }
    </style>
</head>
<body>
    <header>
        <h1><i class="fas fa-seedling"></i> Pollen Count Tracker</h1>
    </header>

    <div class="container">
        <div class="tabs">
            <div class="tab active" data-tab="tracker">Tracker</div>
            <div class="tab" data-tab="history">History</div>
            <div class="tab" data-tab="progress">Progress</div>
            <div class="tab" data-tab="resources">Resources</div>
        </div>

        <div class="tab-content active" id="tracker-tab">
            <div class="input-grid">
                <div class="input-group">
                    <label for="location"><i class="fas fa-map-marker-alt"></i> Location</label>
                    <input type="text" id="location" placeholder="Enter city or zip code">
                </div>
                
                <div class="input-group">
                    <label for="date"><i class="fas fa-calendar"></i> Date</label>
                    <input type="date" id="date">
                </div>
                
                <div class="input-group">
                    <label for="season"><i class="fas fa-cloud-sun"></i> Season</label>
                    <select id="season">
                        <option value="spring">Spring</option>
                        <option value="summer">Summer</option>
                        <option value="fall">Fall</option>
                        <option value="winter">Winter</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label for="weather"><i class="fas fa-thermometer-half"></i> Weather Conditions</label>
                    <select id="weather">
                        <option value="sunny">Sunny</option>
                        <option value="cloudy">Cloudy</option>
                        <option value="rainy">Rainy</option>
                        <option value="windy">Windy</option>
                    </select>
                </div>
            </div>
            
            <div class="button-group">
                <button id="track-btn"><i class="fas fa-search"></i> Track Pollen Counts</button>
                <button id="reset-btn" class="reset-btn"><i class="fas fa-redo"></i> Reset</button>
                <button id="export-btn" class="export-btn"><i class="fas fa-file-export"></i> Export Results</button>
            </div>

            <div class="season-indicator">
                <i class="fas fa-cloud-sun"></i> Current Season: <span id="current-season">Spring</span> - Peak Allergen Season
            </div>

            <div class="weather-info">
                <div class="weather-icon">
                    <i class="fas fa-sun"></i>
                </div>
                <div class="weather-details">
                    <h4>Today's Weather</h4>
                    <p>Sunny, 72°F | Humidity: 45% | Wind: 8 mph</p>
                </div>
            </div>

            <div class="pollen-grid">
                <div class="pollen-card tree">
                    <h3><i class="fas fa-tree"></i> Tree Pollen</h3>
                    <div class="pollen-value" id="tree-pollen">--</div>
                    <div class="pollen-status" id="tree-status">--</div>
                </div>
                
                <div class="pollen-card grass">
                    <h3><i class="fas fa-seedling"></i> Grass Pollen</h3>
                    <div class="pollen-value" id="grass-pollen">--</div>
                    <div class="pollen-status" id="grass-status">--</div>
                </div>
                
                <div class="pollen-card weed">
                    <h3><i class="fas fa-cannabis"></i> Weed Pollen</h3>
                    <div class="pollen-value" id="weed-pollen">--</div>
                    <div class="pollen-status" id="weed-status">--</div>
                </div>
                
                <div class="pollen-card mold">
                    <h3><i class="fas fa-cloud-rain"></i> Mold Spores</h3>
                    <div class="pollen-value" id="mold-spores">--</div>
                    <div class="pollen-status" id="mold-status">--</div>
                </div>
                
                <div class="pollen-card indoor">
                    <h3><i class="fas fa-home"></i> Indoor Allergens</h3>
                    <div class="pollen-value" id="indoor-allergens">--</div>
                    <div class="pollen-status" id="indoor-status">--</div>
                </div>
            </div>

            <div class="chart-container">
                <h3 class="chart-title"><i class="fas fa-chart-bar"></i> Pollen Levels Today</h3>
                <div class="chart-bars">
                    <div class="chart-bar" id="tree-bar" style="height: 0px;">
                        <div class="chart-value" id="tree-bar-value">0</div>
                        <div class="chart-label">Tree</div>
                    </div>
                    <div class="chart-bar grass-bar" id="grass-bar" style="height: 0px;">
                        <div class="chart-value" id="grass-bar-value">0</div>
                        <div class="chart-label">Grass</div>
                    </div>
                    <div class="chart-bar weed-bar" id="weed-bar" style="height: 0px;">
                        <div class="chart-value" id="weed-bar-value">0</div>
                        <div class="chart-label">Weed</div>
                    </div>
                    <div class="chart-bar mold-bar" id="mold-bar" style="height: 0px;">
                        <div class="chart-value" id="mold-bar-value">0</div>
                        <div class="chart-label">Mold</div>
                    </div>
                    <div class="chart-bar indoor-bar" id="indoor-bar" style="height: 0px;">
                        <div class="chart-value" id="indoor-bar-value">0</div>
                        <div class="chart-label">Indoor</div>
                    </div>
                </div>
            </div>

            <div class="interpretation">
                <h3><i class="fas fa-info-circle"></i> Pollen Count Levels</h3>
                <ul>
                    <li><strong>Low (0-15):</strong> Minimal allergy symptoms expected</li>
                    <li><strong>Moderate (16-90):</strong> Some allergy sufferers may experience symptoms</li>
                    <li><strong>High (91-1200):</strong> Many allergy sufferers will experience symptoms</li>
                    <li><strong>Very High (1201-4800):</strong> Most allergy sufferers will experience symptoms</li>
                    <li><strong>Extreme (4801+):</strong> Everyone may experience severe symptoms</li>
                </ul>
            </div>

            <div id="risk-indicator" class="risk-indicator" style="display: none;">
                <i class="fas fa-exclamation-triangle risk-icon"></i>
                <div class="risk-text" id="risk-text">Your pollen exposure risk will be calculated based on current conditions</div>
            </div>

            <div class="recommendations">
                <h3><i class="fas fa-lightbulb"></i> Personalized Recommendations</h3>
                <ul class="recommendation-list" id="recommendations-list">
                    <li>Check pollen counts daily during peak allergy seasons</li>
                    <li>Keep windows closed when pollen counts are high</li>
                    <li>Shower and change clothes after being outdoors</li>
                </ul>
            </div>

            <div class="data-actions">
                <button id="save-btn"><i class="fas fa-save"></i> Save Current Counts</button>
                <button id="clear-btn" class="clear-btn"><i class="fas fa-trash-alt"></i> Clear All Data</button>
            </div>

            <div class="health-tip">
                <h3><i class="fas fa-lightbulb"></i> Environmental Health Tip</h3>
                <p>Pollen counts are typically highest between 5 AM and 10 AM, and again at dusk. Plan outdoor activities for mid-day when counts may be lower. Keep indoor air clean with HEPA filters and maintain humidity between 30-50% to reduce mold growth.</p>
            </div>
        </div>

        <div class="tab-content" id="history-tab">
            <h2 style="text-align: center; margin-bottom: 20px; color: #2c3e50;"><i class="fas fa-history"></i> Pollen Count History</h2>
            <div class="history-list" id="history-list">
                <div class="no-history">No history available. Save your pollen counts to see them here.</div>
            </div>
            <div class="button-group" style="margin-top: 20px;">
                <button id="export-history" class="export-btn"><i class="fas fa-file-export"></i> Export History</button>
                <button id="clear-history" class="clear-btn"><i class="fas fa-trash-alt"></i> Clear History</button>
            </div>
        </div>

        <div class="tab-content" id="progress-tab">
            <h2 style="text-align: center; margin-bottom: 20px; color: #2c3e50;"><i class="fas fa-chart-line"></i> Pollen Pattern Tracker</h2>
            <div class="progress-tracker">
                <h3 class="progress-title"><i class="fas fa-tasks"></i> Your Pollen Exposure Patterns</h3>
                <div class="progress-charts" id="progress-charts">
                    <div class="no-history">No progress data available. Save your pollen counts to track patterns.</div>
                </div>
            </div>
        </div>

        <div class="tab-content" id="resources-tab">
            <h2 style="text-align: center; margin-bottom: 20px; color: #2c3e50;"><i class="fas fa-book"></i> Environmental Resources</h2>
            
            <div class="interpretation">
                <h3><i class="fas fa-info-circle"></i> Understanding Pollen Seasons</h3>
                <p><strong>Tree Pollen:</strong> Most prevalent in spring (March-May)</p>
                <p><strong>Grass Pollen:</strong> Highest in late spring and summer (May-July)</p>
                <p><strong>Weed Pollen:</strong> Peaks in late summer and fall (August-October)</p>
                <p><strong>Mold Spores:</strong> Can be present year-round but peak during humid conditions</p>
            </div>
            
            <div class="health-tip">
                <h3><i class="fas fa-home"></i> Indoor Air Quality Management</h3>
                <ul>
                    <li>Use HEPA air purifiers in bedrooms and living areas</li>
                    <li>Keep indoor humidity between 30-50% to prevent mold growth</li>
                    <li>Vacuum regularly with a HEPA filter</li>
                    <li>Wash bedding weekly in hot water (130°F or higher)</li>
                    <li>Use allergen-proof covers for pillows and mattresses</li>
                </ul>
            </div>
            
            <div class="recommendations">
                <h3><i class="fas fa-cloud-sun"></i> Weather Impact on Pollen</h3>
                <ul class="recommendation-list">
                    <li><strong>Windy days:</strong> Increase pollen dispersal and higher counts</li>
                    <li><strong>Rainy days:</strong> Wash pollen from air but increase mold after</li>
                    <li><strong>Humid days:</strong> Promote mold growth but may keep pollen grounded</li>
                    <li><strong>Dry days:</strong> Favor pollen dispersal, especially during peak hours</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Notification -->
    <div class="notification" id="notification"></div>

    <script>
        // DOM Elements
        const tabs = document.querySelectorAll('.tab');
        const tabContents = document.querySelectorAll('.tab-content');
        const locationInput = document.getElementById('location');
        const dateInput = document.getElementById('date');
        const seasonSelect = document.getElementById('season');
        const weatherSelect = document.getElementById('weather');
        const trackBtn = document.getElementById('track-btn');
        const resetBtn = document.getElementById('reset-btn');
        const exportBtn = document.getElementById('export-btn');
        const treePollen = document.getElementById('tree-pollen');
        const grassPollen = document.getElementById('grass-pollen');
        const weedPollen = document.getElementById('weed-pollen');
        const moldSpores = document.getElementById('mold-spores');
        const indoorAllergens = document.getElementById('indoor-allergens');
        const treeStatus = document.getElementById('tree-status');
        const grassStatus = document.getElementById('grass-status');
        const weedStatus = document.getElementById('weed-status');
        const moldStatus = document.getElementById('mold-status');
        const indoorStatus = document.getElementById('indoor-status');
        const saveBtn = document.getElementById('save-btn');
        const clearBtn = document.getElementById('clear-btn');
        const exportHistoryBtn = document.getElementById('export-history');
        const clearHistoryBtn = document.getElementById('clear-history');
        const historyList = document.getElementById('history-list');
        const riskIndicator = document.getElementById('risk-indicator');
        const riskText = document.getElementById('risk-text');
        const recommendationsList = document.getElementById('recommendations-list');
        const notification = document.getElementById('notification');
        const progressCharts = document.getElementById('progress-charts');
        const currentSeason = document.getElementById('current-season');

        // Chart bars
        const treeBar = document.getElementById('tree-bar');
        const grassBar = document.getElementById('grass-bar');
        const weedBar = document.getElementById('weed-bar');
        const moldBar = document.getElementById('mold-bar');
        const indoorBar = document.getElementById('indoor-bar');
        const treeBarValue = document.getElementById('tree-bar-value');
        const grassBarValue = document.getElementById('grass-bar-value');
        const weedBarValue = document.getElementById('weed-bar-value');
        const moldBarValue = document.getElementById('mold-bar-value');
        const indoorBarValue = document.getElementById('indoor-bar-value');

        // Set default date to today
        window.addEventListener('DOMContentLoaded', () => {
            const today = new Date().toISOString().split('T')[0];
            dateInput.value = today;
            
            // Set current season
            const month = new Date().getMonth();
            let season = 'spring';
            if (month >= 5 && month <= 7) season = 'summer';
            else if (month >= 8 && month <= 10) season = 'fall';
            else if (month >= 11 || month <= 1) season = 'winter';
            seasonSelect.value = season;
            currentSeason.textContent = season.charAt(0).toUpperCase() + season.slice(1);
        });

        // Update season display when changed
        seasonSelect.addEventListener('change', () => {
            const season = seasonSelect.value;
            currentSeason.textContent = season.charAt(0).toUpperCase() + season.slice(1);
        });

        // Tab switching
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const tabName = tab.getAttribute('data-tab');
                
                // Update active tab
                tabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                
                // Show active content
                tabContents.forEach(content => {
                    content.classList.remove('active');
                    if (content.id === `${tabName}-tab`) {
                        content.classList.add('active');
                        if (tabName === 'history') {
                            loadHistory();
                        } else if (tabName === 'progress') {
                            loadProgressData();
                        }
                    }
                });
            });
        });

        // Load saved data on page load
        window.addEventListener('DOMContentLoaded', () => {
            loadSavedData();
            updateChartBars(0, 0, 0, 0, 0);
        });

        // Track pollen counts
        trackBtn.addEventListener('click', () => {
            const location = locationInput.value.trim();
            const date = dateInput.value;
            const season = seasonSelect.value;
            const weather = weatherSelect.value;

            if (!location) {
                showNotification('Please enter a location', 'error');
                return;
            }

            // Generate mock pollen data based on season and weather
            let treeLevel, grassLevel, weedLevel, moldLevel, indoorLevel;
            
            switch(season) {
                case 'spring':
                    treeLevel = Math.floor(Math.random() * 3000) + 500;
                    grassLevel = Math.floor(Math.random() * 1000) + 100;
                    weedLevel = Math.floor(Math.random() * 500);
                    break;
                case 'summer':
                    treeLevel = Math.floor(Math.random() * 500);
                    grassLevel = Math.floor(Math.random() * 4000) + 1000;
                    weedLevel = Math.floor(Math.random() * 1000) + 100;
                    break;
                case 'fall':
                    treeLevel = Math.floor(Math.random() * 500);
                    grassLevel = Math.floor(Math.random() * 1000) + 200;
                    weedLevel = Math.floor(Math.random() * 5000) + 1000;
                    break;
                default: // winter
                    treeLevel = Math.floor(Math.random() * 200);
                    grassLevel = Math.floor(Math.random() * 200);
                    weedLevel = Math.floor(Math.random() * 200);
            }
            
            // Adjust based on weather
            switch(weather) {
                case 'windy':
                    treeLevel = Math.min(5000, treeLevel * 1.5);
                    grassLevel = Math.min(5000, grassLevel * 1.5);
                    weedLevel = Math.min(5000, weedLevel * 1.5);
                    break;
                case 'rainy':
                    treeLevel = treeLevel * 0.7;
                    grassLevel = grassLevel * 0.7;
                    weedLevel = weedLevel * 0.7;
                    moldLevel = Math.floor(Math.random() * 2000) + 500;
                    break;
                default:
                    moldLevel = Math.floor(Math.random() * 1000);
            }
            
            indoorLevel = Math.floor(Math.random() * 500) + 100;

            // Update results
            treePollen.textContent = Math.round(treeLevel);
            grassPollen.textContent = Math.round(grassLevel);
            weedPollen.textContent = Math.round(weedLevel);
            moldSpores.textContent = Math.round(moldLevel || 0);
            indoorAllergens.textContent = Math.round(indoorLevel);

            // Determine statuses
            updateStatuses(treeLevel, grassLevel, weedLevel, moldLevel || 0, indoorLevel);
            
            // Update chart
            updateChartBars(treeLevel, grassLevel, weedLevel, moldLevel || 0, indoorLevel);
            
            // Calculate risk
            calculateRisk(treeLevel, grassLevel, weedLevel, moldLevel || 0, indoorLevel);
            
            // Generate recommendations
            generateRecommendations(treeLevel, grassLevel, weedLevel, moldLevel || 0, indoorLevel);
            
            showNotification('Pollen counts tracked successfully!', 'success');
        });

        // Reset form
        resetBtn.addEventListener('click', () => {
            locationInput.value = '';
            dateInput.value = new Date().toISOString().split('T')[0];
            seasonSelect.value = 'spring';
            weatherSelect.value = 'sunny';
            treePollen.textContent = '--';
            grassPollen.textContent = '--';
            weedPollen.textContent = '--';
            moldSpores.textContent = '--';
            indoorAllergens.textContent = '--';
            treeStatus.textContent = '--';
            grassStatus.textContent = '--';
            weedStatus.textContent = '--';
            moldStatus.textContent = '--';
            indoorStatus.textContent = '--';
            treeStatus.className = 'pollen-status';
            grassStatus.className = 'pollen-status';
            weedStatus.className = 'pollen-status';
            moldStatus.className = 'pollen-status';
            indoorStatus.className = 'pollen-status';
            updateChartBars(0, 0, 0, 0, 0);
            riskIndicator.style.display = 'none';
            recommendationsList.innerHTML = `
                <li>Check pollen counts daily during peak allergy seasons</li>
                <li>Keep windows closed when pollen counts are high</li>
                <li>Shower and change clothes after being outdoors</li>
            `;
            showNotification('Form reset successfully!', 'info');
        });

        // Save data to localStorage
        saveBtn.addEventListener('click', () => {
            const location = locationInput.value.trim();
            const date = dateInput.value;
            const season = seasonSelect.value;
            const weather = weatherSelect.value;
            const treeLevel = parseInt(treePollen.textContent) || 0;
            const grassLevel = parseInt(grassPollen.textContent) || 0;
            const weedLevel = parseInt(weedPollen.textContent) || 0;
            const moldLevel = parseInt(moldSpores.textContent) || 0;
            const indoorLevel = parseInt(indoorAllergens.textContent) || 0;

            if (treeLevel === 0 && grassLevel === 0 && weedLevel === 0 && moldLevel === 0) {
                showNotification('Please track pollen counts first', 'error');
                return;
            }

            const data = {
                location: location,
                date: date,
                season: season,
                weather: weather,
                treeLevel: treeLevel,
                grassLevel: grassLevel,
                weedLevel: weedLevel,
                moldLevel: moldLevel,
                indoorLevel: indoorLevel,
                timestamp: new Date().toLocaleString()
            };
            
            // Get existing history
            let history = JSON.parse(localStorage.getItem('pollenHistory')) || [];
            history.push(data);
            
            // Keep only last 50 entries
            if (history.length > 50) {
                history = history.slice(-50);
            }
            
            localStorage.setItem('pollenHistory', JSON.stringify(history));
            showNotification('Pollen counts saved successfully!', 'success');
        });

        // Clear all data from localStorage
        clearBtn.addEventListener('click', () => {
            if (confirm('Are you sure you want to clear all saved data? This cannot be undone.')) {
                localStorage.removeItem('pollenData');
                localStorage.removeItem('pollenHistory');
                showNotification('All data cleared successfully!', 'info');
            }
        });

        // Export current results
        exportBtn.addEventListener('click', () => {
            const location = locationInput.value.trim();
            const treeLevel = parseInt(treePollen.textContent) || 0;
            const grassLevel = parseInt(grassPollen.textContent) || 0;
            const weedLevel = parseInt(weedPollen.textContent) || 0;
            const moldLevel = parseInt(moldSpores.textContent) || 0;
            const indoorLevel = parseInt(indoorAllergens.textContent) || 0;

            if (treeLevel === 0 && grassLevel === 0 && weedLevel === 0 && moldLevel === 0) {
                showNotification('Please track pollen counts first', 'error');
                return;
            }

            const csvContent = `Pollen Count Report\nDate: ${new Date().toLocaleString()}\nLocation: ${location}\nTree Pollen: ${treeLevel}\nGrass Pollen: ${grassLevel}\nWeed Pollen: ${weedLevel}\nMold Spores: ${moldLevel}\nIndoor Allergens: ${indoorLevel}`;
            
            const blob = new Blob([csvContent], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.setAttribute('hidden', '');
            a.setAttribute('href', url);
            a.setAttribute('download', `pollen_count_${new Date().toISOString().slice(0,10)}.txt`);
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            
            showNotification('Results exported successfully!', 'success');
        });

        // Export history
        exportHistoryBtn.addEventListener('click', () => {
            const history = JSON.parse(localStorage.getItem('pollenHistory')) || [];
            
            if (history.length === 0) {
                showNotification('No history to export', 'error');
                return;
            }
            
            let csvContent = 'Date,Location,Season,Weather,Tree Pollen,Grass Pollen,Weed Pollen,Mold Spores,Indoor Allergens\n';
            history.forEach(entry => {
                csvContent += `"${entry.timestamp}","${entry.location || ''}","${entry.season || ''}","${entry.weather || ''}",${entry.treeLevel},${entry.grassLevel},${entry.weedLevel},${entry.moldLevel},${entry.indoorLevel}\n`;
            });
            
            const blob = new Blob([csvContent], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.setAttribute('hidden', '');
            a.setAttribute('href', url);
            a.setAttribute('download', `pollen_history_${new Date().toISOString().slice(0,10)}.csv`);
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            
            showNotification('History exported successfully!', 'success');
        });

        // Clear history
        clearHistoryBtn.addEventListener('click', () => {
            if (confirm('Are you sure you want to clear all history? This cannot be undone.')) {
                localStorage.removeItem('pollenHistory');
                loadHistory();
                showNotification('History cleared successfully!', 'info');
            }
        });

        // Load saved data from localStorage
        function loadSavedData() {
            const savedData = localStorage.getItem('pollenData');
            if (savedData) {
                const data = JSON.parse(savedData);
                locationInput.value = data.location || '';
                seasonSelect.value = data.season || 'spring';
                weatherSelect.value = data.weather || 'sunny';
            }
        }

        // Update status indicators
        function updateStatuses(tree, grass, weed, mold, indoor) {
            setStatus(treeStatus, tree);
            setStatus(grassStatus, grass);
            setStatus(weedStatus, weed);
            setStatus(moldStatus, mold);
            setStatus(indoorStatus, indoor);
        }

        function setStatus(element, value) {
            let status, statusClass;
            
            if (value <= 15) {
                status = 'Low';
                statusClass = 'low';
            } else if (value <= 90) {
                status = 'Moderate';
                statusClass = 'moderate';
            } else if (value <= 1200) {
                status = 'High';
                statusClass = 'high';
            } else if (value <= 4800) {
                status = 'Very High';
                statusClass = 'very-high';
            } else {
                status = 'Extreme';
                statusClass = 'extreme';
            }
            
            element.textContent = status;
            element.className = 'pollen-status ' + statusClass;
        }

        // Update chart bars with animation
        function updateChartBars(tree, grass, weed, mold, indoor) {
            // Normalize values for chart display (max 5000 for visualization)
            const maxValue = 5000;
            const treeHeight = Math.min(100, (tree / maxValue) * 100);
            const grassHeight = Math.min(100, (grass / maxValue) * 100);
            const weedHeight = Math.min(100, (weed / maxValue) * 100);
            const moldHeight = Math.min(100, (mold / maxValue) * 100);
            const indoorHeight = Math.min(100, (indoor / maxValue) * 100);
            
            treeBar.style.height = `${treeHeight}%`;
            grassBar.style.height = `${grassHeight}%`;
            weedBar.style.height = `${weedHeight}%`;
            moldBar.style.height = `${moldHeight}%`;
            indoorBar.style.height = `${indoorHeight}%`;
            
            treeBarValue.textContent = Math.round(tree);
            grassBarValue.textContent = Math.round(grass);
            weedBarValue.textContent = Math.round(weed);
            moldBarValue.textContent = Math.round(mold);
            indoorBarValue.textContent = Math.round(indoor);
        }

        // Calculate pollen risk
        function calculateRisk(tree, grass, weed, mold, indoor) {
            const maxLevel = Math.max(tree, grass, weed, mold);
            let riskLevel = '';
            let riskMessage = '';
            let backgroundColor = '#fff3cd';
            let iconColor = '#856404';
            let textColor = '#856404';
            
            if (maxLevel <= 15) {
                riskLevel = 'Low Risk';
                riskMessage = 'Minimal allergy symptoms expected today.';
            } else if (maxLevel <= 90) {
                riskLevel = 'Mild Risk';
                riskMessage = 'Some allergy sufferers may experience mild symptoms.';
            } else if (maxLevel <= 1200) {
                riskLevel = 'Moderate Risk';
                riskMessage = 'Many allergy sufferers will experience symptoms. Take precautions.';
            } else if (maxLevel <= 4800) {
                riskLevel = 'High Risk';
                riskMessage = 'Most allergy sufferers will experience significant symptoms. Limit outdoor exposure.';
                backgroundColor = '#f8d7da';
                iconColor = '#721c24';
                textColor = '#721c24';
            } else {
                riskLevel = 'Extreme Risk';
                riskMessage = 'Everyone may experience severe symptoms. Stay indoors if possible.';
                backgroundColor = '#e74c3c';
                iconColor = 'white';
                textColor = 'white';
            }
            
            riskText.innerHTML = `<strong>${riskLevel}:</strong> ${riskMessage}`;
            riskIndicator.style.display = 'flex';
            riskIndicator.style.backgroundColor = backgroundColor;
            document.querySelector('.risk-icon').style.color = iconColor;
            riskText.style.color = textColor;
        }

        // Generate personalized recommendations
        function generateRecommendations(tree, grass, weed, mold, indoor) {
            const maxLevel = Math.max(tree, grass, weed, mold);
            let recommendations = [];
            
            if (maxLevel > 1200) {
                recommendations.push('Stay indoors as much as possible today.');
                recommendations.push('Keep windows and doors closed.');
                recommendations.push('Use air conditioning with a HEPA filter.');
                recommendations.push('Take prescribed allergy medications as directed.');
            } else if (maxLevel > 90) {
                recommendations.push('Limit outdoor activities, especially in the morning.');
                recommendations.push('Shower and change clothes after being outdoors.');
                recommendations.push('Keep car windows closed while driving.');
                recommendations.push('Consider taking allergy medication before going outside.');
            } else if (maxLevel > 15) {
                recommendations.push('Check daily pollen counts before planning outdoor activities.');
                recommendations.push('Wear sunglasses to protect eyes from pollen.');
                recommendations.push('Avoid hanging laundry outside to dry.');
            } else {
                recommendations.push('Enjoy outdoor activities with minimal allergy concerns.');
                recommendations.push('Continue regular allergy management routine.');
            }
            
            // Indoor recommendations
            if (indoor > 300) {
                recommendations.push('Use HEPA air purifiers indoors.');
                recommendations.push('Vacuum regularly with a HEPA filter.');
            }
            
            recommendationsList.innerHTML = recommendations.map(rec => `<li>${rec}</li>`).join('');
        }

        // Load history into tab
        function loadHistory() {
            const history = JSON.parse(localStorage.getItem('pollenHistory')) || [];
            
            if (history.length === 0) {
                historyList.innerHTML = '<div class="no-history">No history available. Save your pollen counts to see them here.</div>';
                return;
            }
            
            let historyHTML = '';
            history.slice().reverse().forEach((entry, index) => {
                const originalIndex = history.length - 1 - index;
                historyHTML += `
                    <div class="history-item">
                        <div class="history-item-header">
                            <span>${entry.timestamp}</span>
                            <button class="delete-history" data-index="${originalIndex}" style="background: #e74c3c; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer; font-size: 12px;">Delete</button>
                        </div>
                        <div class="history-item-values">
                            <div class="history-value">
                                <div class="history-value-label">Tree</div>
                                <div class="history-value-data">${entry.treeLevel}</div>
                            </div>
                            <div class="history-value">
                                <div class="history-value-label">Grass</div>
                                <div class="history-value-data">${entry.grassLevel}</div>
                            </div>
                            <div class="history-value">
                                <div class="history-value-label">Weed</div>
                                <div class="history-value-data">${entry.weedLevel}</div>
                            </div>
                            <div class="history-value">
                                <div class="history-value-label">Mold</div>
                                <div class="history-value-data">${entry.moldLevel}</div>
                            </div>
                        </div>
                        <div style="margin-top: 10px; font-size: 12px; color: #666;">
                            Location: ${entry.location || 'N/A'} | Season: ${entry.season || 'N/A'}
                        </div>
                    </div>
                `;
            });
            
            historyList.innerHTML = historyHTML;
            
            // Add event listeners to delete buttons
            document.querySelectorAll('.delete-history').forEach(button => {
                button.addEventListener('click', function() {
                    const index = parseInt(this.getAttribute('data-index'));
                    deleteHistoryEntry(index);
                });
            });
        }

        // Delete a history entry
        function deleteHistoryEntry(index) {
            let history = JSON.parse(localStorage.getItem('pollenHistory')) || [];
            history.splice(index, 1);
            localStorage.setItem('pollenHistory', JSON.stringify(history));
            loadHistory();
            showNotification('History entry deleted!', 'info');
        }

        // Load progress data
        function loadProgressData() {
            const history = JSON.parse(localStorage.getItem('pollenHistory')) || [];
            
            if (history.length === 0) {
                progressCharts.innerHTML = '<div class="no-history">No progress data available. Save your pollen counts to track patterns.</div>';
                return;
            }
            
            // Calculate averages
            const avgTree = history.reduce((sum, entry) => sum + entry.treeLevel, 0) / history.length;
            const avgGrass = history.reduce((sum, entry) => sum + entry.grassLevel, 0) / history.length;
            const avgWeed = history.reduce((sum, entry) => sum + entry.weedLevel, 0) / history.length;
            const avgMold = history.reduce((sum, entry) => sum + entry.moldLevel, 0) / history.length;
            const avgIndoor = history.reduce((sum, entry) => sum + entry.indoorLevel, 0) / history.length;
            
            // Create progress charts
            let chartsHTML = `
                <div class="progress-chart">
                    <h4>Tree Pollen Average</h4>
                    <div class="progress-line">
                        <div class="progress-fill" style="width: ${Math.min(100, (avgTree / 1000) * 100)}%"></div>
                        <div class="progress-target" style="left: ${(500 / 1000) * 100}%"></div>
                    </div>
                    <div class="progress-info">
                        <span>Average: ${avgTree.toFixed(0)}</span>
                        <span>Target: Low levels</span>
                    </div>
                </div>
                
                <div class="progress-chart">
                    <h4>Grass Pollen Average</h4>
                    <div class="progress-line">
                        <div class="progress-fill" style="width: ${Math.min(100, (avgGrass / 1000) * 100)}%"></div>
                        <div class="progress-target" style="left: ${(500 / 1000) * 100}%"></div>
                    </div>
                    <div class="progress-info">
                        <span>Average: ${avgGrass.toFixed(0)}</span>
                        <span>Target: Low levels</span>
                    </div>
                </div>
                
                <div class="progress-chart">
                    <h4>Weed Pollen Average</h4>
                    <div class="progress-line">
                        <div class="progress-fill" style="width: ${Math.min(100, (avgWeed / 1000) * 100)}%"></div>
                        <div class="progress-target" style="left: ${(500 / 1000) * 100}%"></div>
                    </div>
                    <div class="progress-info">
                        <span>Average: ${avgWeed.toFixed(0)}</span>
                        <span>Target: Low levels</span>
                    </div>
                </div>
                
                <div class="progress-chart">
                    <h4>Mold Spores Average</h4>
                    <div class="progress-line">
                        <div class="progress-fill" style="width: ${Math.min(100, (avgMold / 1000) * 100)}%"></div>
                        <div class="progress-target" style="left: ${(500 / 1000) * 100}%"></div>
                    </div>
                    <div class="progress-info">
                        <span>Average: ${avgMold.toFixed(0)}</span>
                        <span>Target: Low levels</span>
                    </div>
                </div>
            `;
            
            progressCharts.innerHTML = chartsHTML;
        }

        // Show notification
        function showNotification(message, type) {
            notification.textContent = message;
            notification.className = 'notification ' + type;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }
    </script>
</body>
</html>
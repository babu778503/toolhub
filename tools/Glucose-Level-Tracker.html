<!DOCTYPE html>
<!-- Category: Health -->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Glucose Level Tracker - Monitor and track your blood glucose levels with this easy-to-use health tool. Check fasting and post-meal glucose readings.">
    <meta name="keywords" content="glucose level tracker, blood sugar monitor, diabetes tracker, glucose checker, blood glucose monitor, health tool, diabetes management, glucose levels">
    <title>Glucose Level Tracker</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        /* Desktop Styles */
        header {
            background: linear-gradient(to right, #27ae60, #2ecc71);
            color: white;
            padding: 0 20px;
            height: 70px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }

        h1 {
            font-size: 28px;
            font-weight: 600;
            text-align: center;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 1px solid #eee;
        }

        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            font-weight: 500;
            color: #6c757d;
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
        }

        .tab.active {
            color: #27ae60;
            border-bottom: 3px solid #27ae60;
            background: white;
        }

        .tab-content {
            display: none;
            padding: 30px;
        }

        .tab-content.active {
            display: block;
        }

        .input-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        .input-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #2c3e50;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        input, select {
            width: 100%;
            padding: 14px;
            border: 2px solid #e1e5eb;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        input:focus, select:focus {
            outline: none;
            border-color: #27ae60;
            box-shadow: 0 0 0 3px rgba(39, 174, 96, 0.1);
        }

        .button-group {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        button {
            background: linear-gradient(to right, #27ae60, #219653);
            color: white;
            border: none;
            padding: 14px 25px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            flex: 1;
            min-width: 150px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(39, 174, 96, 0.3);
        }

        .reset-btn {
            background: linear-gradient(to right, #3498db, #2c3e50);
        }

        .reset-btn:hover {
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .export-btn {
            background: linear-gradient(to right, #9b59b6, #8e44ad);
        }

        .export-btn:hover {
            box-shadow: 0 5px 15px rgba(155, 89, 182, 0.3);
        }

        .result-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        .result-card {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s;
            border-top: 4px solid #27ae60;
        }

        .result-card:hover {
            transform: translateY(-5px);
        }

        .result-card.fasting-card {
            border-top-color: #f39c12;
        }

        .result-card.postmeal-card {
            border-top-color: #e74c3c;
        }

        .result-card h3 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 18px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .result-value {
            font-size: 28px;
            font-weight: 700;
            color: #27ae60;
            margin: 10px 0;
        }

        .result-status {
            font-size: 16px;
            font-weight: 600;
            padding: 6px 12px;
            border-radius: 20px;
            display: inline-block;
            margin-top: 8px;
        }

        .normal { background-color: #d4edda; color: #155724; }
        .prediabetes { background-color: #fff3cd; color: #856404; }
        .diabetes { background-color: #f8d7da; color: #721c24; }
        .high { background-color: #f8d7da; color: #721c24; }
        .low { background-color: #cce5ff; color: #004085; }

        .interpretation {
            background: #e8f5e9;
            border-left: 4px solid #27ae60;
            padding: 20px;
            border-radius: 0 8px 8px 0;
            margin: 25px 0;
            text-align: left;
        }

        .interpretation h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .interpretation ul {
            padding-left: 20px;
        }

        .interpretation li {
            margin-bottom: 10px;
            color: #27663a;
        }

        .chart-container {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 25px;
            margin: 25px 0;
        }

        .chart-title {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .chart-bars {
            display: flex;
            justify-content: space-around;
            align-items: flex-end;
            height: 200px;
            padding: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .chart-bar {
            width: 60px;
            background: linear-gradient(to top, #27ae60, #219653);
            border-radius: 5px 5px 0 0;
            position: relative;
            transition: height 1s ease-in-out;
        }

        .chart-bar.fasting-bar {
            background: linear-gradient(to top, #f39c12, #e67e22);
        }

        .chart-bar.postmeal-bar {
            background: linear-gradient(to top, #e74c3c, #c0392b);
        }

        .chart-label {
            text-align: center;
            margin-top: 10px;
            font-weight: 500;
            color: #2c3e50;
        }

        .chart-value {
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-weight: bold;
            color: #2c3e50;
        }

        .data-actions {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .data-actions button {
            flex: 1;
            min-width: 150px;
        }

        .clear-btn {
            background: linear-gradient(to right, #e74c3c, #c0392b);
        }

        .clear-btn:hover {
            box-shadow: 0 5px 15px rgba(231, 76, 60, 0.3);
        }

        .health-tip {
            background: linear-gradient(135deg, #e8f5e9, #d4edda);
            border-radius: 8px;
            padding: 20px;
            margin-top: 25px;
            font-size: 15px;
            color: #2c3e50;
            border-left: 4px solid #27ae60;
        }

        .health-tip h3 {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
            color: #2c3e50;
        }

        .history-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: white;
            border-radius: 15px;
            width: 90%;
            max-width: 700px;
            max-height: 80vh;
            overflow-y: auto;
            padding: 25px;
            position: relative;
        }

        .close-modal {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 24px;
            cursor: pointer;
            color: #777;
        }

        .history-title {
            text-align: center;
            margin-bottom: 20px;
            color: #2c3e50;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .history-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .history-item {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            border-left: 4px solid #27ae60;
        }

        .history-item-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-weight: 600;
            color: #2c3e50;
        }

        .history-item-values {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
        }

        .history-value {
            text-align: center;
            font-size: 14px;
        }

        .history-value-label {
            font-weight: 500;
            color: #777;
        }

        .history-value-data {
            font-weight: 600;
            color: #27ae60;
        }

        .delete-history {
            background: #e74c3c;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            margin-top: 10px;
        }

        .no-history {
            text-align: center;
            color: #777;
            font-style: italic;
            padding: 20px;
        }

        .risk-indicator {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-top: 15px;
            padding: 15px;
            border-radius: 8px;
            background: #fff3cd;
        }

        .risk-icon {
            font-size: 24px;
            color: #856404;
        }

        .risk-text {
            font-weight: 500;
            color: #856404;
        }

        .recommendations {
            background: #fce4ec;
            border-radius: 8px;
            padding: 20px;
            margin-top: 25px;
            border-left: 4px solid #e74c3c;
        }

        .recommendations h3 {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            color: #2c3e50;
        }

        .recommendation-list {
            padding-left: 20px;
        }

        .recommendation-list li {
            margin-bottom: 10px;
            color: #c0392b;
        }

        .progress-tracker {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 25px;
            margin: 25px 0;
        }

        .progress-title {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .progress-charts {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .progress-chart {
            background: white;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .progress-chart h4 {
            text-align: center;
            margin-bottom: 15px;
            color: #2c3e50;
        }

        .progress-line {
            height: 30px;
            background: #e9ecef;
            border-radius: 15px;
            overflow: hidden;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, #27ae60, #219653);
            border-radius: 15px;
            transition: width 1s ease-in-out;
        }

        .progress-target {
            position: absolute;
            top: 0;
            height: 100%;
            width: 2px;
            background: #e74c3c;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            font-size: 14px;
            color: #6c757d;
        }

        /* Mobile Styles */
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            header {
                height: 50px;
                padding: 0 15px;
                margin-bottom: 20px;
                justify-content: center;
            }

            h1 {
                font-size: 18px;
                gap: 8px;
            }

            .tab-content {
                padding: 20px;
            }

            .input-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            input, select {
                padding: 12px;
                font-size: 16px;
            }

            .button-group {
                flex-direction: column;
                gap: 10px;
            }

            button {
                padding: 12px 20px;
                font-size: 14px;
                min-width: auto;
            }

            .result-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .result-value {
                font-size: 24px;
            }

            .chart-bars {
                flex-direction: column;
                height: auto;
                gap: 20px;
                padding: 20px;
            }

            .chart-bar {
                width: 100%;
                height: 40px !important;
                border-radius: 0 5px 5px 0;
            }

            .chart-value {
                top: 50%;
                left: auto;
                right: -50px;
                transform: translateY(-50%);
            }

            .data-actions {
                flex-direction: column;
            }

            .modal-content {
                width: 95%;
                padding: 20px 15px;
            }

            .history-item-values {
                grid-template-columns: 1fr 1fr;
            }

            .tabs {
                flex-wrap: wrap;
            }

            .tab {
                min-width: 50%;
            }

            .progress-charts {
                grid-template-columns: 1fr;
            }
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 8px;
            color: white;
            font-weight: 500;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 1001;
            transform: translateX(200%);
            transition: transform 0.3s ease-in-out;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
            background: linear-gradient(to right, #27ae60, #219653);
        }

        .notification.error {
            background: linear-gradient(to right, #e74c3c, #c0392b);
        }

        .notification.info {
            background: linear-gradient(to right, #3498db, #2c3e50);
        }
    </style>
</head>
<body>
    <header>
        <h1><i class="fas fa-vial"></i> Glucose Level Tracker</h1>
    </header>

    <div class="container">
        <div class="tabs">
            <div class="tab active" data-tab="tracker">Tracker</div>
            <div class="tab" data-tab="history">History</div>
            <div class="tab" data-tab="progress">Progress</div>
            <div class="tab" data-tab="resources">Resources</div>
        </div>

        <div class="tab-content active" id="tracker-tab">
            <div class="input-grid">
                <div class="input-group">
                    <label for="glucose"><i class="fas fa-vial"></i> Glucose Level (mg/dL)</label>
                    <input type="number" id="glucose" placeholder="Enter glucose level" min="0">
                </div>
                
                <div class="input-group">
                    <label for="meal-time"><i class="fas fa-utensils"></i> Meal Time</label>
                    <select id="meal-time">
                        <option value="">Select Meal Time</option>
                        <option value="fasting">Fasting (8+ hours)</option>
                        <option value="before-meal">Before Meal</option>
                        <option value="1-hour">1 Hour After Meal</option>
                        <option value="2-hour">2 Hours After Meal</option>
                        <option value="random">Random</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label for="date"><i class="fas fa-calendar"></i> Date & Time</label>
                    <input type="datetime-local" id="date">
                </div>
                
                <div class="input-group">
                    <label for="medication"><i class="fas fa-capsules"></i> Medication Taken?</label>
                    <select id="medication">
                        <option value="">Select</option>
                        <option value="yes">Yes</option>
                        <option value="no">No</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label for="exercise"><i class="fas fa-running"></i> Exercise Before?</label>
                    <select id="exercise">
                        <option value="">Select</option>
                        <option value="yes">Yes</option>
                        <option value="no">No</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label for="notes"><i class="fas fa-sticky-note"></i> Notes</label>
                    <input type="text" id="notes" placeholder="Any additional notes">
                </div>
            </div>
            
            <div class="button-group">
                <button id="calculate-btn"><i class="fas fa-calculator"></i> Check Glucose Level</button>
                <button id="reset-btn" class="reset-btn"><i class="fas fa-redo"></i> Reset</button>
                <button id="export-btn" class="export-btn"><i class="fas fa-file-export"></i> Export Results</button>
            </div>

            <div class="result-grid">
                <div class="result-card">
                    <h3><i class="fas fa-vial"></i> Glucose Level</h3>
                    <div class="result-value" id="glucose-result">-- mg/dL</div>
                    <div class="result-status" id="glucose-status">Enter values to check</div>
                </div>
                
                <div class="result-card fasting-card">
                    <h3><i class="fas fa-moon"></i> Fasting Range</h3>
                    <div class="result-value" id="fasting-result">70-100 mg/dL</div>
                    <div class="result-status normal">Normal Range</div>
                </div>
                
                <div class="result-card postmeal-card">
                    <h3><i class="fas fa-sun"></i> Post-Meal Range</h3>
                    <div class="result-value" id="postmeal-result"><140 mg/dL</div>
                    <div class="result-status normal">Normal Range</div>
                </div>
            </div>

            <div class="chart-container">
                <h3 class="chart-title"><i class="fas fa-chart-bar"></i> Glucose Level Comparison</h3>
                <div class="chart-bars">
                    <div class="chart-bar fasting-bar" id="fasting-bar" style="height: 50%;">
                        <div class="chart-value" id="fasting-bar-value">100</div>
                        <div class="chart-label">Fasting</div>
                    </div>
                    <div class="chart-bar" id="glucose-bar" style="height: 0px;">
                        <div class="chart-value" id="glucose-bar-value">0</div>
                        <div class="chart-label">Your Level</div>
                    </div>
                    <div class="chart-bar postmeal-bar" id="postmeal-bar" style="height: 70%;">
                        <div class="chart-value" id="postmeal-bar-value">140</div>
                        <div class="chart-label">Post-Meal</div>
                    </div>
                </div>
            </div>

            <div class="interpretation">
                <h3><i class="fas fa-info-circle"></i> Glucose Level Guidelines</h3>
                <ul>
                    <li><strong>Normal Fasting:</strong> 70-99 mg/dL</li>
                    <li><strong>Prediabetes Fasting:</strong> 100-125 mg/dL</li>
                    <li><strong>Diabetes Fasting:</strong> 126 mg/dL or higher</li>
                    <li><strong>Normal 2 Hours After Meal:</strong> Less than 140 mg/dL</li>
                    <li><strong>Prediabetes 2 Hours After Meal:</strong> 140-199 mg/dL</li>
                    <li><strong>Diabetes 2 Hours After Meal:</strong> 200 mg/dL or higher</li>
                    <li><strong>Hypoglycemia:</strong> Less than 70 mg/dL (Low Blood Sugar)</li>
                </ul>
            </div>

            <div id="risk-indicator" class="risk-indicator" style="display: none;">
                <i class="fas fa-exclamation-triangle risk-icon"></i>
                <div class="risk-text" id="risk-text">Your glucose level risk will be calculated based on your results</div>
            </div>

            <div class="recommendations">
                <h3><i class="fas fa-lightbulb"></i> Personalized Recommendations</h3>
                <ul class="recommendation-list" id="recommendations-list">
                    <li>Enter your glucose level to receive personalized health recommendations</li>
                </ul>
            </div>

            <div class="data-actions">
                <button id="save-btn"><i class="fas fa-save"></i> Save Current Reading</button>
                <button id="clear-btn" class="clear-btn"><i class="fas fa-trash-alt"></i> Clear All Data</button>
            </div>

            <div class="health-tip">
                <h3><i class="fas fa-lightbulb"></i> Health Tip</h3>
                <p>For accurate glucose readings, test at consistent times each day. Wash your hands before testing and follow your healthcare provider's instructions. Keep a log of your readings, meals, and activities to identify patterns.</p>
            </div>
        </div>

        <div class="tab-content" id="history-tab">
            <h2 style="text-align: center; margin-bottom: 20px; color: #2c3e50;"><i class="fas fa-history"></i> Glucose History</h2>
            <div class="history-list" id="history-list">
                <div class="no-history">No history available. Save your readings to see them here.</div>
            </div>
            <div class="button-group" style="margin-top: 20px;">
                <button id="export-history" class="export-btn"><i class="fas fa-file-export"></i> Export History</button>
                <button id="clear-history" class="clear-btn"><i class="fas fa-trash-alt"></i> Clear History</button>
            </div>
        </div>

        <div class="tab-content" id="progress-tab">
            <h2 style="text-align: center; margin-bottom: 20px; color: #2c3e50;"><i class="fas fa-chart-line"></i> Progress Tracker</h2>
            <div class="progress-tracker">
                <h3 class="progress-title"><i class="fas fa-tasks"></i> Your Progress Goals</h3>
                <div class="progress-charts" id="progress-charts">
                    <div class="no-history">No progress data available. Save your readings to track progress.</div>
                </div>
            </div>
        </div>

        <div class="tab-content" id="resources-tab">
            <h2 style="text-align: center; margin-bottom: 20px; color: #2c3e50;"><i class="fas fa-book"></i> Health Resources</h2>
            
            <div class="interpretation">
                <h3><i class="fas fa-vial"></i> Understanding Glucose Levels</h3>
                <p>Blood glucose (blood sugar) is the amount of glucose present in your blood at any given time. Glucose is a vital source of energy for your body's cells and is carefully regulated by hormones like insulin.</p>
                <p>Monitoring your glucose levels helps you understand how food, activity, stress, illness, and medications affect your blood sugar. This information is crucial for managing diabetes and preventing complications.</p>
            </div>
            
            <div class="health-tip">
                <h3><i class="fas fa-apple-alt"></i> Diabetes-Friendly Foods</h3>
                <ul>
                    <li>Non-starchy vegetables (broccoli, spinach, peppers)</li>
                    <li>Lean proteins (chicken, fish, tofu)</li>
                    <li>Whole grains (quinoa, brown rice, oats)</li>
                    <li>Healthy fats (avocados, nuts, olive oil)</li>
                    <li>Low-glycemic fruits (berries, apples, pears)</li>
                    <li>Legumes (beans, lentils, chickpeas)</li>
                </ul>
            </div>
            
            <div class="recommendations">
                <h3><i class="fas fa-running"></i> Lifestyle Management Tips</h3>
                <ul class="recommendation-list">
                    <li>Monitor your glucose levels regularly as recommended by your healthcare provider</li>
                    <li>Follow a consistent meal plan with balanced carbohydrates</li>
                    <li>Engage in regular physical activity (at least 150 minutes per week)</li>
                    <li>Maintain a healthy weight through diet and exercise</li>
                    <li>Take medications as prescribed and on time</li>
                    <li>Manage stress through relaxation techniques</li>
                    <li>Get adequate sleep (7-9 hours per night)</li>
                    <li>Stay hydrated and limit sugary beverages</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Notification -->
    <div class="notification" id="notification"></div>

    <script>
        // DOM Elements
        const tabs = document.querySelectorAll('.tab');
        const tabContents = document.querySelectorAll('.tab-content');
        const glucoseInput = document.getElementById('glucose');
        const mealTimeSelect = document.getElementById('meal-time');
        const dateInput = document.getElementById('date');
        const medicationSelect = document.getElementById('medication');
        const exerciseSelect = document.getElementById('exercise');
        const notesInput = document.getElementById('notes');
        const calculateBtn = document.getElementById('calculate-btn');
        const resetBtn = document.getElementById('reset-btn');
        const exportBtn = document.getElementById('export-btn');
        const glucoseResult = document.getElementById('glucose-result');
        const glucoseStatus = document.getElementById('glucose-status');
        const saveBtn = document.getElementById('save-btn');
        const clearBtn = document.getElementById('clear-btn');
        const exportHistoryBtn = document.getElementById('export-history');
        const clearHistoryBtn = document.getElementById('clear-history');
        const historyList = document.getElementById('history-list');
        const riskIndicator = document.getElementById('risk-indicator');
        const riskText = document.getElementById('risk-text');
        const recommendationsList = document.getElementById('recommendations-list');
        const notification = document.getElementById('notification');
        const progressCharts = document.getElementById('progress-charts');

        // Chart bars
        const glucoseBar = document.getElementById('glucose-bar');
        const glucoseBarValue = document.getElementById('glucose-bar-value');

        // Set default date to current time
        window.addEventListener('DOMContentLoaded', () => {
            const now = new Date();
            const year = now.getFullYear();
            const month = String(now.getMonth() + 1).padStart(2, '0');
            const day = String(now.getDate()).padStart(2, '0');
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            dateInput.value = `${year}-${month}-${day}T${hours}:${minutes}`;
        });

        // Tab switching
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const tabName = tab.getAttribute('data-tab');
                
                // Update active tab
                tabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                
                // Show active content
                tabContents.forEach(content => {
                    content.classList.remove('active');
                    if (content.id === `${tabName}-tab`) {
                        content.classList.add('active');
                        if (tabName === 'history') {
                            loadHistory();
                        } else if (tabName === 'progress') {
                            loadProgressData();
                        }
                    }
                });
            });
        });

        // Load saved data on page load
        window.addEventListener('DOMContentLoaded', () => {
            loadSavedData();
            updateChartBars(0);
        });

        // Check glucose level
        calculateBtn.addEventListener('click', () => {
            const glucose = parseFloat(glucoseInput.value);
            const mealTime = mealTimeSelect.value;

            if (isNaN(glucose)) {
                showNotification('Please enter a valid glucose level', 'error');
                return;
            }

            // Update results
            glucoseResult.textContent = `${glucose} mg/dL`;

            // Determine status
            updateStatus(glucose, mealTime);
            
            // Update chart
            updateChartBars(glucose);
            
            // Calculate risk
            calculateRisk(glucose);
            
            // Generate recommendations
            generateRecommendations(glucose, mealTime);
            
            showNotification('Glucose level checked successfully!', 'success');
        });

        // Reset form
        resetBtn.addEventListener('click', () => {
            glucoseInput.value = '';
            mealTimeSelect.value = '';
            medicationSelect.value = '';
            exerciseSelect.value = '';
            notesInput.value = '';
            glucoseResult.textContent = '-- mg/dL';
            glucoseStatus.textContent = 'Enter values to check';
            glucoseStatus.className = 'result-status';
            riskIndicator.style.display = 'none';
            recommendationsList.innerHTML = '<li>Enter your glucose level to receive personalized health recommendations</li>';
            updateChartBars(0);
            showNotification('Form reset successfully!', 'info');
        });

        // Save data to localStorage
        saveBtn.addEventListener('click', () => {
            const glucose = parseFloat(glucoseInput.value);
            const mealTime = mealTimeSelect.value;
            const date = dateInput.value;
            const medication = medicationSelect.value;
            const exercise = exerciseSelect.value;
            const notes = notesInput.value;

            if (isNaN(glucose)) {
                showNotification('Please check glucose level first', 'error');
                return;
            }

            const data = {
                glucose: glucose,
                mealTime: mealTime,
                date: date,
                medication: medication,
                exercise: exercise,
                notes: notes,
                timestamp: new Date().toLocaleString()
            };
            
            // Get existing history
            let history = JSON.parse(localStorage.getItem('glucoseHistory')) || [];
            history.push(data);
            
            // Keep only last 50 entries
            if (history.length > 50) {
                history = history.slice(-50);
            }
            
            localStorage.setItem('glucoseHistory', JSON.stringify(history));
            showNotification('Reading saved successfully!', 'success');
        });

        // Clear all data from localStorage
        clearBtn.addEventListener('click', () => {
            if (confirm('Are you sure you want to clear all saved data? This cannot be undone.')) {
                localStorage.removeItem('glucoseData');
                localStorage.removeItem('glucoseHistory');
                showNotification('All data cleared successfully!', 'info');
            }
        });

        // Export current results
        exportBtn.addEventListener('click', () => {
            const glucose = parseFloat(glucoseInput.value);
            const mealTime = mealTimeSelect.value;

            if (isNaN(glucose)) {
                showNotification('Please check glucose level first', 'error');
                return;
            }

            const csvContent = `Glucose Results\nDate: ${new Date().toLocaleString()}\nGlucose Level: ${glucose} mg/dL\nMeal Time: ${mealTime || 'N/A'}`;
            
            const blob = new Blob([csvContent], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.setAttribute('hidden', '');
            a.setAttribute('href', url);
            a.setAttribute('download', `glucose_level_${new Date().toISOString().slice(0,10)}.txt`);
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            
            showNotification('Results exported successfully!', 'success');
        });

        // Export history
        exportHistoryBtn.addEventListener('click', () => {
            const history = JSON.parse(localStorage.getItem('glucoseHistory')) || [];
            
            if (history.length === 0) {
                showNotification('No history to export', 'error');
                return;
            }
            
            let csvContent = 'Date,Glucose Level,Meal Time,Medication,Exercise,Notes\n';
            history.forEach(entry => {
                csvContent += `"${entry.timestamp}",${entry.glucose},"${entry.mealTime || ''}","${entry.medication || ''}","${entry.exercise || ''}","${entry.notes || ''}"\n`;
            });
            
            const blob = new Blob([csvContent], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.setAttribute('hidden', '');
            a.setAttribute('href', url);
            a.setAttribute('download', `glucose_history_${new Date().toISOString().slice(0,10)}.csv`);
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            
            showNotification('History exported successfully!', 'success');
        });

        // Clear history
        clearHistoryBtn.addEventListener('click', () => {
            if (confirm('Are you sure you want to clear all history? This cannot be undone.')) {
                localStorage.removeItem('glucoseHistory');
                loadHistory();
                showNotification('History cleared successfully!', 'info');
            }
        });

        // Load saved data from localStorage
        function loadSavedData() {
            const savedData = localStorage.getItem('glucoseData');
            if (savedData) {
                const data = JSON.parse(savedData);
                glucoseInput.value = data.glucose || '';
                mealTimeSelect.value = data.mealTime || '';
                medicationSelect.value = data.medication || '';
                exerciseSelect.value = data.exercise || '';
                notesInput.value = data.notes || '';
            }
        }

        // Update status indicator
        function updateStatus(glucose, mealTime) {
            let status, statusClass;
            
            // Determine status based on glucose level and meal time
            if (glucose < 70) {
                status = 'Hypoglycemia (Low)';
                statusClass = 'low';
            } else if (mealTime === 'fasting') {
                if (glucose >= 70 && glucose <= 99) {
                    status = 'Normal Fasting';
                    statusClass = 'normal';
                } else if (glucose >= 100 && glucose <= 125) {
                    status = 'Prediabetes Fasting';
                    statusClass = 'prediabetes';
                } else {
                    status = 'Diabetes Fasting';
                    statusClass = 'diabetes';
                }
            } else if (mealTime.includes('hour') || mealTime === 'before-meal') {
                if (glucose < 140) {
                    status = 'Normal Post-Meal';
                    statusClass = 'normal';
                } else if (glucose >= 140 && glucose <= 199) {
                    status = 'Prediabetes Post-Meal';
                    statusClass = 'prediabetes';
                } else {
                    status = 'Diabetes Post-Meal';
                    statusClass = 'diabetes';
                }
            } else {
                // Random reading
                if (glucose >= 70 && glucose <= 140) {
                    status = 'Normal Range';
                    statusClass = 'normal';
                } else if (glucose > 140 && glucose <= 199) {
                    status = 'Elevated';
                    statusClass = 'prediabetes';
                } else {
                    status = 'High';
                    statusClass = 'diabetes';
                }
            }
            
            glucoseStatus.textContent = status;
            glucoseStatus.className = 'result-status ' + statusClass;
        }

        // Update chart bars with animation
        function updateChartBars(glucose) {
            // Normalize values for chart display (max 300 for visualization)
            const maxValue = 300;
            const glucoseHeight = Math.min(100, (glucose / maxValue) * 100);
            
            glucoseBar.style.height = `${glucoseHeight}%`;
            glucoseBarValue.textContent = glucose;
        }

        // Calculate glucose risk
        function calculateRisk(glucose) {
            let riskLevel = '';
            let riskMessage = '';
            let backgroundColor = '#fff3cd';
            let iconColor = '#856404';
            let textColor = '#856404';
            
            if (glucose < 70) {
                riskLevel = 'Severe Hypoglycemia';
                riskMessage = 'Your blood sugar is dangerously low. Consume fast-acting carbohydrates immediately and seek medical attention if symptoms persist.';
                backgroundColor = '#cce5ff';
                iconColor = '#004085';
                textColor = '#004085';
            } else if (glucose >= 70 && glucose < 75) {
                riskLevel = 'Mild Hypoglycemia';
                riskMessage = 'Your blood sugar is low. Consider having a small snack with carbohydrates.';
                backgroundColor = '#cce5ff';
                iconColor = '#004085';
                textColor = '#004085';
            } else if (glucose >= 75 && glucose <= 140) {
                riskLevel = 'Normal Range';
                riskMessage = 'Your blood sugar is within the normal range. Continue your current management plan.';
            } else if (glucose > 140 && glucose <= 180) {
                riskLevel = 'Slightly Elevated';
                riskMessage = 'Your blood sugar is slightly elevated. Monitor closely and consider dietary adjustments.';
            } else if (glucose > 180 && glucose <= 250) {
                riskLevel = 'Moderately High';
                riskMessage = 'Your blood sugar is moderately high. Review your meal plan and medication timing.';
            } else if (glucose > 250 && glucose <= 350) {
                riskLevel = 'High';
                riskMessage = 'Your blood sugar is high. Contact your healthcare provider for guidance.';
                backgroundColor = '#f8d7da';
                iconColor = '#721c24';
                textColor = '#721c24';
            } else {
                riskLevel = 'Very High';
                riskMessage = 'Your blood sugar is very high. Seek immediate medical attention.';
                backgroundColor = '#f8d7da';
                iconColor = '#721c24';
                textColor = '#721c24';
            }
            
            riskText.innerHTML = `<strong>${riskLevel}:</strong> ${riskMessage}`;
            riskIndicator.style.display = 'flex';
            riskIndicator.style.backgroundColor = backgroundColor;
            document.querySelector('.risk-icon').style.color = iconColor;
            riskText.style.color = textColor;
        }

        // Generate personalized recommendations
        function generateRecommendations(glucose, mealTime) {
            let recommendations = [];
            
            if (glucose < 70) {
                recommendations.push('Consume 15-20 grams of fast-acting carbohydrates (glucose tablets, juice, candy).');
                recommendations.push('Recheck blood sugar in 15 minutes.');
                recommendations.push('Seek medical attention if symptoms persist or worsen.');
            } else if (glucose >= 70 && glucose <= 99) {
                recommendations.push('Continue your current healthy eating and lifestyle habits.');
                recommendations.push('Regular monitoring helps maintain good control.');
            } else if (glucose >= 100 && glucose <= 125) {
                recommendations.push('Focus on a balanced diet with controlled portions.');
                recommendations.push('Increase physical activity to improve insulin sensitivity.');
                recommendations.push('Maintain regular monitoring and follow-up with your healthcare provider.');
            } else if (glucose >= 126 && glucose <= 139) {
                recommendations.push('Review your meal plan with a registered dietitian.');
                recommendations.push('Ensure consistent timing of meals and medications.');
                recommendations.push('Stay hydrated and monitor for any symptoms.');
            } else if (glucose >= 140 && glucose <= 199) {
                recommendations.push('Consider adjusting your carbohydrate intake at meals.');
                recommendations.push('Engage in light physical activity after meals if possible.');
                recommendations.push('Contact your healthcare provider to review your management plan.');
            } else if (glucose >= 200) {
                recommendations.push('Contact your healthcare provider immediately for guidance.');
                recommendations.push('Check for ketones if you have type 1 diabetes.');
                recommendations.push('Stay hydrated and avoid high-carbohydrate foods until levels improve.');
            }
            
            recommendationsList.innerHTML = recommendations.map(rec => `<li>${rec}</li>`).join('');
        }

        // Load history into tab
        function loadHistory() {
            const history = JSON.parse(localStorage.getItem('glucoseHistory')) || [];
            
            if (history.length === 0) {
                historyList.innerHTML = '<div class="no-history">No history available. Save your readings to see them here.</div>';
                return;
            }
            
            let historyHTML = '';
            history.slice().reverse().forEach((entry, index) => {
                const originalIndex = history.length - 1 - index;
                historyHTML += `
                    <div class="history-item">
                        <div class="history-item-header">
                            <span>${entry.timestamp}</span>
                            <button class="delete-history" data-index="${originalIndex}" style="background: #e74c3c; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer; font-size: 12px;">Delete</button>
                        </div>
                        <div class="history-item-values">
                            <div class="history-value">
                                <div class="history-value-label">Glucose</div>
                                <div class="history-value-data">${entry.glucose} mg/dL</div>
                            </div>
                            <div class="history-value">
                                <div class="history-value-label">Meal Time</div>
                                <div class="history-value-data">${entry.mealTime || '--'}</div>
                            </div>
                            <div class="history-value">
                                <div class="history-value-label">Medication</div>
                                <div class="history-value-data">${entry.medication === 'yes' ? 'Yes' : entry.medication === 'no' ? 'No' : '--'}</div>
                            </div>
                        </div>
                        <div style="margin-top: 10px; font-size: 12px; color: #666;">
                            ${entry.notes ? `Notes: ${entry.notes}` : 'No notes'}
                        </div>
                    </div>
                `;
            });
            
            historyList.innerHTML = historyHTML;
            
            // Add event listeners to delete buttons
            document.querySelectorAll('.delete-history').forEach(button => {
                button.addEventListener('click', function() {
                    const index = parseInt(this.getAttribute('data-index'));
                    deleteHistoryEntry(index);
                });
            });
        }

        // Delete a history entry
        function deleteHistoryEntry(index) {
            let history = JSON.parse(localStorage.getItem('glucoseHistory')) || [];
            history.splice(index, 1);
            localStorage.setItem('glucoseHistory', JSON.stringify(history));
            loadHistory();
            showNotification('History entry deleted!', 'info');
        }

        // Load progress data
        function loadProgressData() {
            const history = JSON.parse(localStorage.getItem('glucoseHistory')) || [];
            
            if (history.length === 0) {
                progressCharts.innerHTML = '<div class="no-history">No progress data available. Save your readings to track progress.</div>';
                return;
            }
            
            // Calculate averages
            const avgGlucose = history.reduce((sum, entry) => sum + entry.glucose, 0) / history.length;
            const fastingReadings = history.filter(entry => entry.mealTime === 'fasting');
            const postMealReadings = history.filter(entry => entry.mealTime && entry.mealTime.includes('hour'));
            
            const avgFasting = fastingReadings.length > 0 ? 
                fastingReadings.reduce((sum, entry) => sum + entry.glucose, 0) / fastingReadings.length : 0;
                
            const avgPostMeal = postMealReadings.length > 0 ? 
                postMealReadings.reduce((sum, entry) => sum + entry.glucose, 0) / postMealReadings.length : 0;
            
            // Create progress charts
            let chartsHTML = `
                <div class="progress-chart">
                    <h4>Overall Glucose Progress</h4>
                    <div class="progress-line">
                        <div class="progress-fill" style="width: ${Math.min(100, (avgGlucose / 200) * 100)}%"></div>
                        <div class="progress-target" style="left: ${(140 / 200) * 100}%"></div>
                    </div>
                    <div class="progress-info">
                        <span>Average: ${avgGlucose.toFixed(1)} mg/dL</span>
                        <span>Target: <140 mg/dL</span>
                    </div>
                </div>
                
                <div class="progress-chart">
                    <h4>Fasting Glucose Progress</h4>
                    <div class="progress-line">
                        <div class="progress-fill" style="width: ${Math.min(100, (avgFasting / 150) * 100)}%"></div>
                        <div class="progress-target" style="left: ${(100 / 150) * 100}%"></div>
                    </div>
                    <div class="progress-info">
                        <span>Average: ${avgFasting.toFixed(1) || 'N/A'} mg/dL</span>
                        <span>Target: <100 mg/dL</span>
                    </div>
                </div>
                
                <div class="progress-chart">
                    <h4>Post-Meal Glucose Progress</h4>
                    <div class="progress-line">
                        <div class="progress-fill" style="width: ${Math.min(100, (avgPostMeal / 200) * 100)}%"></div>
                        <div class="progress-target" style="left: ${(140 / 200) * 100}%"></div>
                    </div>
                    <div class="progress-info">
                        <span>Average: ${avgPostMeal.toFixed(1) || 'N/A'} mg/dL</span>
                        <span>Target: <140 mg/dL</span>
                    </div>
                </div>
            `;
            
            progressCharts.innerHTML = chartsHTML;
        }

        // Show notification
        function showNotification(message, type) {
            notification.textContent = message;
            notification.className = 'notification ' + type;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }
    </script>
</body>
</html>
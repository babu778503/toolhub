<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ToolHub Free - 50,000+ Free Online Tools</title>
    <meta name="description" content="Your one-stop destination for over 50,000 free online tools. Calculators, converters, design tools, and more â€” all instantly available without installation.">
    <meta name="keywords" content="free tools, online tools, calculators, converters, developer tools, design tools, productivity">
    
    <!-- Preload Font Awesome CSS (non-blocking) -->
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"></noscript>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- Preload Google Fonts CSS (non-blocking) -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Anton&family=Dancing+Script:wght@700&family=Great+Vibes&family=Montserrat:wght@300;400;700;800;900&family=Oswald:wght@400;700&family=Pacifico&family=Playfair+Display:ital,wght@0,700;1,400;1,1&family=Poppins:wght@400;500;700;800;900&family=Roboto:wght@400;700;900&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Anton&family=Dancing+Script:wght@700&family=Great+Vibes&family=Montserrat:wght@300;400;700;800;900&family=Oswald:wght@400;700&family=Pacifico&family=Playfair+Display:ital,wght@0,700;1,400;1,1&family=Poppins:wght@400;500;700;800;900&family=Roboto:wght@400;700;900&display=swap"></noscript>
    
    <style>:root{--primary-color:#4f46e5;--primary-darker:#4338ca;--secondary-color:#7c3aed;--background-color:#f8f9fa;--card-background:#fff;--text-color:#343a40;--light-text-color:#6c757d;--white-color:#fff;--border-color:#e5e7eb;--shadow:0 2px 4px rgba(0,0,0,.04);--font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;--sidebar-width:160px}*{margin:0;padding:0;box-sizing:border-box}html{scroll-behavior:smooth}html,body{overflow-x:hidden}body{font-family:var(--font-family);background-color:var(--background-color);color:var(--text-color);line-height:1.5;padding-bottom:50px}.container{max-width:1200px;margin:0 auto;padding:0 1rem}h2,h3{font-weight:700;line-height:1.2;margin-bottom:.75rem}h2{font-size:1.75rem;color:var(--text-color)}.body-wrapper{display:grid;grid-template-columns:var(--sidebar-width) 1fr var(--sidebar-width);gap:1rem;max-width:1600px;margin:0 auto;padding:0 1rem;padding-top:70px}.sidebar-ad{position:sticky;top:70px;height:calc(100vh - 80px);display:flex;flex-direction:column;gap:1rem;font-family:'Poppins',sans-serif}.ad-link-wrapper{text-decoration:none;color:inherit;display:flex;flex-grow:1}#mobile-top-banner-ad-rotator{display:none}.main-header{background-color:var(--primary-color);padding:.5rem 0;position:fixed;top:0;width:100%;z-index:1000}.main-header .container{display:flex;justify-content:space-between;align-items:center;gap:1rem}.logo{font-size:1.5rem;font-weight:800;color:var(--white-color);text-decoration:none;display:flex;align-items:center;flex-shrink:0}.logo i{margin-right:.5rem;font-size:1.3rem}.main-nav{display:flex;align-items:center;gap:.25rem;flex-shrink:0}.main-nav a{color:var(--white-color);text-decoration:none;font-weight:600;padding:.6rem 1rem;border-radius:6px;display:flex;align-items:center;gap:.5rem;transition:background-color:.3s}.main-nav a:hover{background-color:rgba(255,255,255,.1)}.main-nav a.active{background-color:var(--primary-darker)}.nav-badge{background-color:#ef4444;color:#fff;font-size:.7rem;font-weight:700;padding:2px 6px;border-radius:10px;margin-left:.5rem;display:none;vertical-align:middle}.nav-badge:not(:empty){display:inline-block}.hamburger-menu{display:none;font-size:1.5rem;cursor:pointer;color:var(--white-color);background:0 0;border:none;padding:.5rem}.marquee-container{flex-grow:1;overflow:hidden;position:relative;height:44px;background:var(--primary-darker);border-radius:50px;border:1px solid rgba(255,255,255,.1);box-shadow:inset 0 2px 8px rgba(0,0,0,.5)}.marquee-container::after{content:'';position:absolute;top:0;left:0;right:0;height:50%;background:linear-gradient(to bottom,rgba(255,255,255,.15),transparent);border-radius:50px 50px 0 0;pointer-events:none}.marquee-text{display:flex;align-items:center;position:absolute;white-space:nowrap;will-change:transform;animation:marquee 40s linear infinite}.stat-pill{display:inline-flex;align-items:center;gap:.5rem;padding:.5rem 1rem;border-radius:50px;margin:0 .75rem;font-size:.9rem;font-weight:600;color:var(--white-color);text-shadow:0 0 5px rgba(255,255,255,.5);transition:transform .3s ease}.stat-pill:hover{transform:scale(1.05)}.stat-pill i{opacity:.9}.pill-blue{background:linear-gradient(135deg,#4f46e5,#6366f1);box-shadow:0 0 10px 2px rgba(79,70,229,.7)}.pill-purple{background:linear-gradient(135deg,#7c3aed,#a855f7);box-shadow:0 0 10px 2px rgba(124,58,237,.7)}.pill-green{background:linear-gradient(135deg,#16a34a,#22c55e);box-shadow:0 0 10px 2px rgba(22,163,74,.7)}.pill-orange{background:linear-gradient(135deg,#f97316,#f59e0b);box-shadow:0 0 10px 2px rgba(249,115,22,.7)}@keyframes marquee{from{transform:translateX(0)}to{transform:translateX(-50%)}}.hero{text-align:center;padding:1.5rem 1rem 0;background-color:var(--background-color)}.search-bar{max-width:600px;margin:0 auto}.search-bar input{width:100%;padding:.8rem 1.2rem;border:1px solid var(--border-color);border-radius:50px;font-size:1rem;box-shadow:var(--shadow);transition:all .3s ease}.search-bar input:focus{outline:0;border-color:var(--primary-color);box-shadow:0 0 0 4px rgba(79,70,229,.2)}.view-section{padding:3rem 0;background-color:var(--card-background)}.empty-state-message{text-align:center;padding:2.5rem 1.5rem;background-color:#fff;border-radius:12px;color:var(--text-color);font-size:1.15rem;border:1px solid var(--border-color);box-shadow:0 4px 12px rgba(0,0,0,.05);line-height:1.7;margin-top:1.5rem}.empty-state-message strong{color:var(--primary-darker);font-weight:700}.empty-state-message a{color:var(--primary-color);font-weight:600;text-decoration:none;background-image:linear-gradient(var(--primary-color),var(--primary-color));background-position:0 100%;background-repeat:no-repeat;background-size:100% 2px;transition:background-size:.3s}.empty-state-message a:hover{background-size:100% 100%;color:var(--white-color)}#search-results-grid .empty-state-message::before{content:'\f071';font-family:'Font Awesome 6 Free';font-weight:900;display:block;font-size:2.5rem;color:#f59e0b;margin-bottom:1rem;animation:pulse-warning 2.5s infinite ease-in-out}@keyframes pulse-warning{0%,to{transform:scale(1);opacity:.8}50%{transform:scale(1.1);opacity:1}}.idea-credit{margin-top:1.5rem;font-size:.95rem;font-weight:600;animation:blinking-colors 5s infinite linear}.idea-credit .fa-lightbulb{margin-right:.5rem}@keyframes blinking-colors{0%{color:#ef4444}15%{color:#3b82f6}30%{color:#f59e0b}45%{color:#22c55e}60%{color:#8b5cf6}75%{color:#ec4899}90%{color:#14b8a6}to{color:#ef4444}}.tools-section{padding:3rem 0}.tool-grid{display:grid;grid-template-columns:repeat(6,1fr);gap:.75rem;margin-top:1.5rem;align-items:start}#new-tools-grid,#popular-tools-grid,#search-results-grid{min-height:50vh}.tool-card{background:var(--card-background);border:1px solid var(--border-color);border-radius:6px;box-shadow:var(--shadow);display:flex;flex-direction:column;justify-content:space-between;align-items:center;text-align:center;padding:1rem .75rem .75rem;min-height:120px;transition:transform .2s ease,box-shadow .2s ease}.tool-card:hover{transform:translateY(-3px);box-shadow:0 5px 10px rgba(0,0,0,.07)}.tool-title{font-size:.95rem;font-weight:600;color:var(--text-color);margin-bottom:.75rem;flex-grow:1;display:flex;align-items:center;justify-content:center}.tool-actions-bar{display:flex;width:100%;border-radius:5px;overflow:hidden;border:1px solid var(--border-color)}.action-btn{padding:.5rem;border:none;cursor:pointer;font-size:1rem;transition:background-color .2s ease;display:flex;justify-content:center;align-items:center}.action-btn.btn-open{flex-grow:3;background-color:var(--primary-color);color:var(--white-color);text-decoration:none;font-weight:600;font-size:.85rem}.action-btn.btn-open:hover{background-color:var(--primary-darker)}.action-btn.btn-bookmark{flex-grow:1;background-color:#ef4444;color:var(--white-color);border-left:1px solid rgba(0,0,0,.1);transition:background-color .2s ease}.action-btn.btn-bookmark:hover{background-color:#dc2626}.action-btn.btn-bookmark.bookmarked{background-color:#b91c1c}.action-btn.btn-bookmark.bookmarked i{color:#f59e0b}.action-btn.btn-share{flex-grow:1;background-color:var(--card-background);color:var(--text-color);border-left:1px solid var(--border-color)}.action-btn.btn-share:hover{background-color:#f3f4f6}.category-grid{display:grid;grid-template-columns:repeat(5,1fr);gap:1rem;margin-top:1.5rem}.category-card{background:var(--card-background);border:1px solid var(--border-color);border-radius:8px;padding:1.5rem;text-align:center;font-weight:600;color:var(--primary-color);box-shadow:var(--shadow);transition:transform .2s ease,box-shadow .2s ease;cursor:pointer}.category-card:hover{transform:translateY(-4px);box-shadow:0 6px 12px rgba(79,70,229,.1)}.your-work-controls{display:flex;align-items:center;gap:.75rem;margin-bottom:1.5rem;flex-wrap:wrap}.your-work-controls button{background-color:var(--card-background);border:1px solid var(--border-color);padding:.5rem 1rem;border-radius:6px;cursor:pointer;transition:background-color .2s}.your-work-controls button:hover{background-color:#f3f4f6}.your-work-date-range{font-weight:600;color:var(--text-color);margin:0 auto}.calendar-container{border:1px solid var(--border-color);border-radius:8px;overflow:hidden;background-color:var(--card-background)}.calendar-grid{display:grid;grid-template-columns:repeat(5,1fr);min-height:70vh}.calendar-day{border-right:1px solid var(--border-color);border-top:1px solid var(--border-color);padding:.75rem;display:flex;flex-direction:column;gap:.5rem}.calendar-day:nth-child(5n){border-right:none}.calendar-day-header{display:flex;justify-content:space-between;align-items:center;font-size:.9rem;color:var(--light-text-color)}.day-name{font-weight:500}.day-number{font-weight:600}.calendar-day.is-today .day-number{background-color:var(--primary-color);color:#fff;border-radius:50%;width:24px;height:24px;display:inline-flex;align-items:center;justify-content:center}.calendar-day.is-active-date .day-name{color:var(--primary-color);font-weight:700}.calendar-day-full-date,.mobile-event-sidebar{display:none}.calendar-event{background-color:#ff6f42;color:#fff;font-size:.8rem;font-weight:500;padding:.3rem .6rem;border-radius:4px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;cursor:pointer;transition:background-color .2s;display:flex;justify-content:space-between;align-items:center}.calendar-event:hover{background-color:#e85a31}.calendar-event.is-completed{background-color:#9ca3af;cursor:default}.calendar-event.is-completed:hover{background-color:#6b7280}.event-text-wrapper{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex-grow:1}.delete-event-btn{background:0 0;border:none;color:#fff;opacity:.7;cursor:pointer;font-size:1.2rem;line-height:1;padding:0 0 0 4px;flex-shrink:0}.delete-event-btn:hover{opacity:1}.modal-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.6);display:flex;justify-content:center;align-items:center;z-index:2000;opacity:0;visibility:hidden;transition:opacity .3s,visibility .3s}.modal-overlay.show{opacity:1;visibility:visible}.modal-content{background:var(--white-color);padding:2rem;border-radius:12px;max-width:450px;width:90%;text-align:center;position:relative;transform:scale(.9);transition:transform .3s}.modal-overlay.show .modal-content{transform:scale(1)}.modal-close{position:absolute;top:1rem;right:1rem;font-size:1.5rem;color:var(--light-text-color);cursor:pointer;border:none;background:0 0}.modal-content h3{color:#ef4444;font-size:1.2rem}.modal-content p{margin-bottom:1.5rem;color:var(--light-text-color)}.modal-benefits{list-style:none;text-align:left;margin:0 auto 2rem;display:inline-block}.modal-benefits li{margin-bottom:.75rem;display:flex;align-items:center}.modal-benefits li i{color:#22c55e;margin-right:.75rem}.google-signin-btn{display:flex;align-items:center;justify-content:center;width:100%;gap:1rem;background-color:#4285f4;color:#fff;border:none;padding:.6rem 1.2rem;border-radius:6px}.google-signin-btn:hover{background-color:#357ae8}.google-signin-btn img{width:20px;height:20px;background:#fff;border-radius:50%;padding:2px}.sub-view-container{padding:2rem 0;background-color:#fff;border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,.08);margin-top:1.5rem}.sub-view-header{display:flex;align-items:center;gap:1rem;padding:0 2rem 1.5rem;border-bottom:1px solid var(--border-color);margin-bottom:1.5rem}.btn-back{background-color:#f3f4f6;border:1px solid var(--border-color);color:var(--text-color);width:44px;height:44px;border-radius:50%;font-size:1.1rem;cursor:pointer;display:inline-flex;align-items:center;justify-content:center;transition:background-color .2s;flex-shrink:0}.btn-back:hover{background-color:#e5e7eb}.btn-alarm{margin-left:auto;background-color:#f59e0b;color:#fff;border-color:#d97706}.btn-alarm:hover{background-color:#d97706}.sub-view-header h2{margin-bottom:0;font-size:1.5rem}.tool-viewer-content{padding:0 1rem}.tool-viewer-content iframe{width:100%;height:80vh;border:1px solid var(--border-color);border-radius:6px}.page-content{padding:0 2rem;line-height:1.8;color:var(--text-color)}.page-content h3{font-size:1.25rem;color:var(--primary-darker);margin-top:2rem;margin-bottom:1rem}.page-content p,.page-content ul{margin-bottom:1rem}.page-content ul{padding-left:1.5rem}.page-content strong{font-weight:600}.main-footer{background-color:#2c3e50;color:#ecf0f1;padding:2rem 1rem;text-align:center}.footer-copyright{margin-bottom:1rem;font-size:1rem;color:var(--white-color)}.footer-links-bottom{display:flex;justify-content:center;align-items:center;flex-wrap:wrap;gap:.5rem 1.5rem}.footer-links-bottom a{color:#bdc3c7;text-decoration:none;font-size:.9rem;transition:color .3s ease}.footer-links-bottom a:hover{color:var(--white-color)}.add-event-mobile-btn{display:none;margin-left:auto;font-size:1.5rem;cursor:pointer;padding:.5rem;background:0 0;border:none;color:var(--primary-color)}.reminder-controls-desktop{padding:0 2rem 1.5rem;display:flex;gap:.5rem;align-items:center}.reminder-controls-desktop input,.reminder-controls-desktop select{padding:.5rem;border:1px solid #ccc;border-radius:4px;font-family:var(--font-family);font-size:1rem}.reminder-controls-desktop button{margin-left:.5rem;padding:.5rem 1rem;background:var(--primary-color);color:#fff;border:none;border-radius:4px;cursor:pointer}.reminder-controls-desktop button:hover{background:var(--primary-darker)}@keyframes icon-pulse-multicolor{0%,to{color:#ef4444;transform:scale(1)}16.66%{transform:scale(1.15)}33.33%{color:#f59e0b;transform:scale(1)}50%{transform:scale(1.15)}66.66%{color:#22c55e;transform:scale(1)}83.33%{transform:scale(1.15)}}@keyframes blink-multicolor{0%,to{background-color:#ef4444;transform:scale(1);box-shadow:0 0 8px rgba(239,68,68,.7)}16.66%{transform:scale(1.03)}33.33%{background-color:#f59e0b;transform:scale(1);box-shadow:0 0 8px rgba(245,158,11,.7)}50%{transform:scale(1.03)}66.66%{background-color:#22c55e;transform:scale(1);box-shadow:0 0 8px rgba(34,197,94,.7)}83.33%{transform:scale(1.03)}}@keyframes mobile-work-pulse{0%,to{background-color:#fcece4}33%{background-color:#e8c5e5}66%{background-color:#cce7f5}}@keyframes mobile-today-pulse{0%,to{background-color:#ffadad}33%{background-color:#ffd6a5}66%{background-color:#caffbf}}.date-picker-modal-content{max-width:360px;padding:1.5rem 1rem}.date-picker-modal-content h3{color:var(--text-color);margin-bottom:1rem;font-size:1.25rem}.picker-headers{display:flex;justify-content:center;padding:0 .5rem;margin-bottom:.25rem}.picker-header{flex:1;text-align:center;font-size:.75rem;color:var(--light-text-color);font-weight:600}#month-header{flex-basis:25%}#day-header{flex-basis:20%}#year-header{flex-basis:25%}#hour-header{flex-basis:15%}#colon-header{flex-basis:5%}#minute-header{flex-basis:15%}#ampm-header{flex-basis:20%}.picker-container{display:flex;justify-content:center;align-items:center;margin-bottom:1rem;position:relative;height:150px;-webkit-mask-image:linear-gradient(to bottom,transparent,black 25%,black 75%,transparent);mask-image:linear-gradient(to bottom,transparent,black 25%,black 75%,transparent)}.picker-container::after,.picker-container::before{content:'';position:absolute;left:10px;right:10px;height:1px;background-color:var(--border-color);z-index:1}.picker-container::before{top:50px}.picker-container::after{bottom:50px}.picker-column{height:100%;overflow-y:scroll;scroll-snap-type:y mandatory}#month-picker{flex-basis:25%}#day-picker{flex-basis:20%}#year-picker{flex-basis:25%}#hour-picker{flex-basis:15%}#minute-picker{flex-basis:15%}#ampm-picker{flex-basis:20%}.picker-column{scrollbar-width:none;-ms-overflow-style:none}.picker-column::-webkit-scrollbar{display:none}.picker-wheel{padding:50px 0}.picker-item{height:50px;display:flex;align-items:center;justify-content:center;scroll-snap-align:center;font-size:1.1rem;color:var(--light-text-color)}.picker-colon{font-size:1.2rem;font-weight:700;padding:0 .25rem;height:100%;display:flex;align-items:center;flex-basis:5%}.mobile-frequency-selector{width:100%;padding:.5rem;border:1px solid var(--border-color);border-radius:4px;margin-bottom:1rem;font-size:1rem}.modal-actions{display:flex;justify-content:flex-end;gap:.5rem;padding-top:1rem;border-top:1px solid var(--border-color)}.modal-action-btn{background:0 0;border:none;padding:.5rem 1rem;font-weight:600;color:var(--primary-color);cursor:pointer;border-radius:4px;transition:background-color .2s}.modal-action-btn:hover{background-color:#f3f4f6}#datePickerSet{color:var(--primary-darker)}@keyframes blink-modal-title-anim{0%,to{color:#ef4444;opacity:1}33%{color:#f59e0b}50%{opacity:.7}66%{color:#22c55e}}@media (min-width:769px){.blinking-reminder-btn{animation:blink-multicolor 4s infinite linear;border:none;color:#fff;font-weight:700;text-shadow:1px 1px 2px rgba(0,0,0,.3)}}@media (max-width:1280px){.sidebar-ad{display:none}.body-wrapper{grid-template-columns:1fr}}@media (max-width:992px){.tool-grid{grid-template-columns:repeat(4,1fr)}.category-grid{grid-template-columns:repeat(3,1fr)}.main-nav{display:none;flex-direction:column;position:absolute;top:100%;left:0;width:100%;background-color:var(--primary-darker);padding:1rem;gap:.5rem}.main-nav.active{display:flex}.main-nav a{justify-content:center}.hamburger-menu{display:block}}@media (max-width:768px){#mobile-top-banner-ad-rotator{display:block;position:sticky;top:0;z-index:1001;font-family:'Poppins',sans-serif;height:50px;background-color:#f0f0f0}.body-wrapper{padding-top:110px}.banner-link-wrapper{display:block;text-decoration:none;color:inherit;position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;z-index:0;transition:opacity .8s ease-in-out}.banner-link-wrapper.active{opacity:1;z-index:1}.banner{width:100%;height:100%;box-shadow:0 2px 8px rgba(0,40,80,.1);overflow:hidden;position:relative;color:#fff;display:flex;align-items:center;justify-content:space-between;padding:0 10px;box-sizing:border-box;transition:transform .3s ease-in-out,box-shadow .3s ease}.banner-link-wrapper:hover .banner{transform:scale(1.02)}.blinking-text{animation:multiColorBlink 4s linear infinite;text-shadow:0 1px 3px rgba(0,0,0,.5)}.banner-1{background-color:#3b5998}.banner-1 .text h2{font-size:12px;font-weight:700;margin:0;letter-spacing:.5px}.banner-1 .logo-container{padding:4px 6px;display:flex;align-items:center;gap:5px;background-color:transparent}.banner-1 .logo-icon{width:24px;height:24px;border:2px solid #fff;border-radius:50%;display:flex;align-items:flex-end;justify-content:center;gap:1px;padding-bottom:3px}.banner-1 .logo-icon .bar{background-color:#fff;width:3px;transform-origin:bottom;animation:growBar .6s cubic-bezier(.25,.46,.45,.94) forwards}.banner-1 .bar1{height:5px;animation-delay:.8s}.banner-1 .bar2{height:10px;animation-delay:.9s}.banner-1 .bar3{height:7px;animation-delay:1s}.banner-1 .logo-text{color:#fff;font-size:8px;font-weight:700;line-height:1.1;text-align:center}.banner-2{background:linear-gradient(90deg,#6a3093,#a044ff);padding-right:10px}.banner-2::before{display:none}.banner-2 .text h2{font-size:14px;font-weight:700;margin:0;line-height:1.1}.banner-2 .cta-button{background-color:rgba(255,255,255,.9);border-radius:3px;padding:4px 6px 4px 10px;color:#333;font-size:9px;font-weight:500;display:flex;align-items:center;gap:8px;z-index:1}.banner-2 .arrow{width:16px;height:16px;background-color:#f39c12;border-radius:2px;display:grid;place-items:center;color:#fff;font-size:11px;animation:moveArrow 1.5s ease-in-out infinite 1s}.banner-3{background-color:#483d8b;background-image:url(https://images.unsplash.com/photo-1556761175-5973dc0f32e7?ixlib=rb-4.0.3&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1200);background-repeat:no-repeat;background-position:center center;background-size:cover;padding:0;animation:kenBurns 15s infinite}.banner-3 .overlay{width:100%;height:100%;background-color:rgba(72,61,139,.85);display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;padding:0 10px;box-sizing:border-box;animation:slideInRight .8s ease-out forwards .5s;clip-path:none}.banner-3 h2{font-size:15px;margin:0;font-weight:800}.banner-3 p{font-size:9px;margin:2px 0 0;font-weight:500;text-transform:uppercase;opacity:.8}.banner-4{background-color:#4b0082;background-image:url(https://images.unsplash.com/photo-1522202176988-66273c2fd55f?ixlib=rb-4.0.3&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1200);background-repeat:no-repeat;background-position:left center;background-size:cover;padding:0;justify-content:center}.banner-4 .overlay{width:100%;height:100%;background:linear-gradient(to right,rgba(75,0,130,.9) 50%,rgba(75,0,130,.6));clip-path:none;display:flex;flex-direction:column;justify-content:center;text-align:center;padding-left:0}.banner-4 h2{font-size:16px;margin:0;font-weight:800}.banner-4 p{display:none}.banner-4 .join-us{display:none}.banner-5{background-color:#6ab04c;justify-content:center;padding:0}.banner-5 .content{padding:0;display:flex;align-items:center;gap:8px}.banner-5 .leaf-icon svg{width:22px;height:22px;fill:#fff}.banner-5 .text-container h2{font-family:'Pacifico',cursive;font-size:18px;margin:0;font-weight:400;line-height:1}.banner-5 .text-container p{display:none}.banner-5 .cta-area{display:none}.banner-6{background:radial-gradient(circle,#004e92,#000428);flex-direction:column;justify-content:center;align-items:center;gap:4px;text-align:center;background-size:150% 150%;animation:gradientMove 10s ease infinite}.banner-6 h2{font-size:16px;margin:0;font-weight:800;letter-spacing:1px;text-shadow:0 1px 3px rgba(0,0,0,.3);animation:zoomIn .7s ease-out forwards .8s,multiColorBlink 4s linear infinite 1.5s}.banner-6 .logo{background-color:#c0392b;padding:2px 8px;font-size:9px;font-weight:700;border-radius:2px}@keyframes multiColorBlink{0%{color:#ff8c8c;text-shadow:0 0 5px #ff8c8c}20%{color:#fff78c;text-shadow:0 0 5px #fff78c}40%{color:#8cff9a;text-shadow:0 0 5px #8cff9a}60%{color:#8cffff;text-shadow:0 0 5px #8cffff}80%{color:#d18cff;text-shadow:0 0 5px #d18cff}to{color:#ff8c8c;text-shadow:0 0 5px #ff8c8c}}@keyframes growBar{from{transform:scaleY(0)}to{transform:scaleY(1)}}@keyframes moveArrow{0%,to{transform:translateX(0)}50%{transform:translateX(3px)}}@keyframes slideInRight{from{transform:translateX(-100%)}to{transform:translateX(0)}}@keyframes kenBurns{0%{background-position:50% 50%;background-size:110% auto}50%{background-position:40% 60%;background-size:120% auto}to{background-position:50% 50%;background-size:110% auto}}@keyframes pulse{0%{transform:translateY(-50%) scale(1);box-shadow:0 0 0 0 rgba(233,30,99,.7)}70%{transform:translateY(-50%) scale(1);box-shadow:0 0 0 10px rgba(233,30,99,0)}to{transform:translateY(-50%) scale(1);box-shadow:0 0 0 0 rgba(233,30,99,0)}}@keyframes glow{0%,to{box-shadow:0 0 3px #fff,0 0 6px #fff}50%{box-shadow:0 0 6px #fff,0 0 12px #fff}}@keyframes zoomIn{from{transform:scale(.8);opacity:0}to{transform:scale(1);opacity:1}}@keyframes gradientMove{0%{background-position:0 50%}50%{background-position:100% 50%}to{background-position:0 50%}}.main-header{top:50px}.search-bar input{font-size:16px}.tool-grid{grid-template-columns:repeat(2,1fr);gap:1rem}.tool-card{min-height:auto;padding:1rem}.tool-title{margin-bottom:1rem}h2{font-size:1.5rem}.empty-state-message{font-size:1.05rem;padding:2rem 1rem;line-height:1.6}#search-results-grid .empty-state-message::before{font-size:2rem;margin-bottom:.75rem}.idea-credit{font-size:.9rem;margin-top:1rem}body.tool-view-active .body-wrapper{padding:0}#tool-viewer-container{position:relative;padding:0;margin-top:0;background:0 0;box-shadow:none}#tool-viewer-container .container{padding:0}#tool-viewer-container .sub-view-header{position:static;border:none;margin:0;padding:0;height:0}#tool-viewer-container .sub-view-header h2{display:none}#tool-viewer-container #back-to-tools-btn{position:absolute;top:.75rem;left:.75rem;z-index:10}.tool-viewer-content{padding:0}.tool-viewer-content iframe{border:none;border-radius:0;height:100vh}.page-content{padding:0 1rem}.category-grid{grid-template-columns:repeat(2,1fr)}.add-event-mobile-btn{display:block;position:absolute;top:.75rem;right:.75rem;z-index:10;margin-left:0}.add-event-mobile-btn>i{animation:icon-pulse-multicolor 3s infinite linear}.reminder-controls-desktop{display:none}.blinking-modal-title{animation:blink-modal-title-anim 4s infinite linear}.your-work-view .calendar-container{border:none}.your-work-view .calendar-grid{display:block;min-height:0}.your-work-view .your-work-date-range{display:none}.your-work-view .calendar-day{display:flex;flex-direction:row;border:none;border-bottom:5px solid #fff;background-color:#fcece4;padding:0}.your-work-view .calendar-day.is-empty{display:none}.your-work-view .calendar-day:last-of-type{border-bottom:none}.your-work-view .calendar-day-header{display:none}.your-work-view .mobile-event-sidebar{display:flex;align-items:center;justify-content:center;background-color:#e8c5e5;padding:.5rem;flex-shrink:0;animation:mobile-work-pulse 6s infinite linear}.your-work-view .calendar-day.is-today .mobile-event-sidebar{animation:mobile-today-pulse 4s infinite linear}.your-work-view .mobile-event-sidebar span{writing-mode:vertical-rl;transform:rotate(180deg);font-weight:600;color:var(--text-color);white-space:nowrap}.mobile-event-main-content{flex-grow:1}.your-work-view .calendar-day-full-date{display:block;font-weight:600;font-size:1rem;color:var(--text-color);background-color:#cce7f5;padding:.75rem 1rem;animation:mobile-work-pulse 6s infinite linear;animation-delay:-3s}.your-work-view .calendar-day.is-today .calendar-day-full-date{animation:mobile-today-pulse 4s infinite linear;animation-delay:-2s}.your-work-view .calendar-events-container{display:flex;flex-direction:column;gap:.75rem;padding:1rem}.your-work-view .calendar-event{background:0 0!important;color:var(--text-color);padding:0;font-size:1rem;font-weight:400;white-space:normal;justify-content:flex-start;gap:.5rem}.your-work-view .event-text-wrapper::before{content:"â€¢";margin-right:.5rem}.your-work-view .calendar-event.is-completed,.your-work-view .calendar-event.is-completed .event-text-wrapper{color:var(--light-text-color);text-decoration:line-through}.your-work-view .delete-event-btn{color:#ef4444;opacity:.5;margin-left:auto}}@media (max-width:576px){.category-grid{grid-template-columns:1fr}}</style>
</head>
<body>
    <!-- ðŸ“± NEW ROTATING MOBILE TOP BANNER AD ðŸ“± -->
    <div id="mobile-top-banner-ad-rotator">
        <!-- Banner 1: Initially active -->
        <a href="#link1" target="_blank" class="banner-link-wrapper active" aria-label="Audit and Assurance Consulting">
            <div class="banner banner-1">
                <div class="text">
                    <h2 class="blinking-text">AUDIT AND ASSURANCE</h2>
                </div>
                <div class="logo-container">
                    <div class="logo-icon">
                        <div class="bar bar1"></div> <div class="bar bar2"></div> <div class="bar bar3"></div>
                    </div>
                    <div class="logo-text blinking-text">Financial<br>Consulting</div>
                </div>
            </div>
        </a>
        <!-- Banner 2 -->
        <a href="#link2" target="_blank" class="banner-link-wrapper" aria-label="Join with us for your dream">
            <div class="banner banner-2">
                <div class="text"><h2 class="blinking-text">Join For Your Dream</h2></div>
                <div class="cta-button"><span class="blinking-text">More Info</span> <span class="arrow">&gt;</span></div>
            </div>
        </a>
        <!-- Banner 3 -->
        <a href="#link3" target="_blank" class="banner-link-wrapper" aria-label="Meet our team now">
            <div class="banner banner-3">
                <div class="overlay"><h2 class="blinking-text">MEET OUR TEAM NOW</h2><p class="blinking-text">To grow your business</p></div>
            </div>
        </a>
        <!-- Banner 4 -->
        <a href="#link4" target="_blank" class="banner-link-wrapper" aria-label="Why not start now">
            <div class="banner banner-4">
                <div class="overlay"><h2 class="blinking-text">WHY NOT START NOW</h2></div>
            </div>
        </a>
        <!-- Banner 5 -->
        <a href="#link5" target="_blank" class="banner-link-wrapper" aria-label="Eat healthy, order now">
            <div class="banner banner-5">
                <div class="content">
                    <div class="leaf-icon"><svg viewBox="0 0 24 24"><path d="M17,8C8,10,5.9,16.17,3.82,21.34L5.71,22L6.66,19.7C7.14,19.87,7.64,20,8,20C19,20,22,3,22,3C21,5,19,7,17,8Z" /></svg></div>
                    <div class="text-container"><h2 class="blinking-text">Eat healthy.</h2></div>
                </div>
            </div>
        </a>
        <!-- Banner 6 -->
        <a href="#link6" target="_blank" class="banner-link-wrapper" aria-label="Grow your business with Ginyard International Co.">
            <div class="banner banner-6">
                <h2 class="blinking-text">GROW YOUR BUSINESS</h2>
                <div class="logo blinking-text">Ginyard International</div>
            </div>
        </a>
    </div>

    <header class="main-header">
        <div class="container">
            <a href="#" class="logo"><i class="fas fa-screwdriver-wrench"></i> ToolHub Free</a>
            <div class="marquee-container">
                <div class="marquee-text">
                    <div class="stat-pill pill-blue"><i class="fas fa-tools"></i> 50,000+ Total Tools</div>
                    <div class="stat-pill pill-green"><i class="fas fa-plus-circle"></i> 300 New Tools Daily</div>
                    <div class="stat-pill pill-purple"><i class="fas fa-users"></i> 2.5M+ Monthly Users</div>
                    <div class="stat-pill pill-orange"><i class="fas fa-folder-open"></i> 120+ Categories</div>
                    <div class="stat-pill pill-blue"><i class="fas fa-tools"></i> 50,000+ Total Tools</div>
                    <div class="stat-pill pill-green"><i class="fas fa-plus-circle"></i> 300 New Tools Daily</div>
                    <div class="stat-pill pill-purple"><i class="fas fa-users"></i> 2.5M+ Monthly Users</div>
                    <div class="stat-pill pill-orange"><i class="fas fa-folder-open"></i> 120+ Categories</div>
                </div>
            </div>
            <nav class="main-nav" id="main-nav">
                <a href="#" class="active" data-view="home"><i class="fas fa-home"></i> Home</a>
                <a href="#" data-view="categories"><i class="fas fa-list"></i> Categories</a>
                <a href="#" data-view="popular"><i class="fas fa-star"></i> Popular</a>
                <a href="#" data-view="your-tools"><i class="fas fa-bookmark"></i> My Tools</a>
                <a href="#" data-view="your-work"><i class="fas fa-briefcase"></i> My Work <span id="your-work-badge" class="nav-badge"></span></a>
                <a href="#"><i class="fas fa-user-circle"></i> Profile</a>
            </nav>
            <button class="hamburger-menu" id="hamburger-menu" aria-label="Toggle navigation"><i class="fas fa-bars"></i></button>
        </div>
    </header>
    <div class="body-wrapper">
        <aside class="sidebar-ad left-sidebar">
        </aside>
        <main>
            <div id="tool-viewer-container" class="sub-view-container" style="display: none;"></div>
            <div id="category-tools-view" class="sub-view-container" style="display: none;"></div>
            <div id="main-content-wrapper">
                <section class="hero page-section" data-view-group="home">
                    <div class="container">
                        <h1 style="position: absolute; width: 1px; height: 1px; margin: -1px; padding: 0; overflow: hidden; clip: rect(0, 0, 0, 0); border: 0;">
                            ToolHub Free: Over 50,000 Free Online Tools
                        </h1>
                        <div class="search-bar">
                            <input type="text" id="searchInput" placeholder="ðŸ”Ž Search over 50,000 tools...">
                        </div>
                    </div>
                </section>
                <section class="tools-section page-section" id="search-results-view" data-view-group="search" style="display: none; background-color: #fff;">
                    <div class="container">
                        <h2 id="search-results-heading"></h2>
                        <div class="tool-grid" id="search-results-grid"></div>
                    </div>
                </section>
                <section class="tools-section page-section" id="popular-tools-section" data-view-group="home popular">
                    <div class="container">
                        <h2><i class="fas fa-star" style="color:#f59e0b;"></i> Popular Tools</h2>
                        <div class="tool-grid" id="popular-tools-grid"></div>
                    </div>
                </section>
                <section class="tools-section page-section" id="new-tools-section" data-view-group="home" style="background-color: #fff;">
                    <div class="container">
                        <h2><i class="fas fa-bolt" style="color:#7c3aed;"></i> New Tools Added Today</h2>
                        <div class="tool-grid" id="new-tools-grid"></div>
                    </div>
                </section>
                <section class="view-section page-section" id="categories-view" data-view-group="categories" style="display: none;"></section>
                <section class="view-section page-section" id="your-tools-view" data-view-group="your-tools" style="display: none;"></section>
                <section class="view-section page-section your-work-view" id="your-work-view" data-view-group="your-work" style="display: none;"></section>
            </div>
        </main>
        <aside class="sidebar-ad right-sidebar">
        </aside>
    </div>
    <div class="modal-overlay" id="signInModal">
        <div class="modal-content">
            <button class="modal-close" id="modalCloseBtn" aria-label="Close modal">&times;</button>
            <h3><i class="fas fa-exclamation-triangle"></i> Guest User Limit Reached</h3>
            <p>You can only save up to 20 bookmarks as a guest.</p>
            <h4>Sign in to unlock more features:</h4>
            <ul class="modal-benefits">
                <li><i class="fas fa-check-circle"></i> Unlimited bookmarks</li>
                <li><i class="fas fa-check-circle"></i> Cloud sync with Google Drive</li>
                <li><i class="fas fa-check-circle"></i> Access across all your devices</li>
                <li><i class="fas fa-check-circle"></i> Create and save tool collections</li>
            </ul>
            <button class="google-signin-btn">
                 <img src="https://upload.wikimedia.org/wikipedia/commons/c/c1/Google_%22G%22_logo.svg" alt="Google logo">
                Sign In with Google
            </button>
        </div>
    </div>
    <div class="modal-overlay" id="datePickerModal">
        <div class="modal-content date-picker-modal-content">
            <h3 class="blinking-modal-title">My Work & Set Reminder</h3>
            <div class="picker-headers">
                <span class="picker-header" id="month-header">Mo</span>
                <span class="picker-header" id="day-header">Dat</span>
                <span class="picker-header" id="year-header">Ye</span>
                <span class="picker-header" id="hour-header">Ho</span>
                <span class="picker-header" id="colon-header"></span>
                <span class="picker-header" id="minute-header">Mi</span>
                <span class="picker-header" id="ampm-header">AM/PM</span>
            </div>
            <div class="picker-container">
                <div class="picker-column" id="month-picker"></div>
                <div class="picker-column" id="day-picker"></div>
                <div class="picker-column" id="year-picker"></div>
                <div class="picker-column" id="hour-picker"></div>
                <div class="picker-colon">:</div>
                <div class="picker-column" id="minute-picker"></div>
                <div class="picker-column" id="ampm-picker"></div>
            </div>
            <select id="reminderFrequencyMobile" class="mobile-frequency-selector">
                <option value="one-time">One time</option>
                <option value="daily">Daily</option>
                <option value="weekly">Weekly</option>
                <option value="monthly">Monthly</option>
                <option value="yearly">Yearly</option>
            </select>
            <div class="modal-actions">
                <button class="modal-action-btn" id="datePickerClear">Reset</button>
                <button class="modal-action-btn" id="datePickerCancel">Cancel</button>
                <button class="modal-action-btn" id="datePickerSet">Set</button>
            </div>
        </div>
    </div>
    
    <footer class="main-footer">
        <div class="container">
            <p class="footer-copyright">&copy; <span id="copyright-year"></span> ToolHub Free</p>
            <nav class="footer-links-bottom">
            </nav>
        </div>
    </footer>
    <audio id="alarm-sound" src="https://cdn.jsdelivr.net/npm/ion-sound@3.0.7/sounds/bell_ring.mp3" preload="auto"></audio>
    <script>
    document.addEventListener('DOMContentLoaded', () => {
        let toolsData = [];
        const toolsData_fallback = [
          { "id": "App-Usage-Monitor", "Name": "App Usage Monitor", "Category": "Utility" },
          { "id": "Asthma-Trigger-Monitor", "Name": "Asthma Trigger Monitor", "Category": "Health" },
          { "id": "Auto-Renewal-Alert", "Name": "Auto Renewal Alert", "Category": "Financial" },
          { "id": "Baby-Growth-Tracker", "Name": "Baby Growth Tracker", "Category": "Health" },
          { "id": "Bac-Blood-Alcohol-Estimator", "Name": "Bac (Blood Alcohol) Estimator", "Category": "Health" },
          { "id": "Backpack-Weight-Calculator", "Name": "Backpack Weight Calculator", "Category": "Lifestyle" },
          { "id": "Baking-Temperature-Converter", "Name": "Baking Temperature Converter", "Category": "Utility" },
          { "id": "Battery-Health-Monitor", "Name": "Battery Health Monitor", "Category": "Utility" },
          { "id": "Battery-Replacement-Tracker", "Name": "Battery Replacement Tracker", "Category": "Utility" },
          { "id": "Beard-Trimming-Timer", "Name": "Beard Trimming Timer", "Category": "Lifestyle" },
          { "id": "Belt-Size-Finder", "Name": "Belt Size Finder", "Category": "Lifestyle" },
          { "id": "Bike-Route-Planner", "Name": "Bike Route Planner", "Category": "Fitness" },
          { "id": "Bike-Share-Availability-Checker", "Name": "Bike Share Availability Checker", "Category": "Utility" },
          { "id": "Birthday-Reminder", "Name": "Birthday Reminder", "Category": "Lifestyle" },
          { "id": "Blood-Pressure-Monitor", "Name": "Blood Pressure Monitor", "Category": "Health" },
          { "id": "Blue-Light-Exposure-Monitor", "Name": "Blue Light Exposure Monitor", "Category": "Health" },
          { "id": "Body-Measurement-Tracker", "Name": "Body Measurement Tracker", "Category": "Health" },
          { "id": "Boiling-Water-Timer", "Name": "Boiling Water Timer", "Category": "Utility" },
          { "id": "Book-Page-Counter", "Name": "Book Page Counter", "Category": "Education" },
          { "id": "Break-Even-Calculator", "Name": "Break Even Calculator", "Category": "Financial" },
          { "id": "Breathing-Exercise-Timer", "Name": "Breathing Exercise Timer", "Category": "Health" },
          { "id": "Bucket-List-Organizer", "Name": "Bucket List Organizer", "Category": "Lifestyle" },
          { "id": "Budget-Planner", "Name": "Budget Planner", "Category": "Financial" },
          { "id": "Caffeine-Intake-Tracker", "Name": "Caffeine Intake Tracker", "Category": "Health" },
          { "id": "Call-Duration-Tracker", "Name": "Call Duration Tracker", "Category": "Utility" },
          { "id": "Calorie-Counter", "Name": "Calorie Counter", "Category": "Health" },
          { "id": "Calorie-Intake-Calculator", "Name": "Calorie Intake Calculator", "Category": "Health" },
          { "id": "Camping-Gear-Checklist", "Name": "Camping Gear Checklist", "Category": "Lifestyle" },
          { "id": "Carb-Counter", "Name": "Carb Counter", "Category": "Health" },
          { "id": "Carb-Cycling-Planner", "Name": "Carb Cycling Planner", "Category": "Fitness" },
          { "id": "Carbon-Footprint-Calculator", "Name": "Carbon Footprint Calculator", "Category": "Environment" },
          { "id": "Carbon-Offset-Estimator", "Name": "Carbon Offset Estimator", "Category": "Environment" },
          { "id": "Car-Insurance-Cost-Checker", "Name": "Car Insurance Cost Checker", "Category": "Financial" },
          { "id": "Car-Loan-Calculator", "Name": "Car Loan Calculator", "Category": "Financial" },
          { "id": "Car-Maintenance-Reminder", "Name": "Car Maintenance Reminder", "Category": "Utility" },
          { "id": "Car-Rental-Cost-Calculator", "Name": "Car Rental Cost Calculator", "Category": "Financial" },
          { "id": "Car-Wash-Reminder", "Name": "Car Wash Reminder", "Category": "Utility" },
          { "id": "Cashback-Estimator", "Name": "Cashback Estimator", "Category": "Financial" },
          { "id": "Catering-Portion-Calculator", "Name": "Catering Portion Calculator", "Category": "Lifestyle" },
          { "id": "Cholesterol-Level-Checker", "Name": "Cholesterol Level Checker", "Category": "Health" },
          { "id": "Clothing-Size-Converter", "Name": "Clothing Size Converter", "Category": "Lifestyle" },
          { "id": "Cloud-Storage-Usage-Monitor", "Name": "Cloud Storage Usage Monitor", "Category": "Utility" },
          { "id": "Coffee-Brewing-Timer", "Name": "Coffee Brewing Timer", "Category": "Lifestyle" },
          { "id": "Ac-Filter-Replacement-Reminder", "Name": "Ac Filter Replacement Reminder", "Category": "Utility" },
          { "id": "Air-Quality-Checker", "Name": "Air Quality Checker", "Category": "Environment" },
          { "id": "Alcohol-Unit-Calculator", "Name": "Alcohol Unit Calculator", "Category": "Health" },
          { "id": "Allergy-Forecast-Checker", "Name": "Allergy Forecast Checker", "Category": "Health" },
          { "id": "Allergy-Free-Recipe-Converter", "Name": "Allergy Free Recipe Converter", "Category": "Health" },
          { "id": "Anniversary-Tracker", "Name": "Anniversary Tracker", "Category": "Lifestyle" },
          { "id": "Appliance-Energy-Cost-Calculator", "Name": "Appliance Energy Cost Calculator", "Category": "Utility" },
          { "id": "Dry-Cleaning-Tracker", "Name": "Dry Cleaning Tracker", "Category": "Daily" },
          { "id": "Egg-Boiling-Timer", "Name": "Egg Boiling Timer", "Category": "Daily" },
          { "id": "Daily-Water-Intake-Tracker", "Name": "Daily Water Intake Tracker", "Category": "Daily" }
        ];
        
        const mainContentWrapper = document.getElementById('main-content-wrapper');
        const hamburgerMenu = document.getElementById('hamburger-menu');
        const mainNav = document.getElementById('main-nav');
        const navLinks = mainNav.querySelectorAll('a[data-view]');
        const footerLinks = document.querySelectorAll('.footer-links-bottom a[data-view]');
        const logoLink = document.querySelector('.logo');
        const signInModal = document.getElementById('signInModal');
        const modalCloseBtn = document.getElementById('modalCloseBtn');
        
        const popularGrid = document.getElementById('popular-tools-grid');
        const newGrid = document.getElementById('new-tools-grid');
        const toolViewerContainer = document.getElementById('tool-viewer-container');
        const categoryToolsView = document.getElementById('category-tools-view');
        const allPageSections = document.querySelectorAll('.page-section');
        const categoriesView = document.getElementById('categories-view');
        const yourToolsView = document.getElementById('your-tools-view');
        const yourWorkView = document.getElementById('your-work-view');
        const searchInput = document.getElementById('searchInput');
        const searchResultsView = document.getElementById('search-results-view');
        const searchResultsGrid = document.getElementById('search-results-grid');
        const searchResultsHeading = document.getElementById('search-results-heading');
        const popularToolsSection = document.getElementById('popular-tools-section');
        const newToolsSection = document.getElementById('new-tools-section');
        const alarmSound = document.getElementById('alarm-sound');
        let currentView = 'home';
        let previousView = 'home';
        let calendarDisplayDate = new Date();
        let bookmarks = JSON.parse(localStorage.getItem('toolHubBookmarks')) || [];
        let recentlyUsed = JSON.parse(localStorage.getItem('toolHubRecent')) || [];
        let activeAlarms = {};
        const GUEST_BOOKMARK_LIMIT = 20;
        const RECENTLY_USED_LIMIT = 100;

        const sanitizeHTML = (str) => { if (!str) return ''; const temp = document.createElement('div'); temp.textContent = str; return temp.innerHTML; };
        const unlockAudio = () => { alarmSound.play().catch(() => {}); alarmSound.pause(); alarmSound.currentTime = 0; };
        document.body.addEventListener('click', unlockAudio, { once: true });
        const saveBookmarks = () => localStorage.setItem('toolHubBookmarks', JSON.stringify(bookmarks));
        const saveRecentlyUsed = () => localStorage.setItem('toolHubRecent', JSON.stringify(recentlyUsed));
        const saveAlarms = () => localStorage.setItem('toolHubAlarms', JSON.stringify(activeAlarms));

        const getNextOccurrence = (currentDate, frequency, originalStartTime) => {
            let next = new Date(currentDate);
            const originalDay = new Date(originalStartTime).getDate();
            switch (frequency) {
                case 'daily': next.setDate(next.getDate() + 1); break;
                case 'weekly': next.setDate(next.getDate() + 7); break;
                case 'monthly': next.setMonth(next.getMonth() + 1); if (next.getDate() !== originalDay) { next.setDate(0); } break;
                case 'yearly': next.setFullYear(next.getFullYear() + 1); break;
                default: return null;
            }
            return next;
        };

        const updateYourWorkBadge = () => {
            const badge = document.getElementById('your-work-badge');
            if (!badge) return;
            const now = new Date();
            const todayStart = new Date(now.getFullYear(), now.getMonth(), now.getDate());
            const todayEnd = new Date(todayStart.getTime() + 24 * 60 * 60 * 1000);
            let todayRemindersCount = 0;
            Object.values(activeAlarms).forEach(alarm => {
                if (alarm.triggered && alarm.frequency === 'one-time') return;
                const alarmStartDate = new Date(alarm.startTime);
                if (alarmStartDate > todayEnd) return;
                if (alarm.frequency === 'one-time') {
                    if (alarm.nextOccurrence >= todayStart.getTime() && alarm.nextOccurrence < todayEnd.getTime()) { todayRemindersCount++; }
                } else {
                    let occurrence = new Date(alarm.startTime);
                    if (occurrence < todayStart) {
                        switch (alarm.frequency) {
                            case 'daily': occurrence = new Date(todayStart.getTime()); occurrence.setHours(alarmStartDate.getHours(), alarmStartDate.getMinutes(), alarmStartDate.getSeconds()); break;
                            case 'weekly': const daysUntil = (alarmStartDate.getDay() - todayStart.getDay() + 7) % 7; occurrence = new Date(todayStart.getTime() + daysUntil * 24 * 60 * 60 * 1000); occurrence.setHours(alarmStartDate.getHours(), alarmStartDate.getMinutes(), alarmStartDate.getSeconds()); break;
                            case 'monthly': occurrence = new Date(todayStart); occurrence.setDate(alarmStartDate.getDate()); occurrence.setHours(alarmStartDate.getHours(), alarmStartDate.getMinutes(), alarmStartDate.getSeconds()); if(occurrence < todayStart) occurrence.setMonth(occurrence.getMonth()+1); break;
                            case 'yearly': occurrence = new Date(todayStart.getFullYear(), alarmStartDate.getMonth(), alarmStartDate.getDate()); occurrence.setHours(alarmStartDate.getHours(), alarmStartDate.getMinutes(), alarmStartDate.getSeconds()); if (occurrence < todayStart) occurrence.setFullYear(occurrence.getFullYear() + 1); break;
                        }
                    }
                    if (occurrence.getTime() >= todayStart.getTime() && occurrence.getTime() < todayEnd.getTime()) { todayRemindersCount++; }
                }
            });
            badge.textContent = todayRemindersCount > 0 ? todayRemindersCount : '';
        };
        const isBookmarked = (toolId) => bookmarks.includes(toolId);
        const addRecentTool = (toolId) => {
            recentlyUsed = recentlyUsed.filter(item => item.id !== toolId);
            recentlyUsed.unshift({ id: toolId, timestamp: Date.now() });
            if (recentlyUsed.length > RECENTLY_USED_LIMIT) { recentlyUsed.pop(); }
            saveRecentlyUsed();
        };
        const createToolCardHTML = (tool, isYourToolsView = false) => {
            const bookmarkedClass = isBookmarked(tool.id) ? 'bookmarked' : '';
            const hasAlarm = isYourToolsView && Object.values(activeAlarms).some(alarm => alarm.toolId === tool.id && !alarm.triggered);
            const alarmIconHTML = hasAlarm ? `<i class="fas fa-bell" style="color: #f59e0b; margin-left: 8px;" title="Alarm is set for this tool" aria-label="Alarm is set"></i>` : '';
            return `<div class="tool-card" data-tool-id="${tool.id}"><h3 class="tool-title">${sanitizeHTML(tool.Name)}${alarmIconHTML}</h3><div class="tool-actions-bar"><a href="#" class="action-btn btn-open" data-tool-id="${tool.id}" data-tool-name="${tool.Name}">Open</a><button class="action-btn btn-bookmark ${bookmarkedClass}" data-tool-id="${tool.id}" aria-label="Bookmark tool"><i class="fas fa-bookmark"></i></button><button class="action-btn btn-share" data-tool-id="${tool.id}" data-tool-title="${tool.Name}" aria-label="Share tool"><i class="fas fa-share-alt"></i></button></div></div>`;
        };
        
        const renderTools = (container, tools, injectAds = false, emptyMessage = "", isYourToolsView = false) => {
            if (tools.length === 0) {
                if (emptyMessage) container.innerHTML = `<div class="empty-state-message">${emptyMessage}</div>`;
                return;
            }
            let htmlElements = tools.map(tool => createToolCardHTML(tool, isYourToolsView));
            container.innerHTML = htmlElements.join('');
        };

        const renderCategoriesView = () => { const categories = [...new Set(toolsData.map(tool => tool.Category))].sort(); categoriesView.innerHTML = `<div class="container"><h2><i class="fas fa-list" style="color:#6366f1;"></i> All Categories</h2><div class="category-grid">${categories.map(cat => `<div class="category-card" data-category-name="${sanitizeHTML(cat)}">${sanitizeHTML(cat)}</div>`).join('')}</div></div>`; };
        const renderYourToolsView = () => { const bookmarkedTools = toolsData.filter(tool => bookmarks.includes(tool.id)); const gridId = 'your-tools-grid'; yourToolsView.innerHTML = `<div class="container"><h2><i class="fas fa-bookmark" style="color:#ef4444;"></i> My Tools</h2><div class="tool-grid" id="${gridId}"></div></div>`; renderTools(document.getElementById(gridId), bookmarkedTools, false, 'You have no bookmarked tools yet.', true); };
        const renderCategoryToolsView = (categoryName) => { const filteredTools = toolsData.filter(tool => tool.Category === categoryName); const gridId = 'category-tools-grid'; categoryToolsView.innerHTML = `<div class="container"><div class="sub-view-header"><button id="back-to-categories-btn" class="btn-back"><i class="fas fa-arrow-left"></i></button><h2>${sanitizeHTML(categoryName)} Tools</h2></div><div class="tool-grid" id="${gridId}"></div></div>`; renderTools(document.getElementById(gridId), filteredTools, false); };
        const renderYourWorkView = () => {
            const now = new Date();
            const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());

            const startOfView = new Date(calendarDisplayDate);
            startOfView.setDate(calendarDisplayDate.getDate() - 2); 
            startOfView.setHours(0, 0, 0, 0);

            const endOfView = new Date(startOfView);
            endOfView.setDate(startOfView.getDate() + 5);
            endOfView.setSeconds(endOfView.getSeconds() - 1);
            
            const endRangeDate = new Date(startOfView);
            endRangeDate.setDate(startOfView.getDate() + 4);

            const formatRange = (start, end) => { const options = { month: 'short', day: 'numeric' }; return `${start.toLocaleDateString(undefined, options)} - ${end.toLocaleDateString(undefined, {...options, year: 'numeric'})}`; }
            
            const allEvents = [];
            Object.entries(activeAlarms).forEach(([alarmId, alarm]) => {
                if (alarm.triggered && alarm.frequency === 'one-time') return;
                let occurrence = new Date(alarm.startTime);
                const searchStart = new Date(startOfView.getTime() - 31 * 24*60*60*1000);
                if (occurrence > endOfView) return;

                if (occurrence < searchStart && alarm.frequency !== 'one-time') {
                     while(occurrence < searchStart) {
                        const nextOccurrence = getNextOccurrence(occurrence, alarm.frequency, alarm.startTime);
                        if (!nextOccurrence || nextOccurrence <= occurrence) break;
                        occurrence = nextOccurrence;
                    }
                }

                while (occurrence <= endOfView) {
                    if (occurrence >= startOfView) { allEvents.push({ alarmId, date: new Date(occurrence), name: alarm.toolName, toolId: alarm.toolId, isCompleted: occurrence.getTime() < now.getTime() }); }
                    if (alarm.frequency === 'one-time') break;
                    
                    const nextOccurrence = getNextOccurrence(occurrence, alarm.frequency, alarm.startTime);
                    if (!nextOccurrence || nextOccurrence <= occurrence) break; 
                    occurrence = nextOccurrence;
                }
            });
            let calendarHtml = '';
            for (let i = 0; i < 5; i++) {
                const day = new Date(startOfView);
                day.setDate(startOfView.getDate() + i);
                const dayDate = day.getDate();
                const dayName = day.toLocaleDateString(undefined, { weekday: 'short' });
                const fullDateStr = day.toLocaleDateString(undefined, { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
                const isTodayClass = day.getTime() === today.getTime() ? 'is-today' : '';
                const isActiveDateClass = day.getTime() === new Date(calendarDisplayDate.getFullYear(), calendarDisplayDate.getMonth(), calendarDisplayDate.getDate()).getTime() ? 'is-active-date' : '';
                const eventsForDay = allEvents.filter(event => event.date.getFullYear() === day.getFullYear() && event.date.getMonth() === day.getMonth() && event.date.getDate() === day.getDate()).sort((a,b) => a.date - b.date);
                const isEmptyClass = eventsForDay.length === 0 ? 'is-empty' : '';
                let eventsHtml = eventsForDay.map(event => `<div class="calendar-event ${event.isCompleted ? 'is-completed' : ''}" data-tool-id="${event.toolId}" data-tool-name="${event.name}" title="${sanitizeHTML(event.name)}"><span class="event-text-wrapper">${sanitizeHTML(event.name)}</span><button class="delete-event-btn" data-alarm-id="${event.alarmId}">&times;</button></div>`).join('');
                calendarHtml += `<div class="calendar-day ${isTodayClass} ${isActiveDateClass} ${isEmptyClass}"><div class="mobile-event-sidebar"><span>My Work (task)</span></div><div class="mobile-event-main-content"><div class="calendar-day-full-date">${fullDateStr}</div><div class="calendar-day-header"><span class="day-name">${dayName}</span><span class="day-number">${dayDate}</span></div><div class="calendar-events-container">${eventsHtml}</div></div></div>`;
            }
            yourWorkView.innerHTML = `<div class="container"><h2><i class="fas fa-briefcase" style="color:#7c3aed;"></i> My Work</h2><div class="your-work-controls"><button id="calendar-today-btn">Today</button><button id="calendar-prev-btn"><i class="fas fa-chevron-left"></i></button><button id="calendar-next-btn"><i class="fas fa-chevron-right"></i></button><span class="your-work-date-range">${formatRange(startOfView, endRangeDate)}</span></div><div class="calendar-container"><div class="calendar-grid">${calendarHtml}</div></div></div>`;
        };
        const switchView = (view) => {
            if (currentView !== view) { previousView = currentView; }
            currentView = view;
            window.scrollTo({ top: 0, behavior: 'auto' });
            navLinks.forEach(link => { link.classList.toggle('active', ['home', 'categories', 'popular', 'your-tools', 'your-work'].includes(view) && link.dataset.view === view); });
            allPageSections.forEach(section => { section.style.display = section.dataset.viewGroup.includes(view) ? '' : 'none'; });
            if (searchInput.value !== '') { searchInput.value = ''; searchInput.dispatchEvent(new Event('input')); }
            hideTool(); hideCategoryTools();
            if (view === 'categories' && !categoriesView.innerHTML) renderCategoriesView();
            if (view === 'your-tools') renderYourToolsView();
            if (view === 'your-work') renderYourWorkView();
            if (mainNav.classList.contains('active')) mainNav.classList.remove('active');
        };
        const triggerAlarm = (alarmId) => {
            const alarmData = activeAlarms[alarmId]; if (!alarmData) return;
            if (alarmSound) { alarmSound.play().catch(e => console.error("Error playing sound:", e)); }
            if (Notification.permission === 'granted') { new Notification('ToolHub Reminder', { body: `Your reminder for "${alarmData.toolName}" is now!`, icon: 'https://img.icons8.com/plasticine/100/000000/alarm-clock.png' }); }
            if (alarmData.frequency === 'one-time') { alarmData.triggered = true; } else {
                const nextDate = getNextOccurrence(new Date(alarmData.nextOccurrence), alarmData.frequency, alarmData.startTime);
                if (nextDate) { alarmData.nextOccurrence = nextDate.getTime(); const delay = alarmData.nextOccurrence - Date.now(); if (delay > 0) { setTimeout(() => triggerAlarm(alarmId), delay); } } else { alarmData.triggered = true; }
            }
            saveAlarms(); updateYourWorkBadge();
            if (currentView === 'your-tools') renderYourToolsView(); 
            if (currentView === 'your-work') renderYourWorkView();
        };
        const setAlarmWithDate = (toolId, toolName, scheduledDate, frequency) => {
            const scheduledTime = scheduledDate.getTime();
            if (isNaN(scheduledTime) || scheduledTime <= Date.now()) { alert("Invalid date. The date must be in the future."); return; }
            const alarmId = `${toolId}-${scheduledTime}-${Math.random().toString(36).substr(2, 5)}`;
            activeAlarms[alarmId] = { startTime: scheduledTime, nextOccurrence: scheduledTime, toolName, toolId, frequency: frequency || 'one-time', triggered: false };
            saveAlarms(); updateYourWorkBadge();
            setTimeout(() => triggerAlarm(alarmId), scheduledTime - Date.now());
            if (currentView === 'your-tools') renderYourToolsView(); if (currentView === 'your-work') { calendarDisplayDate = new Date(scheduledTime); renderYourWorkView(); }
        };
        const loadAndScheduleAlarms = () => {
            const storedAlarms = JSON.parse(localStorage.getItem('toolHubAlarms')) || {};
            const now = Date.now();
            let alarmsChanged = false;
            Object.entries(storedAlarms).forEach(([alarmId, alarm]) => {
                if (!alarm || typeof alarm.nextOccurrence !== 'number' || !alarm.toolId) { delete storedAlarms[alarmId]; alarmsChanged = true; return; }
                if (alarm.triggered && alarm.frequency === 'one-time') { if (alarm.nextOccurrence < now - (7 * 24 * 60 * 60 * 1000)) { delete storedAlarms[alarmId]; alarmsChanged = true; return; } }
                if (alarm.frequency && alarm.frequency !== 'one-time' && alarm.nextOccurrence < now) {
                    let nextDate = new Date(alarm.nextOccurrence);
                    while (nextDate.getTime() < now) { const updatedDate = getNextOccurrence(nextDate, alarm.frequency, alarm.startTime); if (!updatedDate) { nextDate = null; break; } nextDate = updatedDate; }
                    if (nextDate) { alarm.nextOccurrence = nextDate.getTime(); alarmsChanged = true; }
                }
                const remainingTime = alarm.nextOccurrence - now;
                if (remainingTime > 0 && !(alarm.triggered && alarm.frequency === 'one-time')) { setTimeout(() => triggerAlarm(alarmId), remainingTime); }
            });
            activeAlarms = storedAlarms;
            if (alarmsChanged) { saveAlarms(); }
        };

        const createToolViewerHTML = (toolId, toolName) => {
            const saneToolName = sanitizeHTML(toolName);
            return `<div class="container"><div class="sub-view-header"><button id="back-to-tools-btn" class="btn-back" aria-label="Go back"><i class="fas fa-arrow-left"></i></button><h2>${saneToolName}</h2><button class="add-event-mobile-btn" title="Add Event" aria-label="Add event or reminder"><i class="fas fa-calendar-plus"></i></button></div><div class="reminder-controls-desktop"><input type="datetime-local" id="reminderInput"><select id="reminderFrequencyDesktop"><option value="one-time">One time</option><option value="daily">Daily</option><option value="weekly">Weekly</option><option value="monthly">Monthly</option><option value="yearly">Yearly</option></select><button id="setReminderBtn" class="blinking-reminder-btn">My Work & Set Reminder</button></div><div class="tool-viewer-content"><iframe id="tool-iframe" src="/tools/${toolId}.html" title="${saneToolName}" frameborder="0"></iframe></div></div>`;
        };
        const showTool = (toolId, toolName, saveHistory = true) => {
            document.body.classList.add('tool-view-active'); mainContentWrapper.style.display = 'none'; toolViewerContainer.innerHTML = createToolViewerHTML(toolId, toolName); toolViewerContainer.style.display = 'block';
            window.scrollTo({ top: 0, behavior: 'smooth' });
            const reminderInput = document.getElementById('reminderInput'); const setReminderBtn = document.getElementById('setReminderBtn'); const frequencySelect = document.getElementById('reminderFrequencyDesktop'); const addEventMobileBtn = document.querySelector('.add-event-mobile-btn');
            const handleReminderSet = () => {
                if (!reminderInput.value) { if (window.getComputedStyle(setReminderBtn).display !== 'none') { alert('Pick a date & time first'); } return; }
                const when = new Date(reminderInput.value); if (isNaN(when.getTime()) || when <= new Date()) { alert('Choose a future date/time'); reminderInput.value = ''; return; }
                setAlarmWithDate(toolId, toolName, when, frequencySelect.value); alert('Reminder set for ' + when.toLocaleString()); reminderInput.value = '';
            };
            setReminderBtn.addEventListener('click', handleReminderSet);
            if(addEventMobileBtn) { addEventMobileBtn.addEventListener('click', () => { showDatePickerModal(toolId, toolName); }); }
            if (saveHistory) addRecentTool(toolId);
        };
        const hideTool = () => { if (toolViewerContainer.style.display !== 'none') { document.body.classList.remove('tool-view-active'); toolViewerContainer.style.display = 'none'; toolViewerContainer.innerHTML = ''; mainContentWrapper.style.display = 'block'; } };
        const showCategoryTools = (categoryName) => { renderCategoryToolsView(categoryName); mainContentWrapper.style.display = 'none'; categoryToolsView.style.display = 'block'; window.scrollTo({ top: 0, behavior: 'smooth' }); };
        const hideCategoryTools = () => { if (categoryToolsView.style.display !== 'none') { categoryToolsView.style.display = 'none'; categoryToolsView.innerHTML = ''; mainContentWrapper.style.display = 'block'; } };
        hamburgerMenu.addEventListener('click', () => mainNav.classList.toggle('active'));
        logoLink.addEventListener('click', (e) => { e.preventDefault(); switchView('home'); });
        
        const handleDataViewClick = (e) => { const link = e.target.closest('a[data-view]'); if (link) { e.preventDefault(); switchView(link.dataset.view); } };
        mainNav.addEventListener('click', handleDataViewClick);
        footerLinks.forEach(link => link.addEventListener('click', handleDataViewClick));

        const showModal = () => signInModal.classList.add('show'); const hideModal = () => signInModal.classList.remove('show');
        modalCloseBtn.addEventListener('click', hideModal); signInModal.addEventListener('click', (e) => { if (e.target === signInModal) hideModal(); });

        // --- Custom Date Picker Logic ---
        const datePickerModal = document.getElementById('datePickerModal'); const datePickerElements = { month: document.getElementById('month-picker'), day: document.getElementById('day-picker'), year: document.getElementById('year-picker'), hour: document.getElementById('hour-picker'), minute: document.getElementById('minute-picker'), ampm: document.getElementById('ampm-picker'), frequency: document.getElementById('reminderFrequencyMobile'), set: document.getElementById('datePickerSet'), cancel: document.getElementById('datePickerCancel'), clear: document.getElementById('datePickerClear'), }; let datePickerScrollTimeout = null;
        const getSelectedItemValue = (wheel) => { const itemHeight = 50; const selected_index = Math.round(wheel.scrollTop / itemHeight); const wheelDiv = wheel.querySelector('.picker-wheel'); if (!wheelDiv || !wheelDiv.children[selected_index]) return null; return wheelDiv.children[selected_index].dataset.value; };
        const populateDays = (year, month) => {
            const previouslySelectedDay = parseInt(getSelectedItemValue(datePickerElements.day), 10) || 1;
            const daysInMonth = new Date(year, month + 1, 0).getDate(); let dayHtml = '<div class="picker-wheel">';
            for (let i = 1; i <= daysInMonth; i++) { dayHtml += `<div class="picker-item" data-value="${i}">${i}</div>`; }
            dayHtml += '</div>'; datePickerElements.day.innerHTML = dayHtml;
            const newSelectedDay = Math.min(previouslySelectedDay, daysInMonth); datePickerElements.day.scrollTop = (newSelectedDay - 1) * 50;
        };
        const showDatePickerModal = (toolId, toolName) => {
            datePickerModal.dataset.toolId = toolId; datePickerModal.dataset.toolName = toolName;
            const now = new Date(); now.setHours(now.getHours() + 1);
            const currentYear = now.getFullYear(); const currentMonth = now.getMonth(); const currentDay = now.getDate(); let currentHour24 = now.getHours(); const currentMinute = Math.ceil(now.getMinutes() / 5) * 5 % 60; const currentAmPm = currentHour24 >= 12 ? 'PM' : 'AM'; let currentHour12 = currentHour24 % 12; if (currentHour12 === 0) currentHour12 = 12;
            const months = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"]; let monthHtml = '<div class="picker-wheel">'; months.forEach((m, i) => monthHtml += `<div class="picker-item" data-value="${i}">${m}</div>`); monthHtml += '</div>'; datePickerElements.month.innerHTML = monthHtml;
            let yearHtml = '<div class="picker-wheel">'; for (let i = currentYear; i < currentYear + 10; i++) { yearHtml += `<div class="picker-item" data-value="${i}">${i}</div>`; } yearHtml += '</div>'; datePickerElements.year.innerHTML = yearHtml;
            populateDays(currentYear, currentMonth);
            let hourHtml = '<div class="picker-wheel">'; for (let i = 1; i <= 12; i++) { hourHtml += `<div class="picker-item" data-value="${i}">${String(i).padStart(2, '0')}</div>`; } hourHtml += '</div>'; datePickerElements.hour.innerHTML = hourHtml;
            let minuteHtml = '<div class="picker-wheel">'; for (let i = 0; i < 60; i += 5) { minuteHtml += `<div class="picker-item" data-value="${i}">${String(i).padStart(2, '0')}</div>`; } minuteHtml += '</div>'; datePickerElements.minute.innerHTML = minuteHtml;
            datePickerElements.ampm.innerHTML = `<div class="picker-wheel"><div class="picker-item" data-value="AM">AM</div><div class="picker-item" data-value="PM">PM</div></div>`;
            datePickerElements.year.scrollTop = 0; datePickerElements.month.scrollTop = currentMonth * 50; datePickerElements.day.scrollTop = (currentDay - 1) * 50; datePickerElements.hour.scrollTop = (currentHour12 - 1) * 50; datePickerElements.minute.scrollTop = (currentMinute / 5) * 50; datePickerElements.ampm.scrollTop = (currentAmPm === 'AM' ? 0 : 1) * 50;
            const handleScroll = () => { clearTimeout(datePickerScrollTimeout); datePickerScrollTimeout = setTimeout(() => { const year = parseInt(getSelectedItemValue(datePickerElements.year), 10); const month = parseInt(getSelectedItemValue(datePickerElements.month), 10); if (!isNaN(year) && !isNaN(month)) { populateDays(year, month); } }, 150); };
            datePickerElements.month.addEventListener('scroll', handleScroll); datePickerElements.year.addEventListener('scroll', handleScroll);
            datePickerModal.classList.add('show');
        };
        const hideDatePickerModal = () => datePickerModal.classList.remove('show');
        datePickerElements.set.addEventListener('click', () => {
            const { toolId, toolName } = datePickerModal.dataset; const year = parseInt(getSelectedItemValue(datePickerElements.year), 10); const month = parseInt(getSelectedItemValue(datePickerElements.month), 10); const day = parseInt(getSelectedItemValue(datePickerElements.day), 10); let hour = parseInt(getSelectedItemValue(datePickerElements.hour), 10); const minute = parseInt(getSelectedItemValue(datePickerElements.minute), 10); const ampm = getSelectedItemValue(datePickerElements.ampm); const frequency = datePickerElements.frequency.value;
            if (![year, month, day, hour, minute].some(isNaN) && ampm) {
                if (ampm === 'PM' && hour < 12) hour += 12; if (ampm === 'AM' && hour === 12) hour = 0;
                const selectedDate = new Date(year, month, day, hour, minute); setAlarmWithDate(toolId, toolName, selectedDate, frequency); alert('Reminder set for ' + selectedDate.toLocaleString()); hideDatePickerModal();
            } else { alert('An error occurred. Please try again.'); }
        });
        datePickerElements.cancel.addEventListener('click', hideDatePickerModal); datePickerModal.addEventListener('click', (e) => { if(e.target === datePickerModal) hideDatePickerModal(); });
        datePickerElements.clear.addEventListener('click', () => { if(datePickerModal.dataset.toolId && datePickerModal.dataset.toolName) { showDatePickerModal(datePickerModal.dataset.toolId, datePickerModal.dataset.toolName); } });
        // --- End Custom Date Picker Logic ---
        
        const debounce = (func, delay) => { let timeoutId; return (...args) => { clearTimeout(timeoutId); timeoutId = setTimeout(() => { func.apply(this, args); }, delay); }; };
        const handleSearch = () => {
            const query = searchInput.value.toLowerCase().trim(); const safeQuery = sanitizeHTML(query);
            if (query.length === 0) {
                searchResultsView.style.display = 'none';
                if (currentView === 'home' || currentView === 'popular') {
                    popularToolsSection.style.display = '';
                }
                if (currentView === 'home') {
                    newToolsSection.style.display = '';
                }
                return;
            }
            popularToolsSection.style.display = 'none';
            newToolsSection.style.display = 'none';
            searchResultsView.style.display = '';
            
            if (query.length < 2) {
                searchResultsHeading.textContent = `Please type at least 2 characters...`;
                searchResultsGrid.innerHTML = '';
                return;
            }
            const filteredTools = toolsData.filter(tool => tool.Name.toLowerCase().includes(query));
            searchResultsHeading.innerHTML = `Found ${filteredTools.length} tools for "<strong>${safeQuery}</strong>"`;
            const emptyMessage = `Found 0 tools for "<strong>${safeQuery}</strong>". Please email the tool name to <a href="mailto:aktar.babu@gmail.com">aktar.babu@gmail.com</a>. Your requested tool will be added shortly with Name.<div class="idea-credit"><i class="fas fa-lightbulb"></i> Idea Share: Ayra, New York, USA</div>`;
            renderTools(searchResultsGrid, filteredTools, false, emptyMessage);
        };
        searchInput.addEventListener('input', debounce(handleSearch, 300));

        const handleBookmarkClick = (button) => {
            const toolId = button.dataset.toolId; if (!toolId) return;
            if (isBookmarked(toolId)) { bookmarks = bookmarks.filter(id => id !== toolId); button.classList.remove('bookmarked'); } else { if (bookmarks.length >= GUEST_BOOKMARK_LIMIT) { showModal(); return; } bookmarks.push(toolId); button.classList.add('bookmarked'); }
            saveBookmarks(); if (currentView === 'your-tools') renderYourToolsView();
        };
        const handleShareClick = async (button) => {
            const { toolId, toolTitle } = button.dataset; const url = `${window.location.origin}/tools/${toolId}.html`; const shareData = { title: `Check out: ${toolTitle}`, text: `I found a great free tool on ToolHub: ${toolTitle}`, url };
            try { await navigator.share(shareData); } catch (err) { try { await navigator.clipboard.writeText(url); const originalIcon = button.innerHTML; button.innerHTML = '<i class="fas fa-check"></i>'; setTimeout(() => { button.innerHTML = originalIcon; }, 2000); } catch (err) { alert('Could not copy URL. Please copy it manually: ' + url); } }
        };
        document.body.addEventListener('click', (e) => {
            const openBtn = e.target.closest('.btn-open'); const bookmarkBtn = e.target.closest('.btn-bookmark'); const shareBtn = e.target.closest('.btn-share'); const backBtn = e.target.closest('#back-to-tools-btn'); const categoryCard = e.target.closest('.category-card'); const backToCategoriesBtn = e.target.closest('#back-to-categories-btn');
            if (openBtn) { e.preventDefault();
const { toolId, toolName } = openBtn.dataset; if (toolId && toolName) showTool(toolId, toolName, !openBtn.closest('#search-results-view')); 
            }
            if (bookmarkBtn) handleBookmarkClick(bookmarkBtn); 
            if (shareBtn) handleShareClick(shareBtn);
            if (backBtn) { 
                hideTool(); 
                if (currentView === 'your-work') renderYourWorkView(); 
            }
            if (categoryCard) showCategoryTools(categoryCard.dataset.categoryName); 
            if (backToCategoriesBtn) hideCategoryTools();

            if (currentView === 'your-work') {
                const deleteEventBtn = e.target.closest('.delete-event-btn'); 
                const calendarEvent = e.target.closest('.calendar-event');
                if (e.target.closest('#calendar-today-btn')) { 
                    calendarDisplayDate = new Date(); 
                    renderYourWorkView(); 
                }
                if (e.target.closest('#calendar-prev-btn')) { 
                    calendarDisplayDate.setDate(calendarDisplayDate.getDate() - 1); 
                    renderYourWorkView(); 
                }
                if (e.target.closest('#calendar-next-btn')) { 
                    calendarDisplayDate.setDate(calendarDisplayDate.getDate() + 1);
                    renderYourWorkView(); 
                }
                if (deleteEventBtn) {
                    e.stopPropagation(); 
                    const alarmId = deleteEventBtn.dataset.alarmId; 
                    const alarm = activeAlarms[alarmId]; 
                    const message = (alarm && alarm.frequency !== 'one-time') ? 'Are you sure you want to delete this recurring reminder and all its future occurrences?' : 'Are you sure you want to delete this reminder?';
                    if (alarmId && confirm(message)) { 
                        delete activeAlarms[alarmId]; 
                        saveAlarms(); 
                        updateYourWorkBadge(); 
                        renderYourWorkView(); 
                    }
                } else if (calendarEvent && !calendarEvent.classList.contains('is-completed')) { 
                    const { toolId, toolName } = calendarEvent.dataset; 
                    if (toolId && toolName) showTool(toolId, toolName, true); 
                }
            }
        });

        function initializeApp(data) {
            toolsData = data;
            loadAndScheduleAlarms();
            updateYourWorkBadge();
            const shuffledTools = [...data].sort(() => 0.5 - Math.random());

            const numPopular = 18;
            const numNew = 18;

            const popularTools = shuffledTools.slice(0, numPopular);
            const newTools = shuffledTools.slice(-numNew);

            renderTools(popularGrid, popularTools);
            renderTools(newGrid, newTools.reverse());

            document.getElementById('copyright-year').textContent = new Date().getFullYear();
            const mobileBanner = document.getElementById('mobile-top-banner-ad-rotator');
            const mainHeader = document.querySelector('.main-header');
            if (mobileBanner && mainHeader && window.getComputedStyle(mobileBanner).display !== 'none') {
                mainHeader.style.top = '50px';
            }
            switchView('home');
        }
        
        const bannerRotator = document.getElementById('mobile-top-banner-ad-rotator');
        if (bannerRotator) {
            const banners = bannerRotator.querySelectorAll('.banner-link-wrapper');
            if (banners.length > 1) {
                let currentIndex = 0;
                const rotateBanners = () => { 
                    banners[currentIndex].classList.remove('active'); 
                    currentIndex = (currentIndex + 1) % banners.length; 
                    banners[currentIndex].classList.add('active'); 
                };
                setInterval(rotateBanners, 4000);
            }
        }
        
        async function loadData() { 
            try { 
                const response = await fetch(`tools.json?v=${Date.now()}`); 
                if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`); 
                initializeApp(await response.json()); 
            } catch (error) { 
                initializeApp(toolsData_fallback); 
            } 
        }
        loadData();
    });
    </script>
</body>
</html>
